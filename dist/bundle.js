/*! For license information please see bundle.js.LICENSE */
!function(e,t){for(var n in t)e[n]=t[n]}(window,function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=93)}([function(e,t,n){"use strict";n.d(t,"a",function(){return y});var i,r,a,o,s,c,l,u,d,h,p,m,f,g,v,y,_,b=n(43),C=n.n(b),k=n(13),S=n.n(k),w=n(2),P=n.n(w),E=n(5),T=n.n(E),O=n(1),A=n.n(O),L=n(6),x=n.n(L),R=n(3),I=n.n(R),F=n(19),M=n.n(F);(function(e){var t=Object.prototype.toString,n=Array.isArray||function(e){return"[object Array]"===t.call(e)};function i(e){return"function"==typeof e}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(e,t){return null!=e&&"object"===M()(e)&&t in e}var o=RegExp.prototype.test,s=/\S/;function c(e){return t=s,n=e,!o.call(t,n);var t,n}var l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},u=/\s*/,d=/\s+/,h=/\s*=/,p=/\s*\}/,m=/#|\^|\/|>|\{|&|=|!/;function f(e){this.string=e,this.tail=e,this.pos=0}function g(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function v(){this.cache={}}f.prototype.eos=function(){return""===this.tail},f.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},f.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},g.prototype.push=function(e){return new g(e,this)},g.prototype.lookup=function(e){var t,n=this.cache;if(n.hasOwnProperty(e))t=n[e];else{for(var r,o,s=this,c=!1;s;){if(0<e.indexOf("."))for(t=s.view,r=e.split("."),o=0;null!=t&&o<r.length;)o===r.length-1&&(c=a(t,r[o])),t=t[r[o++]];else t=s.view[e],c=a(s.view,e);if(c)break;s=s.parent}n[e]=t}return i(t)&&(t=t.call(this.view)),t},v.prototype.clearCache=function(){this.cache={}},v.prototype.parse=function(t,i){var a=this.cache,o=a[t];return null==o&&(o=a[t+":"+(i||e.tags).join(":")]=function(t,i){if(!t)return[];var a,o,s,l=[],g=[],v=[],y=!1,_=!1;function b(){if(y&&!_)for(;v.length;)delete g[v.pop()];else v=[];_=y=!1}function C(e){if("string"==typeof e&&(e=e.split(d,2)),!n(e)||2!==e.length)throw new Error("Invalid tags: "+e);a=new RegExp(r(e[0])+"\\s*"),o=new RegExp("\\s*"+r(e[1])),s=new RegExp("\\s*"+r("}"+e[1]))}C(i||e.tags);for(var k,S,w,P,E,T,O=new f(t);!O.eos();){if(k=O.pos,w=O.scanUntil(a))for(var A=0,L=w.length;A<L;++A)c(P=w.charAt(A))?v.push(g.length):_=!0,g.push(["text",P,k,k+1]),k+=1,"\n"===P&&b();if(!O.scan(a))break;if(y=!0,S=O.scan(m)||"name",O.scan(u),"="===S?(w=O.scanUntil(h),O.scan(h),O.scanUntil(o)):"{"===S?(w=O.scanUntil(s),O.scan(p),O.scanUntil(o),S="&"):w=O.scanUntil(o),!O.scan(o))throw new Error("Unclosed tag at "+O.pos);if(E=[S,w,k,O.pos],g.push(E),"#"===S||"^"===S)l.push(E);else if("/"===S){if(!(T=l.pop()))throw new Error('Unopened section "'+w+'" at '+k);if(T[1]!==w)throw new Error('Unclosed section "'+T[1]+'" at '+k)}else"name"===S||"{"===S||"&"===S?_=!0:"="===S&&C(w)}if(T=l.pop())throw new Error('Unclosed section "'+T[1]+'" at '+O.pos);return function(e){for(var t,n=[],i=n,r=[],a=0,o=e.length;a<o;++a)switch((t=e[a])[0]){case"#":case"^":i.push(t),r.push(t),i=t[4]=[];break;case"/":r.pop()[5]=t[2],i=0<r.length?r[r.length-1][4]:n;break;default:i.push(t)}return n}(function(e){for(var t,n,i=[],r=0,a=e.length;r<a;++r)(t=e[r])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(i.push(t),n=t));return i}(g))}(t,i)),o},v.prototype.render=function(e,t,n){var i=this.parse(e),r=t instanceof g?t:new g(t);return this.renderTokens(i,r,n,e)},v.prototype.renderTokens=function(e,t,n,i){for(var r,a,o,s="",c=0,l=e.length;c<l;++c)o=void 0,"#"===(a=(r=e[c])[0])?o=this.renderSection(r,t,n,i):"^"===a?o=this.renderInverted(r,t,n,i):">"===a?o=this.renderPartial(r,t,n,i):"&"===a?o=this.unescapedValue(r,t):"name"===a?o=this.escapedValue(r,t):"text"===a&&(o=this.rawValue(r)),void 0!==o&&(s+=o);return s},v.prototype.renderSection=function(e,t,r,a){var o=this,s="",c=t.lookup(e[1]);if(c){if(n(c))for(var l=0,u=c.length;l<u;++l)s+=this.renderTokens(e[4],t.push(c[l]),r,a);else if("object"===M()(c)||"string"==typeof c||"number"==typeof c)s+=this.renderTokens(e[4],t.push(c),r,a);else if(i(c)){if("string"!=typeof a)throw new Error("Cannot use higher-order sections without the original template");null!=(c=c.call(t.view,a.slice(e[3],e[5]),function(e){return o.render(e,t,r)}))&&(s+=c)}else s+=this.renderTokens(e[4],t,r,a);return s}},v.prototype.renderInverted=function(e,t,i,r){var a=t.lookup(e[1]);if(!a||n(a)&&0===a.length)return this.renderTokens(e[4],t,i,r)},v.prototype.renderPartial=function(e,t,n){if(n){var r=i(n)?n(e[1]):n[e[1]];return null!=r?this.renderTokens(this.parse(r),t,n,r):void 0}},v.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},v.prototype.escapedValue=function(t,n){var i=n.lookup(t[1]);if(null!=i)return e.escape(i)},v.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.3.0",e.tags=["{{","}}"];var y=new v;e.clearCache=function(){return y.clearCache()},e.parse=function(e,t){return y.parse(e,t)},e.render=function(e,t,i){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(n(r=e)?"array":M()(r))+'" was given as the first argument for mustache#render(template, view, partials)');var r;return y.render(e,t,i)},e.to_html=function(t,n,r,a){var o=e.render(t,n,r);if(!i(a))return o;a(o)},e.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return l[e]})},e.Scanner=f,e.Context=g,e.Writer=v})(window.Mustache={}),(i=(y=y||{})||(y={})).libs=i.libs||{},i.libs.mustache=Mustache,(a=(r=y||(y={})).common||(r.common={})).logLevel="",(o=a.Logger||(a.Logger={})).isDebug=o.isDebug||!0,o.isLog=o.isLog||!0,o.isProduction=o.isProduction||!1,o.log=function(e){if(o.isLog&&!o.isProduction){for(var t,n=arguments.length,i=new Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=console).log.apply(t,[e].concat(i))}},o.error=function(e){if(!o.isProduction){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];try{var r;(r=console).error.apply(r,[e].concat(n))}catch(t){var a;(a=console).log.apply(a,[e].concat(n))}}},o.debug=function(e){if(o.isDebug&&!o.isProduction){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];try{var r;(r=console).debug.apply(r,[e].concat(n))}catch(t){var a;(a=console).log.apply(a,[e].concat(n))}}},o.warn=function(e){if(!o.isProduction){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];try{var r;(r=console).warn.apply(r,[e].concat(n))}catch(t){var a;(a=console).log.apply(a,[e].concat(n))}}},(y||(y={})).isReady=!1,function(e){var t=function e(t){I()(this,e),this._typeFlag=e._typeFlag,this.searchParams=t};function n(e){return e||(e=window.location.href),e.split("?")[1]}function i(e,t){var n={};if(e)for(var i=e.split("&"),r=0;r<i.length;r++){var a=i[r],o=(a=a.split("="))[0],s=!0===t?c(a[1]):a[1];s&&(n[o]?n[o].push(s):n[o]=[s])}return n}function r(e){return-1<e.indexOf("filter")}function a(e,t){var n="",i=!0;return(!0===t?s.common.sortStringArrayAlphabetically(s.common.keys(e)):s.common.keys(e)).forEach(function(a){if(!0===t&&r(a)){var o=c(e[a][0]);o=s.common.sortFilterValuesAlphabetically(o),e[a][0]=s.common.fixedEncodeURIComponent(o)}n+=i?"":"&",i=!1;var l=e[a];if(s.common.isArray(l))for(var u=0;u<l.length;u++){var d=l[u];n+=a+"="+d,n+=u!==l.length-1?"&":""}else n+=a+"="+l}),"?"+n}function o(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)}).replace(/~/g,"%7E")}function c(e){if(e)return decodeURIComponent(e.replace(/\+/g," "))}function l(e){for(var t in e){var n=e[t];if(s.common.isArray(n)){e[t]=[];for(var i=0;i<n.length;i++){var r=n[i];u(t,r)&&e[t].push(o(r))}}else u(t,n)&&(e[t]=[o(e[t])])}return e}function u(e,t){return!e.match(/^ff-.*/)&&"object"!==M()(t)&&"function"!=typeof t&&"number"!=typeof t}function d(e){for(var t in e)if(s.common.isArray(e[t])){var n=e[t];e[t]=[];for(var i=0;i<n.length;i++)e[t].push(c(n[i]))}else e[t]=[c(e[t])];return e}t._typeFlag="HistoryEvent",e.HistoryEntry=t,e.executeCallback=function(t){if(t)try{t()}catch(t){e.Logger.error("could not execute callback: ",t)}},e.elementToString=function(e){if(e&&1===e.nodeType){var t=document.createElement("div");return t.appendChild(e),t.innerHTML}return""},e.stringToElement=function(e){var t=document.createElement("div");return t.innerHTML=e,1<t.childElementCount?t.children:t.firstElementChild},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.transitionEndEventName=function(){var e=document.createElement("div"),t={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var n in t)if(t.hasOwnProperty(n)&&void 0!==e.style[n])return t[n]},e.setStyleProperty=function(e,t,n){n.style[e]=t},e.concatFunctions=function(e,t){return function(){if(e)try{e.apply(window,arguments)}catch(t){s.common.Logger.error("could not invoke function fn1 ["+e+"] got error: "+t)}if(t)try{t.apply(window,arguments)}catch(t){s.common.Logger.error("could not invoke function fn2 ["+e+"] got error: "+t)}}},e.addEventListener=function(e,t,n){try{return e.addEventListener?e.addEventListener(t,n):e.attachEvent?e.attachEvent("on"+t,n):e[t]=n,!0}catch(e){return s.common.Logger.error("could not add eventlistener: "+e),!1}},e.whenBrowserReady=function(e){function t(){if("complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState){if(!0===s.isReady){try{e.call(window)}catch(e){s.common.Logger.error(e)}return!0}document.addEventListener("ffReady",function(){try{e.call(window)}catch(e){s.common.Logger.error(e)}return!0})}return!1}if(!0!==t())var n=setInterval(function(){!0===t()&&window.clearInterval(n)},50)},e.cloneObject=function e(t){var n;if(null==t||"object"!=M()(t))return t;if(t instanceof Array){n=[];for(var i=0,r=t.length;i<r;i++)n[i]=e(t[i]);return n}if(t instanceof Object){for(var a in n={},t)t.hasOwnProperty(a)&&(n[a]=e(t[a]));return n}throw new Error("Unable to copy obj! Its type isn't supported.")},e.copyHTMLAttributes=function(e,t){try{for(var n=e.attributes,i=0;i<n.length;i++){var r=n[i];try{"for-group"!==r.name&&t.setAttribute(r.name,r.value)}catch(e){s.common.Logger.error(e)}}}catch(e){s.common.Logger.error("could not copy attribute: "+e)}},e.isCustomElement=function(e){return 1===e.nodeType&&-1<e.tagName.indexOf("-")},e.whichTransitionEvent=function(){var e,t=document.createElement("fakeelement"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd",OTransition:"oTransitionEnd",transition:"transitionend"};for(e in n)if(void 0!==t.style[e])return n[e]},e.getParentElementByName=function e(t,n){n=n.toUpperCase();var i=t.parentNode;return i&&i.nodeName?i.nodeName===n?i:e(i,n):void 0},e.urlStringToDict=function(e){var t=n(e);return t?i(t):{}},e.getParameterString=n,e.parameterStringToDict=i,e.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on a non-object");var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n},e.sortStringArrayAlphabetically=function(e){return e.sort(function(e,t){var n=e.toLowerCase().trim(),i=t.toLowerCase().trim();return n<i?-1:i<n?1:0})},e.isFilterParameter=r,e.dictToParameterString=a,e.sortFilterValuesAlphabetically=function(e){if(-1<e.indexOf("~~~")||1<e.indexOf("___")){var t=-1<e.indexOf("~~~")?"~~~":"___",n=e.split(t);return s.common.sortStringArrayAlphabetically(n).join(t)}return e},e.setUrlParameter=function(e,t,n){var r=window.location.href.split("?"),o=i(r[1]);void 0!==t?o[e]=t:delete o[e];var s={};try{s=history.state}catch(e){}history.replaceState(s,"",r[0]+a(o,n))},e.encodeUrl=function(e,t){var n=e.split("?"),r=(e=n[0],i(n[1]));return l(r),e+a(r,t)},e.fixedEncodeURIComponent=o,e.fixedDecodeURIComponent=c,e.encodeDict=l,e._canEncode=u,e.decodeUrl=function(e,t){var n=e.split("?"),r=(e=n[0],i(n[1]));return d(r),e+a(r,t)},e.decodeDict=d,e.getKeyByPattern=function(e,t){var n,i=[];for(n in e)e.hasOwnProperty(n)&&t.test(n)&&i.push(n);return i},e.mergeProperties=function(e,t){var n={};for(var i in t){var r=t[i];void 0!==r&&""!==r&&(n[i]=t[i])}for(var a in e)void 0===n[a]&&(n[a]=e[a]);return n},e.getCurrentEndPathString=function(e){e||(e=window.location.href),-1<e.indexOf("http://")?e=e.replace("http://",""):-1<e.indexOf("https://")&&(e=e.replace("https://",""));var t=e.split("/");return 1===t.length?n(t[0]):t[t.length-1]},e.fireCustomEvent=function(e,t,n,i){var r=document.createEvent("Event");r.initEvent(e,t,n),i=i||document;try{i.dispatchEvent(r)}catch(e){s.common.Logger.error(e)}},e.replaceAt=function(e,t,n){var i=n.length;return 0===n.length&&(i=1),e.substr(0,t)+n+e.substr(t+i)},e.removeAt=function(e,t,n){if(!(t+n>e.length))return e.substr(0,t)+e.substr(t+n)},e.randomString=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},e.isFFParameter=function(e){return e&&(e.match(/^filter.+/g)||e.match(/^sort.+/g)||"channel"===e||"query"===e||"sid"===e||"productsPerPage"===e||"page"===e||"searchField"===e||"noArticleNumberSearch"===e||"useAsn"===e||"useFoundWords"===e||"useCampaigns"===e||"navigation"===e||"idsOnly"===e||"useKeywords"===e||"generateAdvisorTree="===e||"disableCache"===e||"followSearch"===e||"usePersonalization"===e||"useSemanticEnhancer"===e||"useAso"===e||"omitContextName"===e||"log"===e)},e.localStorage={store:{},setItem:function(e,t){this.isSupported()?void 0!==t?window.localStorage.setItem(e,t):window.localStorage.removeItem(e):void 0!==t?this.store[e]=t:delete this.store[e],"ff-basket"===e&&s.common.fireCustomEvent("ff-basket-changed",!0,!1,document)},getItem:function(e){return this.isSupported()?window.localStorage.getItem(e):this.store[e]},isSupported:function(){var e=window.localStorage;try{return e.setItem("test","1"),e.removeItem("test"),!0}catch(e){return!1}}},e.removeChildNodes=function(e){if(e)for(;e.firstChild;)e.removeChild(e.firstChild)},e.isOk=function(e){return null!=e&&""!==e}}((s=y||(y={})).common||(s.common={})),((c=y||(y={})).libs||(c.libs={})).mustache=Mustache,function(e){var t=String.prototype;function n(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 ",n=0;n<30;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}var i=n(),r=n(),a=n();t[a]=function(){return"abcdefghijklmnopqrstuvwxyz"};var o=function e(){I()(this,e),this.url="",this.type="",this.success="",this.fail="",this.always="",this.version="",this.sid="",this.query="",this.channel="",this.page="",this.productsPerPage="",this.sort="",this.filter="",this.searchField="",this.articleNumberSearch="",this.useASN="",this.useFoundWords="",this.useCampaigns="",this.navigation="",this.idsOnly="",this.useKeywords="",this.generateAdvisorTree="",this.disableCache=""},s=function(e){function t(){var e,n;I()(this,t);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(n=T()(this,(e=A()(t)).call.apply(e,[this].concat(r)))).groupName="",n.filterName="",n.selectedMaxValue="",n.selectedMinValue="",n}return x()(t,e),t}(e.FFEvent=o);e.FilterEvent=s;var c=function(e){function t(){var e,n;I()(this,t);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(n=T()(this,(e=A()(t)).call.apply(e,[this].concat(r)))).value="",n}return x()(t,e),t}(o);e.BreadCrumbEvent=c;var u=function(e){function t(){return I()(this,t),T()(this,A()(t).apply(this,arguments))}return x()(t,e),t}(o);e.ProductsPerPageEvent=u;var d=function(e){function t(){return I()(this,t),T()(this,A()(t).apply(this,arguments))}return x()(t,e),t}(o);e.PagingEvent=d;var h=function(e){function t(){return I()(this,t),T()(this,A()(t).apply(this,arguments))}return x()(t,e),t}(o);e.ProductCampaignEvent=h;var p=function(e){function t(){return I()(this,t),T()(this,A()(t).apply(this,arguments))}return x()(t,e),t}(o);e.SuggestEvent=p;var m=function(e){function t(){return I()(this,t),T()(this,A()(t).apply(this,arguments))}return x()(t,e),t}(o);e.ProductDetailEvent=m;var f=function(e){function t(){var e;return I()(this,t),(e=T()(this,A()(t).call(this))).query="*",e}return x()(t,e),t}(o);e.GlobalSearchParameter=f;var g=function e(){I()(this,e),this.serachUrl="",this.suggestUrl="",this.recommendationUrl="",this.tagCloudUrl="",this.trackingUrl="",this.campaignUrl="",this.compareUrl="",this.similarRecordsUrl="",this.getRecordsUrl=""};e.CustomUrls=g;var v=new f,y=new g;e.globalSearchParameter=v,e.globalCustomUrls=y;var _=function e(){I()(this,e)};_.query="query",_.channel="channel",_.page="page",_.productsPerPage="productsPerPage",_.sort="sort",_.filter="filter",_.searchField="searchField",_.articleNumberSearch="noArticleNumberSearch",_.useASN="useAsn",_.useFoundWords="useFoundWords",_.useCampaigns="useCampaigns",_.navigation="navigation",_.idsOnly="idsOnly",_.useKeywords="useKeywords",_.generateAdvisorTree="generateAdvisorTree",_.disableCache="disableCache",_.sid="sid";var b,C=function e(){I()(this,e)};C.query="query",C.channel="channel",C.page="page",C.productsPerPage="productsPerPage",C.sort="sort",C.filter="filter",C.searchField="searchField",C.articleNumberSearch="noArticleNumberSearch",C.useASN="useAsn",C.useFoundWords="useFoundWords",C.useCampaigns="useCampaigns",C.navigation="navigation",C.idsOnly="idsOnly",C.useKeywords="useKeywords",C.generateAdvisorTree="generateAdvisorTree",C.disableCache="disableCache",C.sid="sid",function(e){e.RequestBuilderOptions=function e(){I()(this,e),this.removeFFPrefix=!0};var t=new l.communication.BreadCrumbEvent,n=new l.communication.FilterEvent,i=function(){function e(){I()(this,e),this.connParamNames=["url","sid"]}return P()(e,[{key:"buildUrlByParamObject",value:function(e,t,n){return 6.9==n?this._internalBuildUrl(e,t,_):6.11==n?this._internalBuildUrl(e,t,C):this._internalBuildUrl(e,t,_)}},{key:"buildUrlByString",value:function(e,t,n,i){return this._internalBuildUrlString(e,t,i)}},{key:"buildSearchRequestUrl",value:function(e){return e=l.common.mergeProperties(l.communication.globalSearchParameter,e),this._setCustomUrl(e,l.communication.globalCustomUrls.serachUrl),this._appendAction(e,"Search.ff"),this.buildUrlByParamObject(e,e.url,e.version)}},{key:"buildProductCampaignUrl",value:function(e){return e=l.common.mergeProperties(this._getConnParams(l.communication.globalSearchParameter),e),this._setCustomUrl(e,l.communication.globalCustomUrls.campaignUrl),this._appendAction(e,"ProductCampaign.ff"),e.do="getProductCampaigns",this.buildUrlByParamObject(e,e.url,e.version)}},{key:"buildShoppingCartCampaignUrl",value:function(e){return e=l.common.mergeProperties(this._getConnParams(l.communication.globalSearchParameter),e),this._setCustomUrl(e,l.communication.globalCustomUrls.campaignUrl),this._appendAction(e,"ProductCampaign.ff"),e.do="getShoppingCartCampaigns",this.buildUrlByParamObject(e,e.url,e.version)}},{key:"buildPageCampaignUrl",value:function(e){return e=l.common.mergeProperties(this._getConnParams(l.communication.globalSearchParameter),e),this._setCustomUrl(e,l.communication.globalCustomUrls.campaignUrl),this._appendAction(e,"ProductCampaign.ff"),e.do="getPageCampaigns",this.buildUrlByParamObject(e,e.url,e.version)}},{key:"buildTagCloudUrl",value:function(e){return e=l.common.mergeProperties(this._getConnParams(l.communication.globalSearchParameter),e),this._setCustomUrl(e,l.communication.globalCustomUrls.tagCloudUrl),this._appendAction(e,"TagCloud.ff"),e.do="getTagCloud",this.buildUrlByParamObject(e,e.url,e.version)}},{key:"buildFilterUrl",value:function(e,t){return this._buildUrlByFFParamString(t,e)}},{key:"buildBreadCrumbUrl",value:function(e,t){return this._buildUrlByFFParamString(t,e)}},{key:"buildProductsPerPageUrl",value:function(e,t){return this._buildUrlByFFParamString(t,e)}},{key:"buildPagingUrl",value:function(e,t){return this._buildUrlByFFParamString(t,e)}},{key:"buildRecommendationUrl",value:function(e){return(e=l.common.mergeProperties(this._getConnParams(l.communication.globalSearchParameter),e)).do="getRecommendation",this._setCustomUrl(e,l.communication.globalCustomUrls.recommendationUrl),this._appendAction(e,"Recommender.ff"),this.buildUrlByParamObject(e,e.url,e.version)}},{key:"buildSortUrl",value:function(e,t){return this._buildUrlByFFParamString(t,e)}},{key:"buildSimilarProductsUrl",value:function(e){return e.maxRecordCount=e.maxResults,delete e.maxResults,e=l.common.mergeProperties(l.communication.globalSearchParameter,e),this._setCustomUrl(e,l.communication.globalCustomUrls.similarRecordsUrl),this._appendAction(e,"SimilarRecords.ff"),this.buildUrlByParamObject(e,e.url,e.version)}},{key:"buildSuggestUrl",value:function(e){return e=l.common.mergeProperties(l.communication.globalSearchParameter,e),this._setCustomUrl(e,l.communication.globalCustomUrls.suggestUrl),this._appendAction(e,"Suggest.ff"),this.buildUrlByParamObject(e,e.url,e.version)}},{key:"buildProductDetailUrl",value:function(e){return e.id||l.common.Logger.debug("No id specified for Product Detail request"),e.query=e.id,delete e.id,e.useAsn="false",e.useCampaigns="false",e.isArticleNumber="true",e=l.common.mergeProperties(l.communication.globalSearchParameter,e),this._setCustomUrl(e,l.communication.globalCustomUrls.serachUrl),this._appendAction(e,"Search.ff"),this.buildUrlByParamObject(e,e.url,e.version)}},{key:"buildInitialNavigationRequestUrl",value:function(e){return e=l.common.mergeProperties(l.communication.globalSearchParameter,e),this._setCustomUrl(e,l.communication.globalCustomUrls.serachUrl),this._appendAction(e,"Search.ff"),this.buildUrlByParamObject(e,e.url,e.version)}},{key:"buildNavigationRequestUrl",value:function(e,t){return e=l.common.mergeProperties(l.communication.globalSearchParameter,e),this._setCustomUrl(e,l.communication.globalCustomUrls.serachUrl),this._appendAction(e,"Search.ff"),this.buildUrlByParamObject(e,e.url,e.version)}},{key:"buildCompareUrl",value:function(e){for(var t=(e=l.common.mergeProperties(this._getConnParams(l.communication.globalSearchParameter),e)).ids,n="&ids=",i=0;i<t.length;i++)0!=i&&(n+=";"),n+=t[i];return delete e.ids,this._setCustomUrl(e,l.communication.globalCustomUrls.compareUrl),this._appendAction(e,"Compare.ff"),this.buildUrlByParamObject(e,e.url,e.version)+n}},{key:"buildTrackingUrl",value:function(e){return 6.9==(e.version?e.version:e.version=l.communication.globalSearchParameter.version)?this._internalBuildTrackingUrl(e,_):this._internalBuildTrackingUrl(e,C)}},{key:"buildGetRecordsUrl",value:function(e){return e=l.common.mergeProperties(this._getConnParams(l.communication.globalSearchParameter),e),this._setCustomUrl(e,l.communication.globalCustomUrls.getRecordsUrl),this._appendAction(e,"rest/v1/records/"+e.channel),delete e.channel,this.buildUrlByParamObject(e,e.url,e.version)}},{key:"_setCustomUrl",value:function(e,t){null!=t&&""!=t&&(e.url=t)}},{key:"_appendAction",value:function(e,t){"/"===e.url[e.url.length-1]?e.url=e.url+t:e.url=e.url+"/"+t}},{key:"_buildUrlByFFParamString",value:function(e,t){var n=l.common.getParameterString(e),i=l.common.parameterStringToDict(n);return t=l.common.mergeProperties(i,t),t=l.common.mergeProperties(l.communication.globalSearchParameter,t),this._setCustomUrl(t,l.communication.globalCustomUrls.serachUrl),this._appendAction(t,"Search.ff"),this.buildUrlByParamObject(t,t.url,t.version)}},{key:"_internalBuildUrl",value:function(e,i,r){var a="?"===i[i.length-1]?i:i+"?";if(e){var o=JSON.parse(JSON.stringify(e));delete o.ff_no_redirect;var s=o,c=!0===l.communication.globalCommunicationParameter.useSeo&&-1!==i.indexOf("Search.ff"),u="true"===String(s.navigation);for(var d in(c||u)&&delete s.query,r)s[d]&&(l.common.isArray(s[d])?a=this._handleArrayParam(d,s[d],a):"function"!=typeof s[d]&&"object"!==M()(s[d])&&(a+=r[d]+"="+s[d]+"&"));if(!0===l.communication.globalCommunicationParameter.appendUnknownParameter)for(var d in s)d in t||d in n||(l.common.isArray(s[d])?a=this._handleArrayParam(d,s[d],a):"function"!=typeof s[d]&&"object"!==M()(s[d])&&(a+=d+"="+s[d]+"&"));a=a.substring(0,a.length-1)}return a}},{key:"_handleArrayParam",value:function(e,t,n){for(var i=0;i<t.length;i++){var r=t[i];"function"!=typeof r&&"object"!==M()(r)&&(n+=e+"="+r+"&")}return n}},{key:"_internalBuildTrackingUrl",value:function(e,t){var n=l.communication.globalSearchParameter;return e=l.common.mergeProperties(this._getConnParams(n),e),this._setCustomUrl(e,l.communication.globalCustomUrls.trackingUrl),this._appendAction(e,"Tracking.ff"),this._internalBuildUrl(e,e.url,t)}},{key:"_internalBuildUrlString",value:function(e,t,n){return n&&n.removeFFPrefix&&(e="/"+(e="/"!==e[0]?"/"+e:e).replace(/(\/.*?\/)/,"")),("/"===t[t.length-1]?t=t.substring(0,t.length-1):t)+e}},{key:"_getConnParams",value:function(e){var t={};if(e)for(var n=0;n<this.connParamNames.length;n++){var i=this.connParamNames[n];e[i]&&(t[i]=e[i])}return t}}]),e}();e.FFRequestUrlBuilder=i}(b||(b={}));var k=n(),w=n(),E=n(),O=n(),L=n(),R={U2VhcmNoLmZm:!0,"VHJhY2tpbmcuZmY=":!0,cmVzdC92MS9yZWNvcmRz:!0,"cmVzdC92MS9zZWFyY2g=":!0,"cmVzdC92MS90cmFja2luZw==":!0};e.sp=R,function(e){function t(e){var t=decodeURIComponent(e);if(-1==t.lastIndexOf("/q"))return null;var n=t.split("/");return n[n.length-2]}function n(e,t,n,r){if(t&&("ppp"!==t.type&&"sort"!==t.type&&"paging"!==t.type||(delete e.useAsn,delete e.useCampaigns),"search"===t.type&&delete e.__immediate),n){for(var a in e)e.hasOwnProperty(a)&&l.common.isFFParameter(a)&&(i(a,r)?"query"===a&&("*"===e[a][0]?delete e[a]:e[a][0]==l.common.fixedEncodeURIComponent("*")&&delete e[a]):delete e[a]);delete e.format}var o=l.common.dictToParameterString(e,l.communication.globalCommunicationParameter.sortUrlParametersAlphabetically);o=(o=o.substring(1)).replace(/&format=json/gi,"");var s=window.location.href.split("?")[0];return""!==o&&(s+="?"+o),s}function i(e,t){var n=!1;return t&&t.forEach(function(t){-1<e.indexOf(t)&&(n=!0)}),n}function r(e){var t,n=l.communication.globalCommunicationParameter;if(!1===n.useUrlParameter&&!0===n.useBrowserHistory){var i=l.common.parameterStringToDict(l.common.getParameterString(e.searchResult.searchParams)),r="/";void 0!==i.seoPath&&(r=decodeURIComponent(i.seoPath)),delete i.seoPath,delete i.query,delete i.format;var a=l.common.dictToParameterString(i,l.communication.globalCommunicationParameter.sortUrlParametersAlphabetically);t=window.location.origin+n.seoPrefix+r+a}else t=window.location.href.split("?")[0];try{history.pushState(e,"",t)}catch(n){l.common.Logger.log("Result is too big for history - falling back to FF-Request instead of cached result");try{var o=new l.common.HistoryEntry(e.searchParams||e.searchResult?e.searchResult.searchParams:"");history.pushState(o,"",t)}catch(n){console.log("could not ",n)}}}function a(e,t){var n=window.location.origin;l.communication.globalCommunicationParameter.filterUrlPrefix&&(n+="/"+l.communication.globalCommunicationParameter.filterUrlPrefix),n+=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&0==n.indexOf("filterCategoryROOT")&&(t+=l.common.fixedDecodeURIComponent(e[n][0])+"/",delete e[n]);return"/"+t}(t),n+=l.common.dictToParameterString(t,l.communication.globalCommunicationParameter.sortUrlParametersAlphabetically);try{history.pushState(e,"",n)}catch(t){l.common.Logger.log("Result is too big for history - falling back to FF-Request instead of cached result");try{var i=new l.common.HistoryEntry(e.searchParams||e.searchResult?e.searchResult.searchParams:"");history.pushState(i,"",n)}catch(t){console.log("could not ",t)}}}e.getSearchParamString=function(){var e=l.communication.FFCommunicationEventAggregator.currentSearchResult;if(e)return l.common.getParameterString(e.searchParams)},e.handleSeoSearch=function(e){if(e.seoPath)e.seoPath=decodeURIComponent(e.seoPath);else{var n,i=e.query;if(l.communication.globalCommunicationParameter.keepFilters){var r=t(n=e.seoPath?decodeURIComponent(e.seoPath):decodeURIComponent(window.location.pathname).replace(l.communication.globalCommunicationParameter.seoPrefix+"",""));i&&"*"!==i&&0!=i.length?n=r?n.replace("/"+r+"/q","/"+i+"/q"):n+"/"+i+"/q":r&&(n=n.replace("/"+r+"/q","")),e.seoPath=encodeURIComponent(n)}else e["ff-seo-initial"]?(delete e["ff-seo-initial"],e.seoPath||(e.seoPath=encodeURIComponent("/"))):i&&"*"!==i&&0!=i.length?e.seoPath=encodeURIComponent("/"+decodeURIComponent(i)+"/q"):e.seoPath=encodeURIComponent("/")}},e.replaceHistoryState=function(e,t,n){if(n&&!n.topics)try{history.replaceState(e,"",t)}catch(n){try{var i=e.searchParams||(e.searchResult?e.searchResult.searchParams:""),r=new l.common.HistoryEntry(i);history.replaceState(r,"",t)}catch(n){console.log("could not ",n)}}},e.pushParameterToHistory=function(e,t,i){if(void 0===t)t="";else if(-1<t.indexOf("Suggest.ff")||-1<t.indexOf("Tracking.ff"))return;var o=l.communication.globalCommunicationParameter;if(!1!==o.useUrlParameter||!1!==o.useBrowserHistory){var s=l.common.parameterStringToDict(l.common.getParameterString(t));if(o.useSeo&&-1!=t.indexOf("Search.ff"))r(e);else if(1==o.useFilterURL&&-1!=["search","filter","bct"].lastIndexOf(i.type))a(e,s);else{var c;o.onlySearchParams?c=n(s,i,!0,o.parameterWhitelist.split(",")):(c=window.location.href.split("?")[0],!0===o.useBrowserHistory&&(c=n(s,i,!l.communication.globalCommunicationParameter.useUrlParameter)));try{!1===l.communication.globalCommunicationParameter.useUrlParameter&&!1===o.onlySearchParams&&(c=document.location.href),i.__immediate?history.replaceState(e,"",c):history.pushState(e,"",c)}catch(t){l.common.Logger.log("Result is too big for history - falling back to FF-Request instead of cached result");try{new l.common.HistoryEntry(e.searchParams||e.searchResult?e.searchResult.searchParams:""),i.__immediate?history.replaceState(e,"",c):history.pushState(e,"",c)}catch(t){console.log("could not ",t)}}}}},e.getBrowserURL=n,e.pushSeoToHistory=r,e.pushFilterUrlToHistory=a,e.changeRecordPropertyName=function(e,t){if(e)for(var n=0;n<e.length;n++){var i=e[n].record;for(var r in t){var a=t[r];a!==r&&i[r]&&(i[a]=i[r],delete i[r])}}},e.getQueryFromSearchParams=function(){try{var e=l.communication.FFCommunicationEventAggregator.currentSearchResult.searchParams,n=l.common.parameterStringToDict(e.split("?")[1]),i="";if(n.query&&(i=l.common.fixedDecodeURIComponent(n.query[0])),!0!==l.communication.globalCommunicationParameter.useSeo)return i;var r=n.seoPath,a=l.common.fixedDecodeURIComponent(t(r));return a||i||l.common.Logger.debug("whether seoPath param is set nor query param. Maybe FACT-Finder SEO is not active "),a||i}catch(e){return""}},e.addRenameRecordFields=function(e){return{productCampaign:l.communication.ResultDispatcher.addCallback("productCampaign",function(t){if(t)for(var n=0;n<t.length;n++){var i=t[n];if(i.pushedProductsRecords){var r=i.pushedProductsRecords;this.changeRecordPropertyName(r,e)}}},this),result:l.communication.ResultDispatcher.addCallback("result",function(t){var n=t.records;try{this.changeRecordPropertyName(n,e)}catch(t){console.log(t)}try{if(t.campaigns)for(var i in t.campaigns){var r=t.campaigns[i];r.pushedProductsRecords&&this.changeRecordPropertyName(r.pushedProductsRecords,e)}}catch(t){console.log(t)}if(t.singleWordResults)for(var a=t.singleWordResults,o=0;o<a.length;o++){var s=a[o];if(s.previewRecords)try{this.changeRecordPropertyName(s.previewRecords,e)}catch(t){console.log(t)}}},this),recommendation:l.communication.ResultDispatcher.addCallback("recommendation",function(t){this.changeRecordPropertyName(t,e)},this),similarProducts:l.communication.ResultDispatcher.addCallback("similarProducts",function(t){this.changeRecordPropertyName(t.records,e)},this)}},e.removeRenameRecordFields=function(e){for(var t in e)!0!==l.communication.ResultDispatcher.unsubscribe(t,e[t])&&l.common.Logger.debug("Could not remove renameRecordField callback for topic ["+t+"] with key")},e.trackingHelper={getTrackingProductId:function(e){var t=l.communication;return t.fieldRoles&&t.fieldRoles.trackingProductNumber?e.record[t.fieldRoles.trackingProductNumber]:e.id},getPrice:function(e){var t=l.communication.fieldRoles;return t&&t.price?e.record.__ORIG_PRICE__||e.record[t.price]:""},getTitle:function(e){var t=l.communication.fieldRoles;return t&&t.productName?e.record[t.productName]:""},getMasterArticleNumber:function(e){var t=l.communication.fieldRoles;return t&&t.masterArticleNumber?e.record[t.masterArticleNumber]:""},getUserId:function(){var e=l.communication.globalCommunicationParameter;return e.userId?e.userId:void 0},getCampaignProductNumber:function(e){var t=l.communication;return t.fieldRoles&&t.fieldRoles.campaignProductNumber?e.record[t.fieldRoles.campaignProductNumber]:e.id}}}(e.Util||(e.Util={}));var F=function e(){I()(this,e),this.ajax=!0,this.useUrlParameter=!0,this.useBrowserHistory=!0,this.useCache=!1,this.appendUnknownParameter=!0,this.isSessionIdDisabled=!1,this.keepFilters=!1,this.useAsn=!0,this.useFoundWords=!1,this.useCampaigns=!0,this.generateAdvisorTree=!1,this.disableCache=!1,this.usePersonalization=!0,this.useSemanticEnhancer=!0,this.useAso=!0,this.useSeo=!1,this.seoPrefix="",this.sid="",this.currencyCountryCode="",this.currencyCode="",this.currencyFields="price",this.currencyMinDigits="2",this.currencyMaxDigits="2",this.singleHitRedirect=!1,this.useFilterURL=!1,this.filterUrlPrefix="",this.onlySearchParams=!1,this.asyncFacets=!1,this.parameterWhitelist="query,filter",this.sortUrlParametersAlphabetically=!1};e.GlobalCommunicationParameter=F,e.globalCommunicationParameter=new F;var D=n(),N=(r=n(),n()),U=n(),j=n();t[j]=function(){var e,t,n=0;if(0===this.length)return n;for(e=0,t=this.length;e<t;e++)n=(n<<5)-n+this.charCodeAt(e),n|=0;return n},t[D]=function(){var e="";""[w]();for(var t=e.concat(this[k](),this[a](),""[w]()),n=0;n<t.length;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e};var H=new(e.GlobalElementValues=function e(){I()(this,e),this.currentFFSearchBoxValue=""});e.globalElementValues=H,t[E]=function(){return Math.random()},t[O]=function(){return(new Date).getTime()},t[L]=function(){return this[j]()},t[w]=function(){return"0123456789"},function(e){var t=l.common.Logger,n={},i={},r={result:f,records:g,asn:k,sort:y,paging:b,suggest:L,bct:v,ppp:_,pagingItems:C,productDetail:w,singleWordSearch:S,query:M,campaign:P,productCampaign:T,shoppingCartCampaign:O,pageCampaigns:E,navigation:D,tagCloud:F,similarProducts:R},a=!0,o=[];function s(e,t,n){try{var r=i[e];if(r)for(var a=0;a<r.length;a++){var o=r[a];try{o.fn.call(o.ctx,t,n)}catch(e){l.common.Logger.error("could not invoke callback function  "+o+" :"+e)}}}catch(e){}}function c(e,t,n){a?o.push({topic:e,data:t,event:n}):d(e,t,n)}function u(e){a=e}function d(e,i,r){try{var a=n[e];if(a){a=a.slice();for(var o=0;o<a.length;o++)try{var s=a[o];s.fn.call(s.ctx,i,r)}catch(i){t.error("could not invoke subscriber function ["+a[o].name+"] for topic ["+e+"]. error: "+i)}}}catch(i){t.error("Could not dispatch topic {",e,"}: ",i)}}function h(e,n,i){try{s(n,e,i)}catch(e){}try{t.debug("dispatching topic: "+n),c(n,e,i)}catch(e){}}function p(e,t){m(e,t)}function m(e,i){var r,a,o,s,c;(r=e.campaigns,a=n,o=(r||[]).filter(function(e){return"redirect"===e.flavour.toLowerCase()})[0],s=(a["campaign:redirect"]||[])[0],c=!!o&&!!s,Object.freeze({then:function(e){try{c&&e(s.fn.call(s.ctx,o))}catch(e){t.error("could not invoke subscriber for redirect campaign. error: ".concat(e),s)}return this},otherwise:function(e){return c||e(),this}})).then(N).otherwise(function(){f(e,i),P(e,i),g(e,i),v(e,i),y(e,i),_(e,i),b(e,i),C(e,i),k(e,i),S(e,i),M(e,i)})}function f(e,n){s("result",e,n),t.debug("dispatching result"),c("result",e,n)}function g(e,n){s("records",e.records,n),t.debug("dispatching records"),c("records",e.records,n)}function v(e,n){s("bct",e.breadCrumbTrailItems,n),t.debug("dispatching bread crumb trail"),c("bct",e.breadCrumbTrailItems,n)}function y(e,n){s("sort",e.sortsList,n),t.debug("dispatching sort items"),c("sort",e.sortsList,n)}function _(e,n){s("ppp",e.resultsPerPageList,n),t.debug("dispatching results per page items"),c("ppp",e.resultsPerPageList,n)}function b(e,n){s("paging",e.paging,n),t.debug("dispatching paging"),c("paging",e.paging,n)}function C(e,n){var i=e&&e.paging?e.paging:void 0;s("pagingItems",i,n),t.debug("dispatching paging items"),c("pagingItems",i,n)}function k(e,n){s("asn",e.groups,n),t.debug("dispatching asn"),c("asn",e.groups,n)}function S(e,n){s("singleWordSearch",e.singleWordResults,n),t.debug("dispatching singleWordSearch"),c("singleWordSearch",e.singleWordResults,n)}function w(e,n){var i;e&&e.records instanceof Array&&(i=e.records[0]),s("productDetail",i,n),t.debug("dispatching productDetail"),c("productDetail",i,n)}function P(e,n){s("campaign",e.campaigns,n),t.debug("dispatching campaigns"),A(e.campaigns,"campaign",n)}function E(e,n){s("pageCampaigns",e,n),t.debug("dispatching page campaigns"),A(e,"campaign",n)}function T(e,n){s("productCampaign",e,n),t.debug("dispatching productCampaign"),A(e,"productCampaign",n)}function O(e,n){s("shoppingCartCampaign",e,n),t.debug("dispatching shoppingCartCampaign"),A(e,"shoppingCartCampaign",n)}function A(e,t,i){try{var r=[];r.push(t);for(var a=0;a<e.length;a++){var o=e[a];o.pushedProductsRecords&&0<o.pushedProductsRecords.length&&(r.push(t+":pushedProducts"),r.push(t+":pushedProducts:"+o.name)),r.push(t+":"+o.name),r.push(t+":"+o.flavour.toLowerCase()),r.push(t+":"+o.flavour.toLowerCase()+":"+o.name),o.feedbackTexts&&(r.push(t+":feedbacktext"),o.feedbackTexts.forEach(function(e){r.push(t+":feedbacktext:"+o.name),r.push(t+":feedbacktext:"+e.label)}))}var s=l.common.getKeyByPattern(n,new RegExp(t)).filter(function(e){return-1==r.indexOf(e)});for(a=0;a<s.length;a++)c(s[a],void 0,i);for(a=0;a<e.length;a++){var u=e[a];try{u.pushedProductsRecords&&0<u.pushedProductsRecords.length&&(c(t+":pushedProducts",u.pushedProductsRecords,i),c(t+":pushedProducts:"+u.name,u.pushedProductsRecords,i))}catch(e){}c(t,u,i),c(t+":"+u.name,u,i),c(t+":"+u.flavour.toLowerCase(),u,i),c(t+":"+u.flavour.toLowerCase()+":"+u.name,u,i);var d=u.feedbackTexts;if(d)for(var h=0;h<d.length;h++){var p=d[h];c(t+":feedbacktext",p,i),c(t+":feedbacktext:"+u.name,p,i),c(t+":feedbacktext:"+p.label,p,i)}}}catch(e){}}function L(e,n){s("suggest",e,n),t.debug("dispatching suggest"),c("suggest",e,n)}function x(e,n){s("recommendation",e,n),t.debug("dispatching recommendations"),c("recommendation",e,n),c(n.type,e,n)}function R(e,n){s("similarProducts",e,n),t.debug("dispatching similarProducts"),c("similarProducts",e,n)}function I(e,n){s("compare",e,n),t.debug("dispatching compare"),c("compare",e,n),c(n.type,e,n)}function F(e,n){s("tagCloud",e,n),t.debug("dispatching tag cloud items"),c("tagCloud",e,n)}function M(e,n){if(e&&e.searchParams)try{var i=e.searchParams.split("?")[1],r=l.common.parameterStringToDict(i).query;if(r){try{s("query",r,n)}catch(e){}try{t.debug("dispatching query"),c("query",r,n)}catch(e){}}}catch(e){t.debug("result.searchParams from query has no params")}}function D(e,t){s("navigation",e,t);try{var n=e.searchResult.groups[0].elements,i=l.communication.FFCommunicationEventAggregator;n.forEach(function(e){var t,n,r;e.__TARGET_URL__=(t=e,n=l.common.parameterStringToDict(t.searchParams.split("?")[1]),r={url:l.communication.Util.getBrowserURL(n,void 0,!1),isCustomized:!1},Object.freeze({setUrl:function(e){if("string"!=typeof e)throw new Error("customUrl must be a string.");r.url=e,r.isCustomized=!0},get url(){return r.url},get isCustomized(){return r.isCustomized}})),e.__SUB_ELEMENTS__=[];var a="".concat(e.associatedFieldName,"/").concat(e.name);i.navigationResult[a]={element:e,subelements:e.__SUB_ELEMENTS__},i.navigationLayer[e.clusterLevel]||(i.navigationLayer[e.clusterLevel]=[]),i.navigationLayer[e.clusterLevel].push(e);var o=i.navigationResult[e.associatedFieldName];o&&o.subelements.push(e)}),setTimeout(function(){var e;c("navigation",(e=i.navigationLayer,Object.keys(e).sort(function(e,t){return e-t}).map(function(t){return e[t]})),t)},0)}catch(e){console.warn("dispatchNavigation",e)}}function N(e){l.common.Logger.debug("redirecting to: ".concat(e.target.destination)),document.location.replace(e.target.destination)}e.invokeCallbacks=s,e.addCallback=function(e,t,n){if(i[e]||(i[e]=[]),i[e]){var r=l.common.randomString(20);return i[e].push({fn:t,ctx:n,key:r}),r}l.common.Logger.error("Cant add callback for topic ["+e+"]. Topic does not exist.")},e.removeCallback=function(e,t){i[e]||(i[e]=[]);var n=i[e];if(n){for(var r=0;r<n.length;r++)if(n[r].key===t)return n.splice(r,1),!0}else l.common.Logger.error("Cant add callback for topic ["+e+"]. Topic does not exist.")},e.subscribe=function(e,i,r){try{if(n[e]||(n[e]=[]),n[e]){var a=l.common.randomString(20);return n[e].push({fn:i,ctx:r,key:a}),a}}catch(e){return t.error("unexpected error. could not subscribe: "+e),null}},e.unsubscribe=function(e,i){try{var r=n[e];for(var a in r)if(r[a].key===i)return r.splice(a,1),!0}catch(e){return t.error("unexpected error. could not unsubscribe: "+e),!1}},e.startDispatching=function(){u(!1),o.forEach(function(e){d(e.topic,e.data,e.event)}),o=[]},e.setShouldDeferDispatches=u,e.dispatch=function(e,n,i){e?i?(i instanceof Array?t.debug("dispatch topics: "+i):i=[i],i.forEach(function(t){"recommendation"==t?x(e.resultRecords?e.resultRecords:e,n):"compare"==t?I(e,n):"suggest"==t?L(e.suggestions?e.suggestions:e,n):r[t]?r[t](e.searchResult||e,n):h(e,t,n)})):p(e.searchResult||e,n):t.error("No response to dispatch for topics: "+i)},e.dispatchResultByTopic=h,e.dispatchSearchResult=p,e.dispatchResult=m,e.dispatchResultInternal=f,e.dispatchRecords=g,e.dispatchBreadcrumbTrail=v,e.dispatchSorting=y,e.dispatchProductsPerPage=_,e.dispatchPaging=b,e.dispatchPagingItems=C,e.dispatchAsn=k,e.dispatchSingleWordSearch=S,e.dispatchProductDetail=w,e.dispatchCampaigns=P,e.dispatchPageCampaigns=E,e.dispatchProductCampaigns=T,e.dispatchShoppingCartCampaign=O,e._doCampaingDispatch=A,e.dispatchSuggest=L,e.dispatchRecommendations=x,e.dispatchSimilarProducts=R,e.dispatchCompare=I,e.dispatchTagCloud=F,e.dispatchQuery=M,e.dispatchNavigationFrame=D}(e.ResultDispatcher||(e.ResultDispatcher={}));var B=window.btoa(window.location.origin),q=n();function V(e,t,n,i,r){var a=r.split("?")[0],o=a.split("/");if(-1!==a.indexOf("rest")&&4<=o.length){var s=o.slice(o.length-4,o.length-1).join("/");return btoa(s)in R?""+i._r.setRequestHeader(e,t):""}return btoa(o[o.length-1])in R?""+i._r.setRequestHeader(e,t):""}l.common.localStorage.setItem(B,q),t[k]=function(){return"ABCDEFGHIJKLMNOPQRSTUVWXYZ"};var z=function(e){function t(e,n,a){var o;I()(this,t),(o=T()(this,A()(t).call(this,e,!1)))._isPushParameterToHistory=!1;var s=S()(S()(o));if(!/format=json/i.test(e)){var c=l.common.urlStringToDict(e);c.format="json",e=e.split("?")[0]+l.common.dictToParameterString(c,l.communication.globalCommunicationParameter.sortUrlParametersAlphabetically)}o._i(e);var u=[];!function(e,t,n){for(var r=n[i](t).split("$"),a=0;a<3;a++){for(var o=10*a,s="",c=o;c<o+10;c++)s+=r[c];e.push(s)}}(u,l.communication.sessionManager,e);var d=e[E]();V(u[0],d,0,s,e);var h=e[D]();V(u[1],h,0,s,e);var p=e[O](),m=e[U](+d,p,e[L](),h);V(u[2],e[r](m),0,s,e),V(u[1],m[3],0,s,e),V("_ffo",l.common.localStorage.getItem(B).substring(0,0)+B,0,s,e);var f=p%99;return p=50<=f?(p+="").slice(2,p.length)+(p[0]+p[1]):(p+="").slice(p.length-2,p.length)+p.slice(0,p.length-2),f<10&&(f="0"+f),V("_fft",p+f,0,S()(S()(o)),e),o._isPushParameterToHistory=n,o._ffEvent=a,o}return x()(t,e),P()(t,[{key:"s",value:function(e){return this._sC=function(t,n,i){var r;try{if(-1<i.getResponseHeader("content-type").toLowerCase().indexOf("application/json")&&(r=JSON.parse(t)),!0===this._isPushParameterToHistory&&!this._ffEvent.topics){var a=!0;l.communication.FFCommunicationEventAggregator.beforeHistoryPushCallbacks.forEach(function(e){try{!1===e.fn(r,this._ffEvent,this._u)&&(a=!1)}catch(e){console.log("Could not execute beforeHistoryPushCallbacks: "+e)}}),!1!==a?l.communication.Util.pushParameterToHistory(r,this._u,this._ffEvent):l.common.Logger.debug("history push disabled by before")}}catch(t){return l.common.Logger.error("Could not parse response. Probably authentication failed: "+t),void this._iFC(n)}try{e(r)}catch(t){l.common.Logger.error(t)}return r},this}}]),t}(function(){function e(t){var n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];I()(this,e),!0===n&&this._i(t),this._u=t}return P()(e,[{key:"_i",value:function(e){var t,n,i;if(this._r=(t="GET",n=e,"withCredentials"in(i=new XMLHttpRequest)?(i.open(t,n,!0),i.setRequestHeader("Accept","application/json")):"undefined"!=typeof XDomainRequest?(i=new XDomainRequest).open(t,n,!0):i=null,i),!this._r)throw new Error("CORS is not supported")}},{key:"f",value:function(e){return this._fC=e,this}},{key:"s",value:function(e){return this._sC=e,this}},{key:"a",value:function(e){return this._aC=e,this}},{key:"_iSC",value:function(e){if(this._sC&&200===e.target.status){try{this._sC(this._r.responseText,e,this._r)}catch(e){l.common.Logger.error(e)}if(this._aC)try{this._aC(e)}catch(e){l.common.Logger.error(e)}}else this._iFC(e)}},{key:"_iFC",value:function(e){if(this._fC)try{this._fC(this._r.responseText,e)}catch(e){l.common.Logger.error(e)}if(this._aC)try{this._aC(this._r.responseText,e)}catch(e){l.common.Logger.error(e)}}},{key:"se",value:function(){void 0!==this._r&&null!==this._r||void 0===this._u||this._i(this._u),this._r.onload=this._iSC.bind(this),this._r.onerror=this._iFC.bind(this),this._r.send()}}]),e}());t[U]=function(e,t,n,i){for(var r=[[],[],[]],a=2;a<this.length;a++){var o=a;r[0][a-2]=e.toString().charAt(a),r[0][a-2]&&o--;var s=t.toString().length-2;if(r[1][a-2]=t.toString().charAt(s-a),r[1][a-2]&&o--,r[2][a-2]=n.toString().charAt(a),r[2][a-2]&&o--,1==o)break}return this[N](r)};var K=function(){function e(){I()(this,e),this.LOCALSTORAGE_SID_PARAM_NAME="ff_sid",this.REQUEST_SID_PARAM_NAME="sid",this.SESSION_ID_LENGTH=30}return P()(e,[{key:"checkSession",value:function(e){if(!0!==l.communication.globalCommunicationParameter.isSessionIdDisabled){var t=l.common.localStorage,n=l.communication.globalCommunicationParameter.sid,i=this.readSessionIdFromLocalstorage(),r=this.readSessionIdFromRequestParams();if(n)return void(i!==(e.sid=n)&&t.setItem(this.LOCALSTORAGE_SID_PARAM_NAME,n));i||(r?(l.common.isArray(r)&&(r=r[0]),t.setItem(this.LOCALSTORAGE_SID_PARAM_NAME,r)):this.readSessionIdFromLocalstorage(!0)),e.sid=this.readSessionIdFromLocalstorage()}}},{key:"readSessionIdFromLocalstorage",value:function(e){if(!0!==l.communication.globalCommunicationParameter.isSessionIdDisabled){var t=l.common.localStorage;return t.getItem(this.LOCALSTORAGE_SID_PARAM_NAME)||!0!==e||t.setItem(this.LOCALSTORAGE_SID_PARAM_NAME,l.common.randomString(this.SESSION_ID_LENGTH)),t.getItem(this.LOCALSTORAGE_SID_PARAM_NAME)}}},{key:"writeSessionIdToUrl",value:function(e){var t=l.communication.globalCommunicationParameter;if(!0!==t.isSessionIdDisabled&&!0===t.useUrlParameter){var n=this.readSessionIdFromRequestParams(!1);if(n&&void 0!==n[0]&&n[0]===e)return;if(e)l.common.localStorage.setItem(e),l.common.setUrlParameter(this.REQUEST_SID_PARAM_NAME,e,t.sortUrlParametersAlphabetically);else if(!n){var i=this.readSessionIdFromLocalstorage(!0);l.common.setUrlParameter(this.REQUEST_SID_PARAM_NAME,i,t.sortUrlParametersAlphabetically)}}}},{key:"readSessionIdFromRequestParams",value:function(e){var t=l.common.urlStringToDict()[this.REQUEST_SID_PARAM_NAME];return t||!0!==e||(t=this.readSessionIdFromLocalstorage(!0),this.writeSessionIdToUrl(t)),t}}]),e}(),W=new(e.SessionManager=K);e.sessionManager=W;var G=function(){function e(){I()(this,e),this.requestBuilder=new b.FFRequestUrlBuilder,this.sessionManager=l.communication.sessionManager,this.neededClickInfo=["id","sid","query","pos","origPos","page","origPageSize"],this.neededCartInfo=["id","sid","count"],this.neededCheckoutInfo=["id","sid","count"],this.neededRecoInfo=["id","sid","mainId"],this.neededLoginInfo=["userId","sid"],this.neededSearchFeedbackInfo=["id","sid","query","positive"]}return P()(e,[{key:"click",value:function(e){this.sessionManager.checkSession(e),!0===this.checkNeededParamsAvailable(this.neededClickInfo,e)&&(e.event="click",this._sendRequest(e))}},{key:"cart",value:function(e){this.sessionManager.checkSession(e),!0===this.checkNeededParamsAvailable(this.neededCartInfo,e)&&(e.event="cart",this._sendRequest(e))}},{key:"checkout",value:function(e){this.sessionManager.checkSession(e),!0===this.checkNeededParamsAvailable(this.neededCheckoutInfo,e)&&(e.event="checkout",this._sendRequest(e))}},{key:"login",value:function(e){this.sessionManager.checkSession(e),!0===this.checkNeededParamsAvailable(this.neededLoginInfo,e)&&(e.event="login",this._sendRequest(e))}},{key:"recommendationClick",value:function(e){this.sessionManager.checkSession(e),!0===this.checkNeededParamsAvailable(this.neededRecoInfo,e)&&(e.event="recommendationClick",this._sendRequest(e))}},{key:"searchFeedback",value:function(e){this.sessionManager.checkSession(e),!0===this.checkNeededParamsAvailable(this.neededSearchFeedbackInfo,e)&&(e.event="feedback",this._sendRequest(e))}},{key:"checkNeededParamsAvailable",value:function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(!t.hasOwnProperty(i))return!1}return!0}},{key:"_sendRequest",value:function(e){if(!e.channel){var t=l.common.getParameterString();if(t){var n=l.common.parameterStringToDict(t);n.channel&&(e.channel=n.channel)}e.channel||(e.channel=l.communication.globalSearchParameter.channel)}var i=l.communication.globalCommunicationParameter.addTrackingParams;if(i)try{for(var r=i.trim().split(","),a=0;a<r.length;a++){var o=r[a];try{var s=o.split("="),c=s[0].trim(),u=s[1].trim();e[c]=u}catch(e){}}}catch(e){}var d=this.requestBuilder.buildTrackingUrl(l.common.encodeDict(e));e.success||(e.success=function(){}),new z(d,!1).s(e.success).f(e.fail).a(e.always).se()}}]),e}(),Y=new(e.Tracking12=G);e.trackingManager=Y,t[r]=function(e){return e[0].concat(e[1]).concat(e[2])};var X=l.common.Logger,$=new b.FFRequestUrlBuilder;function J(e){var t=l.communication.globalCommunicationParameter;if(t.addParams){var n=t.addParams.trim().split(",");try{for(var i=0;i<n.length;i++){var r=n[i];try{var a=r.split("="),o=a[0].trim(),s=a[1].trim();e[o]=s}catch(t){}}}catch(t){}}if(!0===t.keepFilters){var c=l.communication.FFCommunicationEventAggregator.currentSearchResult;c&&(c.filters||[]).forEach(function(t){e["filter"+t.name]=t.valueList[0].value})}if(t.keepUrlParams){n=t.keepUrlParams.trim().split(",");var u=l.common.urlStringToDict();try{if(1===n.length&&"all"===n[0])for(var d in u)l.common.isFFParameter(d)||(e[d]=u[d]);else for(i=0;i<n.length;i++){var h=n[i].trim();h&&u&&u[h]&&(e[h]=u[h])}}catch(t){}}!1===t.useAsn&&(e.useAsn="false"),1==t.useFoundWords&&(e.useFoundWords="true"),0==t.useCampaigns&&(e.useCampaigns="false"),1==t.generateAdvisorTree&&(e.generateAdvisorTree="true"),1==t.disableCache&&(e.disableCache="true"),0==t.usePersonalization&&(e.usePersonalization="false"),0==t.useSemanticEnhancer&&(e.useSemanticEnhancer="false"),0==t.useAso&&(e.useAso="false"),1==t.useSeo&&l.communication.Util.handleSeoSearch(e),l.communication.globalCommunicationParameter.singleHitRedirect&&"true"===l.common.localStorage.getItem("ff_no_redirect")&&(e.ff_no_redirect=!0,l.common.localStorage.setItem("ff_no_redirect")),te(e),ee(e.url?e.url:$.buildSearchRequestUrl(e),e,!0)}var Q={};Q.search=J,Q.filter=function(e){if(l.communication.FFCommunicationEventAggregator.currentSearchResult&&l.communication.FFCommunicationEventAggregator.currentSearchResult.groups){te(e);var t=l.common.urlStringToDict(l.communication.FFCommunicationEventAggregator.currentSearchResult.searchParams);for(var n in t)t.hasOwnProperty(n)&&-1<n.indexOf("sort")&&(e[n]=t[n]);t.productsPerPage&&(e.productsPerPage=t.productsPerPage);for(var i=decodeURIComponent(e.groupName),r=0;r<l.communication.FFCommunicationEventAggregator.currentSearchResult.groups.length;r++){var a=l.communication.FFCommunicationEventAggregator.currentSearchResult.groups[r];if(i==a.name){if(e.removeAll){delete e.removeAll;var o=!1,s=function(e){if(o)for(var n in t)t.hasOwnProperty(n)&&0===n.indexOf("filterCategoryROOT")&&delete t[n];else{var i=l.common.fixedEncodeURIComponent(e.associatedFieldName);delete t["filter"+i]}};return"slider"===a.filterStyle.toLowerCase()?a.elements.forEach(s):("tree"===a.filterStyle.toLowerCase()&&(o=!0),a.selectedElements.forEach(s)),void ee($.buildFilterUrl(e,l.common.dictToParameterString(t,l.communication.globalCommunicationParameter.sortUrlParametersAlphabetically)),e,!0)}var c=decodeURIComponent(e.filterName),u=e.clusterLevel;delete e.clusterLevel;for(var d=0;d<a.selectedElements.length;d++)if((h=a.selectedElements[d]).name==c&&h.clusterLevel==u)return void ee($.buildFilterUrl(e,h.searchParams),e,!0);for(d=0;d<a.elements.length;d++){var h;if((h=a.elements[d]).name==c&&(void 0===u||h.clusterLevel==u))return void ee($.buildFilterUrl(e,h.searchParams),e,!0)}}}X.log("filter ["+e.filterName+"] in group ["+i+"] not found.")}else X.log("discard filter event. no result available, you need to search before you can filter the result.")},Q.clearFilter=function(e){if("true"===e.removeParams)l.communication.FFCommunicationEventAggregator.addFFEvent({type:"search",query:l.communication.Util.getQueryFromSearchParams()});else{var t=l.common.urlStringToDict(l.communication.FFCommunicationEventAggregator.currentSearchResult.searchParams);for(var n in t)t.hasOwnProperty(n)&&"filter"===n.substr(0,"filter".length)&&delete t[n];e.type="search",delete e.removeParams,te(e),ee($._buildUrlByFFParamString(l.common.dictToParameterString(t,l.communication.globalCommunicationParameter.sortUrlParametersAlphabetically),e),e,!0)}},Q.bct=function(e){if(l.communication.FFCommunicationEventAggregator.currentSearchResult&&l.communication.FFCommunicationEventAggregator.currentSearchResult.breadCrumbTrailItems){for(var t=0;t<l.communication.FFCommunicationEventAggregator.currentSearchResult.breadCrumbTrailItems.length;t++){var n=l.communication.FFCommunicationEventAggregator.currentSearchResult.breadCrumbTrailItems[t];if(decodeURIComponent(e.value)===n.value)return te(e),void ee($.buildBreadCrumbUrl(e,n.searchParams),e,!0)}X.log("no bread crumb trail item found for value: "+e.value)}else X.log("discard breadCrumbTrail event. no result available, you need to search before you can use the bct.")},Q.sort=function(e){if(l.communication.FFCommunicationEventAggregator.currentSearchResult&&l.communication.FFCommunicationEventAggregator.currentSearchResult.sortsList){for(var t=0;t<l.communication.FFCommunicationEventAggregator.currentSearchResult.sortsList.length;t++){var n=l.communication.FFCommunicationEventAggregator.currentSearchResult.sortsList[t];if(decodeURIComponent(e.value)===n.description)return e.useAsn="false",te(e,["records","sort","paging","ppp","pagingItems","campaign","singleWordSearch","result"]),void ee($.buildSortUrl(e,n.searchParams),e,!0)}X.log("no sort item found for value: "+e.value)}else X.log("discard sort event. no result available, you need to search before you can sort the result.")},Q.ppp=function(e){if(l.communication.FFCommunicationEventAggregator.currentSearchResult&&l.communication.FFCommunicationEventAggregator.currentSearchResult.resultsPerPageList){for(var t=0;t<l.communication.FFCommunicationEventAggregator.currentSearchResult.resultsPerPageList.length;t++){var n=l.communication.FFCommunicationEventAggregator.currentSearchResult.resultsPerPageList[t];if(e.value===n.value)return e.useAsn="false",te(e,["records","paging","ppp","pagingItems","campaign","singleWordSearch","result"]),void ee($.buildProductsPerPageUrl(e,n.searchParams),e,!0)}X.log("no products per page item found for value: "+e.value)}else X.log("discard products per page event. no result available, you need to search before you can use products per page.")},Q.paging=function(e){if(l.communication.FFCommunicationEventAggregator.currentSearchResult&&l.communication.FFCommunicationEventAggregator.currentSearchResult.paging){var t,n=function(e,t){return e&&e.number===t.number},i=l.communication.FFCommunicationEventAggregator.currentSearchResult.paging;n(i.firstLink,e)?t=i.firstLink:n(i.lastLink,e)?t=i.lastLink:n(i.previousLink,e)?t=i.previousLink:n(i.nextLink,e)&&(t=i.nextLink),t||i.pageLinks&&i.pageLinks.forEach(function(i){n(i,e)&&(t=i)}),t?(e.useAsn="false",delete e.number,te(e,["records","paging","ppp","pagingItems","campaign","singleWordSearch","result"]),ee($.buildPagingUrl(e,t.searchParams),e,!0)):X.log("no paging item found for value: "+e.number)}},Q.suggest=function(e){te(e,["suggest"]),ee(e.url?e.url:$.buildSuggestUrl(e),e,!1)},Q.suggestItem=function(e){var t=e["ff-suggestParams"],n=$.buildUrlByString(t,l.communication.globalSearchParameter.url,l.communication.globalSearchParameter.version,{removeFFPrefix:!0});delete e["ff-suggestParams"],e.type="search",e.url=n,J(e)},Q.productDetail=function(e){te(e,["productDetail"]),ee(e.url?e.url:$.buildProductDetailUrl(e),e,!1)},Q.tagCloud=function(e){te(e,["tagCloud"]),ee($.buildTagCloudUrl(e),e,!1)},Q.navigation=function(e){l.communication.FFCommunicationEventAggregator.navigationResult={},l.communication.FFCommunicationEventAggregator.navigationLayer={};var t=Number(e.firstFetch);t<0&&(t=0);var n=Number(e.fetchSize);n<0&&(n=1);var i=Number(e.maxFetch);10<i&&(i=10);var r=Number(e.fetchTime);r<0&&(r=100),function e(t,n,i,r,a,o){o={};l.communication.sessionManager.checkSession(o),o.type="navigation",o.startLevel=t,o.endLevel=n,o.initialNavigation=!0,o.navigation=!0;var s;o.success=function(t){var s=n+1,c=s+r;c<=i+r&&(10<c&&(c=10),i<c&&(c=i),window.setTimeout(function(){e(s,c,i,r,a,o)},a)),l.communication.ResultDispatcher.dispatchNavigationFrame(t,o)},ee((s=o).url?s.url:$.buildInitialNavigationRequestUrl(s),s,!1)}(0,t,i,n,r,e)},Q["navigation-search"]=function(e){e.type="search",e.navigation="true";var t=[];for(var n in e)0===n.indexOf("filter")&&(t.push({key:n,value:e[n]}),e[n]=decodeURIComponent(e[n]));te(e),ee(e.url?e.url:$.buildNavigationRequestUrl(e,t),e,!0)},Q.similarProducts=function(e){te(e,["similarProducts"]),ee($.buildSimilarProductsUrl(e),e,!1)},Q.advisor=function(e){var t=l.common.getParameterString(e.answer.params),n=l.common.parameterStringToDict(t),i=l.common.mergeProperties(e,n);delete i.answer,delete i.type,J(i),i.type="search"},Q.productCampaign=function(e){te(e,["productCampaign"]),ee($.buildProductCampaignUrl(e),e,!1)},Q.shoppingCartCampaign=function(e){te(e,["shoppingCartCampaign"]),ee($.buildShoppingCartCampaignUrl(e),e,!1)},Q.pageCampaigns=function(e){te(e,["pageCampaigns"]),ee($.buildPageCampaignUrl(e),e,!1)},Q.recommendation=function(e){te(e,["recommendation"]),ee($.buildRecommendationUrl(e),e,!1)},Q.compare=function(e){l.common.isArray(e.ids)?e.ids.length<2?console.warn("Not at least 2 ids in this compare event",e):(te(e,["compare"]),ee($.buildCompareUrl(e),e,!1)):console.warn("No ids in this compare event",e)},Q.getRecords=function(e){te(e,["getRecords"]),ee($.buildGetRecordsUrl(e),e,!1)},e.eventFunctions=Q;var Z=function(){function t(){I()(this,t)}return P()(t,[{key:"addFFEvent",value:function(t){t.type?-1<t.type.indexOf("recommendation")?e.eventFunctions.recommendation(t):-1<t.type.indexOf("compare")?e.eventFunctions.compare(t):null!=e.eventFunctions[t.type]?e.eventFunctions[t.type](t):X.log("event could not be dispatched. no valid type specified - type ["+t.type+"]"):X.log("event could not be dispatched. no type specified")}}]),t}();function ee(e,t,n){var i=new z(e,n,t);i.s(t.success),i.f(t.fail),i.a(t.always),i.se()}function te(e,t){var n,i;i=function(n){if(n&&n.searchResult&&n.searchResult.fieldRoles&&n.searchResult.fieldRoles&&(l.communication.fieldRoles=n.searchResult.fieldRoles),function(e,t){var n,i,r,a=l.communication.globalCommunicationParameter;if(a.currencyCode&&a.currencyCountryCode){var o=l.communication,s=t.searchResult||t,c=s.fieldRoles||o.fieldRoles;if(c){var u=a.currencyFields.split(","),d=!1;if(u.forEach(function(e){"price"===e&&(d=!0)}),d||u.push("price"),"search"===e.type||"filter"===e.type||"sort"===e.type||"ppp"===e.type||"paging"===e.type||"navigation"===e.type||"bct"===e.type)ie(s.records,c,u),s.groups&&s.groups.forEach(function(e){var t,n,i;i=c,((n=t=e).elements[0]||n.selectedElements[0]).associatedFieldName===i.price&&"SLIDER"!==t.filterStyle&&(t.elements.forEach(function(e){e.__ORIG_NAME__=e.name,t.unit&&(e.name=e.name.replace(t.unit,"")),e.name=re(e.name)}),t.selectedElements.forEach(function(e){e.__ORIG_NAME__=e.name,t.unit&&(e.name=e.name.replace(t.unit,"")),e.name=re(e.name)}))}),s.campaigns&&s.campaigns.forEach(function(e){var t=e.pushedProductsRecords;t&&ie(t,c,u)});else if("suggest"===e.type)n=t.suggestions||t,i=c,r=u,n.forEach(function(e){r.forEach(function(t){var n=i[t]||t,r=e.attributes[n];r&&(e.attributes["__ORIG_"+n.toUpperCase()+"__"]=r,e.attributes[n]=re(r))})});else if(e.type&&(-1<e.type.indexOf("recommendation")||"similarProducts"===e.type))try{var h=t.resultRecords||t.records||t;h&&ie(h,c,u)}catch(e){console.log(e)}else"productCampaign"!==e.type&&"pageCampaigns"!==e.type&&"shoppingCartCampaign"!==e.type||t&&t.forEach(function(e){e.pushedProductsRecords&&ie(e.pushedProductsRecords,c,u)})}else X.warn("No field roles configured, skipping price localization. See https://web-components.fact-finder.de/documentation/field-roles")}}(e,n),function(e,t){"productCampaign"===e.type||"pageCampaigns"===e.type?t&&ne(t):ne((t.searchResult||t).campaigns)}(e,n),n.searchResult){if(n.searchResult.timedOut&&X.debug("FACT-Finder Timeout for request: "+e.type),!function(e,t){if("search"===e.type&&l.communication.globalCommunicationParameter.singleHitRedirect&&!e.ff_no_redirect){var n=t.searchResult;if("resultsFound"===n.resultStatus&&n.records&&1==n.records.length){var i=t.searchResult.records[0].record,r=i.Deeplink;if(!r&&l.communication.fieldRoles)r=i[l.communication.fieldRoles.deeplink];if(r){l.common.localStorage.setItem("ff_no_redirect","true");var a=l.communication.globalCommunicationParameter.singleHitRedirectBasePath;return l.common.isOk(a)&&(r=a+r),window.open(r,"_self"),!1}console.log("no deeplink in record to auto load product page")}}return!0}(e,n))return;if("sort"===e.type||"ppp"===e.type||"paging"===e.type){var i,r;l.communication.FFCommunicationEventAggregator.currentSearchResult&&(i=l.communication.FFCommunicationEventAggregator.currentSearchResult.groups,r=l.communication.FFCommunicationEventAggregator.currentSearchResult.breadCrumbTrailItems),l.communication.FFCommunicationEventAggregator.currentSearchResult=n.searchResult,l.communication.FFCommunicationEventAggregator.currentSearchResult.groups=i,l.communication.FFCommunicationEventAggregator.currentSearchResult.breadCrumbTrailItems=r;var a=JSON.parse(JSON.stringify(n));a.searchResult=l.communication.FFCommunicationEventAggregator.currentSearchResult,l.communication.Util.replaceHistoryState(a,window.location.href,e)}else o=n.searchResult,e.topics||(l.communication.FFCommunicationEventAggregator.currentSearchResult=o),l.communication.Util.replaceHistoryState(n,window.location.href,e)}var o,s,c;l.communication.ResultDispatcher.dispatch(n,e,(c=t,(s=e).topics&&"function"==typeof s.topics&&(c=s.topics()),c))},(n=e).success?n.success=l.common.concatFunctions(i,n.success):n.success=i}function ne(e){e&&l.common.isArray(e)&&e.forEach(function(e){var t=e.pushedProductsRecords;t&&t.forEach(function(e,t){e.position=t+1})})}function ie(e,t,n){e.forEach(function(e){n.forEach(function(n){var i=t[n]||n,r=e.record[i];e.record["__ORIG_"+i.toUpperCase()+"__"]=r,e.record[i]=re(r)})})}function re(e){if(e){var t=l.communication.globalCommunicationParameter.currencyCode,n=l.communication.globalCommunicationParameter.currencyCountryCode,i=parseInt(l.communication.globalCommunicationParameter.currencyMaxDigits),r=parseInt(l.communication.globalCommunicationParameter.currencyMinDigits);if(e.match(/[^$,.\d]/g)){var a=[];e.replace(/[^0-9.]+/g," ").split(" ").forEach(function(e){if(e){var t=parseFloat(e);isNaN(t)||a.push(e)}});var o=a.slice();return a=a.map(function(e){return parseFloat(e).toLocaleString(n,{style:"currency",currency:t,maximumFractionDigits:i,minimumFractionDigits:r})}),o.forEach(function(t,n){e=e.replace(t,a[n])}),e}var s=parseFloat(e).toLocaleString(n,{style:"currency",currency:t,maximumFractionDigits:i,minimumFractionDigits:r});return s+""=="NaN"?e:s}}e.FFCommunicationHandler=Z;var ae=function(e){function t(){return I()(this,t),T()(this,A()(t).apply(this,arguments))}return x()(t,e),t}(l.communication.FFCommunicationHandler);e.FF611CommunicationHandler=ae,t[i]=function(e){var t={};e.checkSession(t);for(var n=[],i=0;i<t.sid.length;i++)n.push(t.sid.charCodeAt(i).toString(16));return n.join("$")};var oe=function(e){function t(){return I()(this,t),T()(this,A()(t).apply(this,arguments))}return x()(t,e),t}(l.communication.FFCommunicationHandler);e.FF70CommunicationHandler=oe;var se,ce,le,ue,de,he,pe,me,fe=function(e){function t(){return I()(this,t),T()(this,A()(t).apply(this,arguments))}return x()(t,e),t}(l.communication.FFCommunicationHandler);e.FF71CommunicationHandler=fe,t[N]=function(e){for(var t=this[D](),n=[],i=0;i<3;i++){var r="";e[i].forEach(function(e){for(var n=0;n<6;n++)r+=t.charAt(+e+10*n)}),n.push(r)}return n.push(t),n},se=e.FFCommunicationEventAggregator||(e.FFCommunicationEventAggregator={}),ce=new l.communication.FF611CommunicationHandler,le=new l.communication.FF70CommunicationHandler,ue=new l.communication.FF71CommunicationHandler,de=l.common.Logger,he=[],pe=[],me=l.communication.globalSearchParameter,se.navigationResult={},se.navigationLayer={},se.beforeHistoryPushCallbacks=[],se.addFFEvent=function(e){if(!e.version)try{e.version=parseFloat(me.version)}catch(e){this.logger.error(e)}if(!e.channel){var t=l.common.getParameterString();if(t){var n=l.common.parameterStringToDict(t);n.channel&&(e.channel=n.channel,me.channel=e.channel)}e.channel||(e.channel=me.channel)}for(var i=0;i<he.length;i++){var r=he[i];e.fail?e.fail=l.common.concatFunctions(e.fail,r.fn):e.fail=r.fn}l.communication.sessionManager.checkSession(e);var a,o=e.type;for(var s in l.common.encodeDict(e),e.type=o,e){var c=e[s];try{l.common.isArray(c)&&1===c.length&&(e[s]=c[0])}catch(e){}}for(i=0;i<pe.length;i++){r=pe[i];try{r.fn(e)}catch(e){console.log("Could not execute beforeDispatchingCallback: "+e)}}e.query&&(e.query=l.common.fixedDecodeURIComponent(e.query).replace(/<.*>/g,""),e.query=l.common.fixedEncodeURIComponent(e.query)),me.url&&e.channel&&e.version||(de.error('Required search params are not available: [url(globalSearchParameter): "'.concat(me.url,'"], [url(event): "').concat(e.url,'"], [channel: "').concat(e.channel,'"], [version:"').concat(e.version,'"]')),de.warn("At the time this event was emitted no configuration was available, See https://web-components.fact-finder.de/documentation/ready-events",e)),6.9==(a=e).version||a[0]&&6.9==a[0]?(de.debug("dispatch event to FF6.9 component."),ce.addFFEvent(a)):6.11==a.version||a[0]&&6.11==a[0]?(de.debug("dispatch event to FF6.11 component."),ce.addFFEvent(a)):7==a.version||a[0]&&7==a[0]?(de.debug("dispatch event to FF7.0 component."),le.addFFEvent(a)):(7.1==a.version||a[0]&&7.1==a[0]?de.debug("dispatch event to FF7.1 component."):7.2==a.version||a[0]&&7.2==a[0]?de.debug("dispatch event to FF7.2 component."):7.3==a.version||a[0]&&7.3==a[0]?de.debug("dispatch event to FF7.3 component."):de.debug("default to 7.2 component."),ue.addFFEvent(a))},se.removeFailCallback=function(e){for(var t=0;t<he.length;t++)if(he[t].key===e)return he.splice(t,1),!0;return!1},se.addBeforeHistoryPushCallback=function(e){if(e){var t=l.common.randomString(20);return se.beforeHistoryPushCallbacks.push({fn:e,key:t}),t}l.common.Logger.debug("addBeforeHistoryPushCallback: fn is undefined")},se.removeBeforeHistoryPushCallback=function(e){for(var t=0;t<se.beforeHistoryPushCallbacks.length;t++)if(se.beforeHistoryPushCallbacks[t].key===e)return he.splice(t,1),!0;return!1},se.addFailCallback=function(e){if(e){var t=l.common.randomString(20);return he.push({fn:e,key:t}),t}l.common.Logger.debug("addFailCallback: fn is undefined")},se.removeBeforeDispatchingCallback=function(e){for(var t=0;t<pe.length;t++)if(pe[t].key===e)return pe.splice(t,1),!0;return!1},se.addBeforeDispatchingCallback=function(e){if(e){var t=l.common.randomString(20);return pe.push({fn:e,key:t}),t}l.common.Logger.debug("addBeforeDispatchingCallback: fn is undefined")},se.getCurrentResult=function(e){return se.currentSearchResult}}((l=y||(y={})).communication||(l.communication={})),((d=(u=y||(y={})).middleware||(u.middleware={})).response||(d.response={})).use=function(e){u.communication.ResultDispatcher.addCallback(e.topic,e.handler,void 0)},((p=(h=y||(y={})).middleware||(h.middleware={})).response||(p.response={})).MultiAttributeParsing=function(e){var t=e||{},n=t.srcProperty,i=void 0===n?void 0:n,r=t.storeInProperty,a=void 0===r?void 0:r,o=t.keepOriginalInProperty,s=void 0===o?void 0:o,c=t.entrySeparator,l=void 0===c?"|":c,u=t.keyValueSeparator,d=void 0===u?"=":u;if(!i||"string"!=typeof i)throw p("srcProperty");if(!a||"string"!=typeof a)throw p("storeInProperty");if(void 0!==s&&("string"!=typeof s||""===s))throw m("keepOriginalInProperty");if("string"!=typeof l||""===l)throw m("entrySeparator");if("string"!=typeof d||""===d)throw m("keyValueSeparator");return Object.freeze({topic:"records",handler:function(e){0!==e.length&&(e[0].record.hasOwnProperty(i)?e.forEach(function(e){var t=e.record,n=t[i];"string"==typeof n?(t.hasOwnProperty([a])&&a!==i&&f("Overwriting storeInProperty '".concat(a,"'")),t[a]=n.split(l).filter(function(e){return!!e}).map(function(e){return e.split(d)}).reduce(function(e,t){var n=t[0].split("~~"),i=C()(n,2),r=i[0],a=i[1];return e[r]=e[r]||[],e[r].push({unit:a,value:t[1]}),e},{}),s&&(t[s]=n)):f("Cannot parse srcProperty '".concat(i,"'. Must be of type 'string', but was '").concat(M()(n),"'. Check if srcProperty is configured correctly"))}):f("srcProperty '".concat(i,"' not found on record")))}});function p(e){return Error(g("Required attribute options.".concat(e," must be a non-empty string")))}function m(e){return Error(g("Optional attribute options.".concat(e," was set to invalid value. Must be a non-empty string")))}function f(e){h.common.Logger.warn(g(e))}function g(e){return"[Middleware:MultiAttributeParsing] ".concat(e)}},function(e){e.RendererOptions=function e(){I()(this,e),this.append=!0,this.returnAsString=!0};var t=function(){function e(){I()(this,e),this.renderer=m.libs.mustache}return P()(e,[{key:"render",value:function(e,t,n,i){if(e.childNodes){var r=document.createElement("div");r.appendChild(e),e=r.innerHTML}var a;try{a=this.renderer.render(e,t)}catch(t){return console.error?console.error("could not render template: "+e,t):console.log("could not render template: "+e,t),""}if(n&&n.childNodes){var o=document.createElement("div");o.innerHTML=a;for(var s=0;s<o.childNodes.length;s++){var c=o.childNodes[s];if(!i||i&&1==i.append)n.appendChild(c);else{var l=n.firstChild;l&&n.insertBefore(c,l)}}}if(i&&!1===i.returnAsString){var u=document.createElement("div");return u.innerHTML=a,u.isWrapper=!0,u.firstElementChild}return a}}]),e}();e.TemplateRenderer=t}((m=y||(y={})).html||(m.html={})),g=(f=y||(y={})).html||(f.html={}),v=function(){function e(){I()(this,e),this.templateRenderer=new f.html.TemplateRenderer}return P()(e,[{key:"processAsnElement",value:function(e,t,n,i,r){var a,o={group:n,element:t};return e instanceof Array?a=t.selected?e[0]:e[1]:e instanceof HTMLElement?a=e:e instanceof Object?a=t.selected?e.selected:e.unselected:f.common.Logger.error("Could not read templates. Parameter[templates] needs to be an array OR an object with selected/unselected properties."),this.templateRenderer.render(a,o,i,r)}},{key:"processDetailedLinks",value:function(e,t,n,i){n||((n=document.createElement("div")).isWrapper=!0);for(var r=0;r<t.detailedLinks&&r<t.elements.length;r++){var a=t.elements[r];this.processAsnElement(e,a,t,n,i)}return n}},{key:"processHiddenLinks",value:function(e,t,n,i){n||((n=document.createElement("div")).isWrapper=!0);for(var r=t.detailedLinks;r<t.elements.length;r++){var a=t.elements[r];this.processAsnElement(e,a,t,n,i)}return n}}]),e}(),g.AsnRenderer=v,(_=y).isReady=!0,setTimeout(function(){return _.common.fireCustomEvent("ffReady",!0,!1,document)})},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){n(1);var i=n(50);function r(t,n,a){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=r=Reflect.get:e.exports=r=function(e,t,n){var r=i(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}},r(t,n,a||t)}e.exports=r},function(e,t,n){var i=n(19),r=n(13);e.exports=function(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?r(e):t}},function(e,t,n){var i=n(38);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}},function(e,t,n){"use strict";var i=n(3),r=n.n(i),a=n(5),o=n.n(a),s=n(2),c=n.n(s),l=n(6),u=n.n(l),d=n(1),h=n.n(d),p=n(4),m=n.n(p),f=(n(18),n(28)),g=n(21),v=n(32),y=n(24),_=n(36),b={},C={},k=function(e){function t(){return r()(this,t),o()(this,h()(t).apply(this,arguments))}return u()(t,e),c()(t,[{key:"attributeChangedCallback",value:function(e,t,n,i){t!==n&&this.register()}},{key:"register",value:function(e){var t;(e=e||this.id)&&(this.id=e,b[e]=this,C[e.toLowerCase()]=this,(t=this).querySelector("style")&&console.warn("dom-module %s has style outside template",t.id))}},{key:"assetpath",get:function(){if(!this.__assetpath){var e=window.HTMLImports&&HTMLImports.importForElement?HTMLImports.importForElement(this)||document:this.ownerDocument,t=Object(y.c)(this.getAttribute("assetpath")||"",e.baseURI);this.__assetpath=Object(y.a)(t)}return this.__assetpath}}],[{key:"import",value:function(e,t){if(e){var n=b[i=e]||C[i.toLowerCase()];return n&&t?n.querySelector(t):n}var i;return null}},{key:"observedAttributes",get:function(){return["id"]}}]),t}(n.n(_)()(HTMLElement));k.prototype.modules=b,customElements.define("dom-module",k);var S=n(33),w=n(37),P=Object(g.a)(function(e){function t(e){var t=Object.getPrototypeOf(e);return t.prototype instanceof i?t:null}function n(e){if(!e.hasOwnProperty(JSCompiler_renameProperty("__ownProperties",e))){var t=null;e.hasOwnProperty(JSCompiler_renameProperty("properties",e))&&e.properties&&(t=function(e){var t={};for(var n in e){var i=e[n];t[n]="function"==typeof i?{type:i}:i}return t}(e.properties)),e.__ownProperties=t}return e.__ownProperties}var i=function(e){function i(){return r()(this,i),o()(this,h()(i).apply(this,arguments))}return u()(i,e),c()(i,[{key:"_initializeProperties",value:function(){this.constructor.finalize(),m()(h()(i.prototype),"_initializeProperties",this).call(this)}},{key:"connectedCallback",value:function(){m()(h()(i.prototype),"connectedCallback",this)&&m()(h()(i.prototype),"connectedCallback",this).call(this),this._enableProperties()}},{key:"disconnectedCallback",value:function(){m()(h()(i.prototype),"disconnectedCallback",this)&&m()(h()(i.prototype),"disconnectedCallback",this).call(this)}}],[{key:"finalize",value:function(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__finalized",this))){var e=t(this);e&&e.finalize(),this.__finalized=!0,this._finalizeClass()}}},{key:"_finalizeClass",value:function(){var e=n(this);e&&this.createProperties(e)}},{key:"typeForProperty",value:function(e){var t=this._properties[e];return t&&t.type}},{key:"observedAttributes",get:function(){var e=this,t=this._properties;return t?Object.keys(t).map(function(t){return e.attributeNameForProperty(t)}):[]}},{key:"_properties",get:function(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__properties",this))){var e=t(this);this.__properties=Object.assign({},e&&e._properties,n(this))}return this.__properties}}]),i}(Object(w.a)(e));return i}),E=Object(g.a)(function(e){return function(e){function t(){var e;return r()(this,t),(e=o()(this,h()(t).call(this)))._template,e._importPath,e.rootPath,e.importPath,e.root,e.$,e}return u()(t,e),c()(t,null,[{key:"_finalizeClass",value:function(){var e;m()(h()(t),"_finalizeClass",this).call(this),this.hasOwnProperty(JSCompiler_renameProperty("is",this))&&this.is&&(e=this.prototype,T.push(e));var n,i=((n=this).hasOwnProperty(JSCompiler_renameProperty("__ownObservers",n))||(n.__ownObservers=n.hasOwnProperty(JSCompiler_renameProperty("observers",n))?n.observers:null),n.__ownObservers);i&&this.createObservers(i,this._properties);var r=this.template;r&&(r="string"==typeof r?(console.error("template getter must return HTMLTemplateElement"),null):r.cloneNode(!0)),this.prototype._template=r}},{key:"createProperties",value:function(e){for(var t in e)n=this.prototype,a=e,(r=e[i=t]).computed&&(r.readOnly=!0),r.computed&&!n._hasReadOnlyEffect(i)&&n._createComputedProperty(i,r.computed,a),r.readOnly&&!n._hasReadOnlyEffect(i)&&n._createReadOnlyProperty(i,!r.computed),r.reflectToAttribute&&!n._hasReflectEffect(i)&&n._createReflectedProperty(i),r.notify&&!n._hasNotifyEffect(i)&&n._createNotifyingProperty(i),r.observer&&n._createPropertyObserver(i,r.observer,a[r.observer]),n._addPropertyToAttributeMap(i);var n,i,r,a}},{key:"createObservers",value:function(e,t){for(var n=this.prototype,i=0;i<e.length;i++)n._createMethodObserver(e[i],t)}},{key:"template",get:function(){return this.hasOwnProperty(JSCompiler_renameProperty("_template",this))||(this._template=k&&k.import(this.is,"template")||Object.getPrototypeOf(this.prototype).constructor.template),this._template}},{key:"importPath",get:function(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_importPath",this))){var e=this.importMeta;if(e)this._importPath=Object(y.a)(e.url);else{var t=k&&k.import(this.is);this._importPath=t&&t.assetpath||Object.getPrototypeOf(this.prototype).constructor.importPath}}return this._importPath}}]),c()(t,[{key:"_initializeProperties",value:function(){this.constructor.finalize(),this.constructor._finalizeTemplate(this.localName),m()(h()(t.prototype),"_initializeProperties",this).call(this),this.rootPath=f.b,this.importPath=this.constructor.importPath;var e=function(e){if(!e.hasOwnProperty(JSCompiler_renameProperty("__propertyDefaults",e))){e.__propertyDefaults=null;var t=e._properties;for(var n in t){var i=t[n];"value"in i&&(e.__propertyDefaults=e.__propertyDefaults||{},e.__propertyDefaults[n]=i)}}return e.__propertyDefaults}(this.constructor);if(e)for(var n in e){var i=e[n];if(!this.hasOwnProperty(n)){var r="function"==typeof i.value?i.value.call(this):i.value;this._hasAccessor(n)?this._setPendingProperty(n,r,!0):this[n]=r}}}},{key:"connectedCallback",value:function(){window.ShadyCSS&&this._template&&window.ShadyCSS.styleElement(this),m()(h()(t.prototype),"connectedCallback",this).call(this)}},{key:"ready",value:function(){this._template&&(this.root=this._stampTemplate(this._template),this.$=this.root.$),m()(h()(t.prototype),"ready",this).call(this)}},{key:"_readyClients",value:function(){this._template&&(this.root=this._attachDom(this.root)),m()(h()(t.prototype),"_readyClients",this).call(this)}},{key:"_attachDom",value:function(e){if(this.attachShadow)return e?(this.shadowRoot||this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(e),this.shadowRoot):null;throw new Error("ShadowDOM not available. PolymerElement can create dom as children instead of in ShadowDOM by setting `this.root = this;` before `ready`.")}},{key:"updateStyles",value:function(e){window.ShadyCSS&&window.ShadyCSS.styleSubtree(this,e)}},{key:"resolveUrl",value:function(e,t){return!t&&this.importPath&&(t=Object(y.c)(this.importPath)),Object(y.c)(e,t)}}],[{key:"_processStyleText",value:function(e,t){return Object(y.b)(e,t)}},{key:"_finalizeTemplate",value:function(e){var t=this.prototype._template;if(t&&!t.__polymerFinalized){t.__polymerFinalized=!0;var n=this.importPath;!function(e,t,n,i){for(var r=t.content.querySelectorAll("style"),a=Object(v.c)(t),o=Object(v.b)(n),s=t.content.firstElementChild,c=0;c<o.length;c++){var l=o[c];l.textContent=e._processStyleText(l.textContent,i),t.content.insertBefore(l,s)}for(var u=0,d=0;d<a.length;d++){var h=a[d],p=r[u];p!==h?(h=h.cloneNode(!0),p.parentNode.insertBefore(h,p)):u++,h.textContent=e._processStyleText(h.textContent,i)}window.ShadyCSS&&window.ShadyCSS.prepareTemplate(t,n)}(this,t,e,n?Object(y.c)(n):""),this.prototype._bindTemplate(t)}}},{key:"_parseTemplateContent",value:function(e,n,i){return n.dynamicFns=n.dynamicFns||this._properties,m()(h()(t),"_parseTemplateContent",this).call(this,e,n,i)}}]),t}(P(Object(S.a)(e)))}),T=[],O=function(){function e(t){r()(this,e),this.value=t.toString()}return c()(e,[{key:"toString",value:function(){return this.value}}]),e}();var A=function(e){for(var t=document.createElement("template"),n=arguments.length,i=new Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t.innerHTML=i.reduce(function(t,n,i){return t+function(e){if(e instanceof HTMLTemplateElement)return e.innerHTML;if(e instanceof O)return function(e){if(e instanceof O)return e.value;throw new Error("non-literal value passed to Polymer's htmlLiteral function: ".concat(e))}(e);throw new Error("non-template value passed to Polymer's html function: ".concat(e))}(n)+e[i+1]},e[0]),t};n.d(t,"a",function(){return L}),n.d(t,"b",function(){return A});var L=E(HTMLElement)},function(e,t){e.exports=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}},function(e,t,n){"use strict";var i=n(3),r=n.n(i),a=n(2),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(6),h=n.n(d),p=n(15),m=function(e){return function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return h()(t,e),o()(t,[{key:"bind",value:function(e,t,n){var i=(n||this).querySelector(e);return!!i&&(this._addEventListenerToNode(i,"tap",t.bind(this)),!0)}},{key:"bindElement",value:function(e,t){return!!e&&(this._addEventListenerToNode(e,"tap",t.bind(this)),!0)}},{key:"bindAll",value:function(e,t,n){var i=this,r=(n||this).querySelectorAll(e);return!!r&&(r.forEach(function(e){return i._addEventListenerToNode(e,"tap",t.bind(i))}),!0)}},{key:"bindElements",value:function(e,t){var n=this;return!!e&&(e.forEach(function(e){n._addEventListenerToNode(e,"tap",t.bind(n))}),!0)}},{key:"unbind",value:function(e,t,n){var i=(n||this).querySelector(e);this._removeEventListenerFromNode(i,"tap",t.bind(this))}},{key:"unbindAll",value:function(e,t,n){var i=this;(n||this).querySelectorAll(e).forEach(function(e){i._removeEventListenerFromNode(e,"tap",t.bind(i))})}}]),t}(Object(p.a)(e))},f=n(0),g=n(40),v=n(39),y=function(e){return function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return h()(t,e),o()(t,[{key:"bindImage",value:function(e){this.searchLightDOM&&this._bindImage(this,e),this.searchShadowDOM&&this._bindImage(this.shadowRoot)}},{key:"_bindImage",value:function(e,t){e.querySelectorAll(this.productImageIdentifier).forEach(function(e){if(e.onerror){var n=e.attributes.getNamedItem("data-image-onerror");if(n){var i=n.nodeValue;i&&(e.onerror=function(){e.onerror=null,e.setAttribute("src",i)})}}var r=e.getAttribute("data-image");r&&(t=r),e.setAttribute("src",t)})}}],[{key:"properties",get:function(){return{searchLightDOM:{type:Boolean,value:!0},searchShadowDOM:{type:Boolean,value:!0},productImageIdentifier:{type:String,value:"[data-image]"},productImageErrorIdentifier:{type:"String",value:"[data-image-onerror]"}}}}]),t}(m(e))},_=n(4),b=n.n(_),C=n(20),k=n(10),S=n(31);n.d(t,"a",function(){return P});var w={BindAction:m,CampaignHelper:function(e){return function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return h()(t,e),o()(t,[{key:"_recalcSubscriptionTopic",value:function(e,t){var n;return n=this._isProductCampaign()&&this._isShoppingCartCampaign()?(f.a.common.Logger.log("ff-campaign-pushed-products: Both attributes is-product-campaign and\n                is-shopping-cart-campaign are set - only one these attributes can be true. Ignoring is-shopping-cart-campaign"),"productCampaign"):this._isProductCampaign()?"productCampaign":this._isShoppingCartCampaign()?"shoppingCartCampaign":"campaign",n+=":".concat(e),this[t]&&(n+=":".concat(this[t])),n}},{key:"_isProductCampaign",value:function(){return!0===this.isProductCampaign}},{key:"_isShoppingCartCampaign",value:function(){return!0===this.isShoppingCartCampaign}}]),t}(e)},CollapseElement:g.CollapseElementBehavior,CssAttributeToggle:function(e){return function(e){function t(){var e,n=arguments;if(r()(this,t),(e=c()(this,u()(t).call(this)))[e.toggleFunctionName]){var i=e[e.toggleFunctionName];e.toggleFunctionName=function(){i.apply(n),e.toggleAttribute()}}if(!e.stateOneValue){var a=e.style[e.attributeName];e.stateOneValue=a||""}return e.immediate&&e.toggleAttribute(),e}return h()(t,e),o()(t,null,[{key:"properties",get:function(){return{toggleFunctionName:{type:String},immediate:{type:Boolean},attributeName:{type:String},stateOneValue:{type:String},stateTwoValue:{type:String}}}}]),o()(t,[{key:"toggleAttribute",value:function(){this.style[this.attributeName]===this.stateOneValue?this.style[this.attributeName]=this.stateTwoValue:this.style[this.attributeName]=this.stateOneValue}},{key:"activateStateTwo",value:function(){this.style[this.attributeName]=this.stateTwoValue}},{key:"activateStateOne",value:function(){this.style[this.attributeName]=this.stateOneValue}}]),t}(e)},ElementLog:v.ElementLogBehavior,ImageBinding:y,ImageTest:function(e){return m(y(e))},LightDOMTemplate:function(e){return function(e){function t(){var e;return r()(this,t),(e=c()(this,u()(t).call(this)))._renderer=new f.a.html.TemplateRenderer,e}return h()(t,e),o()(t,null,[{key:"properties",get:function(){return{templateString:{type:String},model:{type:Object,observer:"_modelObserver"},stampImmediate:{type:Boolean,value:!1}}}}]),o()(t,[{key:"ready",value:function(){b()(u()(t.prototype),"ready",this).call(this),this.updateTemplate(),this.stampImmediate&&this.stamp()}},{key:"stamp",value:function(){var e=this._renderer.render(this.templateString,this.model);this.innerHTML=e}},{key:"updateTemplate",value:function(e){e?this.templateString=e:this.templateString||(this.templateString=this.innerHTML)}},{key:"_modelObserver",value:function(e,t){this.stamp()}}]),t}(e)},LogLifeCycle:function(e){return function(e){function t(){var e;return r()(this,t),(e=c()(this,u()(t).call(this))).debugMessage("constructor() invoked"),e}return h()(t,e),o()(t,[{key:"__hashCodeGen",value:function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(32).substring(1)};return e()+e()+e()+e()}},{key:"debugMessage",value:function(e){this.__hashCode||(this.__hashCode=this.__hashCodeGen(),f.a.common.Logger.debug("")),f.a.common.Logger.debug("DEBUG [".concat(this.tagName," ").concat(this.__hashCode,"] ").concat(e))}}]),o()(t,[{key:"connectedCallback",value:function(){b()(u()(t.prototype),"connectedCallback",this).call(this),this.debugMessage("connectedCallback() invoked")}},{key:"disconnectedCallback",value:function(){b()(u()(t.prototype),"disconnectedCallback",this).call(this),this.debugMessage("disconnectedCallback() invoked")}},{key:"ready",value:function(){b()(u()(t.prototype),"ready",this).call(this),this.debugMessage("ready() invoked")}}]),t}(e)},OpacityToggle:function(e){return function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return h()(t,e),o()(t,[{key:"connectedCallback",value:function(){var e=this;b()(u()(t.prototype),"connectedCallback",this).call(this),this._debounceJob=C.a.debounce(this._debounceJob,k.b.after(100),function(){return e.style.opacity="1"})}}]),t}(e)},RecordBinding:function(e){return function(e){function t(){var e;return r()(this,t),(e=c()(this,u()(t).call(this))).tracking=new f.a.communication.Tracking12,e}return h()(t,e),o()(t,null,[{key:"properties",get:function(){return{searchLightDOM:{type:Boolean,value:!0},searchShadowDOM:{type:Boolean,value:!0},productImageIdentifier:{type:"String",value:"[data-image]"},productImageErrorIdentifier:{type:"String",value:"[data-image-onerror]"},redirectIdentifier:{type:"String",value:"[data-redirect]"},redirectTargetIdentifier:{type:"String",value:"[data-redirect-target]"},productAnchorIdentifier:{type:"String",value:"[data-anchor]"},recommendationIdentifier:{type:"String",value:"data-recommendation"},bindImmediate:{type:Boolean,value:!1},disableOverwrite:{type:Boolean}}}}]),o()(t,[{key:"ready",value:function(){b()(u()(t.prototype),"ready",this).call(this),this.bindImmediate&&(this.bindProductAnchors(),this.bindProductActions(),this.bindProductImage())}},{key:"bindProductActions",value:function(){this._bindProductRedirect()}},{key:"bindProductImage",value:function(){this.searchLightDOM&&this._bindProductImage(this),this.searchShadowDOM&&this._bindProductImage(this.shadowRoot)}},{key:"bindProductAnchors",value:function(){this.searchLightDOM&&this._bindProductAnchors(this),this.searchShadowDOM&&this._bindProductAnchors(this.root)}},{key:"_bindProductImage",value:function(e){var t=this;e.querySelectorAll(this.productImageIdentifier).forEach(function(e){if(!e.onerror){var n=e.attributes.getNamedItem("data-image-onerror");if(n){var i=n.nodeValue;i&&(e.onerror=function(){e.onerror=null,e.setAttribute("src",i)})}}var r=e.getAttribute("data-image");if(r)e.setAttribute("src",r);else{var a=f.a.communication,o=a.fieldRoles?a.fieldRoles.imageUrl:"",s=t.recordData.record[o]||t.recordData.record.ImageUrl;void 0!==s?e.setAttribute("src",s):f.a.common.Logger.debug("No image data for this record: ".concat(t.recordData.id))}})}},{key:"_bindProductAnchors",value:function(e){e.querySelectorAll(this.productAnchorIdentifier).forEach(function(e){var t=e.getAttribute("data-anchor");t&&0!==t.length&&(e.setAttribute("href",t),e.removeAttribute("data-anchor"))})}},{key:"_bindProductRedirect",value:function(){this.searchLightDOM&&this.bindRedirect(this),this.searchShadowDOM&&this.bindRedirect(this.root)}},{key:"bindRedirect",value:function(e){var t=this;e&&e.querySelectorAll(this.redirectIdentifier).forEach(function(e){e.querySelectorAll("[data-track]").forEach(function(e){return e.attributes.removeNamedItem("data-track")}),t.registerClickListener(e)})}},{key:"registerClickListener",value:function(e){var t=this,n=function(e){var n=e.ctrlKey||e.shiftKey||e.metaKey||e.altKey;return 0===e.button&&!n&&!t.disableOverwrite},i=function i(r){e.removeEventListener("mouseup",i),2!==r.button&&t._handleTrackingAndRedirect(r,n(r))};e.addEventListener("click",function(e){n(e)&&e.preventDefault()}),e.addEventListener("mousedown",function(t){e.addEventListener("mouseup",i),e.addEventListener("mouseleave",function(){return e.removeEventListener("mouseup",i)})})}},{key:"_handleRedirect",value:function(e){var t=e.currentTarget,n=this.getRedirectLocation(t),i=this.getRedirectTarget(t);n&&this.redirect(n,i)}},{key:"_handleTrackingAndRedirect",value:function(e,t){var n=this;e.stopPropagation();var i=e.currentTarget,r=this.getRedirectTarget(i),a=this.getRedirectLocation(i);if(a){var o=function(){!0===t&&n.redirect(a,r)};if("_blank"===r){try{!0===this.isRecommendation?this._trackRecommendationClick(this):this._trackProductClick(this)}catch(e){console.log(e)}o()}else!0===this.isRecommendation?this._trackRecommendationClick(this,void 0,o):this._trackProductClick(this,void 0,o)}}},{key:"getRedirectLocation",value:function(e){var t=e.attributes.getNamedItem("data-redirect");if(t){var n=t.nodeValue;if(n&&0<n.length)return n;if(this.recordData)return this.recordData.record.Deeplink;f.a.common.Logger.debug("No record data available for data-redirect action.")}}},{key:"getRedirectTarget",value:function(e){var t=e.attributes.getNamedItem("data-redirect-target");if(t){var n=t.nodeValue;if(n)return n}return"_blank"}},{key:"redirect",value:function(e,t){window.open(e,t)}}]),t}(m(e))},RemoveUnresolvedAttribute:function(e){return function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return h()(t,e),o()(t,[{key:"connectedCallback",value:function(){b()(u()(t.prototype),"connectedCallback",this).call(this),this.hasAttribute("unresolved")&&this.removeAttribute("unresolved")}}]),t}(e)},Tracking:S.TrackingBehavior,TrackingBinding:function(e){return m(Object(S.TrackingBehavior)(e))}},P=function(e,t){var n=t;if(e)for(var i=0;i<e.length;i++){var r=w[e[i]](n);n===r||n.prototype instanceof r||(n=r)}return n}},function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return l}),n(18);var i=0,r=0,a=[],o=0,s=document.createTextNode("");new window.MutationObserver(function(){for(var e=a.length,t=0;t<e;t++){var n=a[t];if(n)try{n()}catch(e){setTimeout(function(){throw e})}}a.splice(0,e),r+=e}).observe(s,{characterData:!0});var c={after:function(e){return{run:function(t){return window.setTimeout(t,e)},cancel:function(e){window.clearTimeout(e)}}},run:function(e,t){return window.setTimeout(e,t)},cancel:function(e){window.clearTimeout(e)}},l={run:function(e){return s.textContent=o++,a.push(e),i++},cancel:function(e){var t=e-r;if(0<=t){if(!a[t])throw new Error("invalid async handle: "+e);a[t]=null}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o}),n(18);var i=[],r=function(e){i.push(e)};function a(){for(var e=Boolean(i.length);i.length;)try{i.shift().flush()}catch(e){setTimeout(function(){throw e})}return e}var o=function(){for(var e,t;e=window.ShadyDOM&&ShadyDOM.flush(),window.ShadyCSS&&window.ShadyCSS.ScopingShim&&window.ShadyCSS.ScopingShim.flush(),t=a(),e||t;);}},function(e,t,n){"use strict";n.r(t),n.d(t,"gestures",function(){return T}),n.d(t,"recognizers",function(){return O}),n.d(t,"deepTargetFind",function(){return A}),n.d(t,"addListener",function(){return R}),n.d(t,"removeListener",function(){return I}),n.d(t,"register",function(){return F}),n.d(t,"setTouchAction",function(){return M}),n.d(t,"prevent",function(){return N}),n.d(t,"resetMouseCanceller",function(){return U}),n.d(t,"findOriginalTarget",function(){return V}),n.d(t,"add",function(){return z}),n.d(t,"remove",function(){return K}),n(18);var i=n(10),r=n(20),a=n(28),o="string"==typeof document.head.style.touchAction,s="__polymerGestures",c="__polymerGesturesHandled",l="__polymerGesturesTouchAction",u=["mousedown","mousemove","mouseup","click"],d=[0,1,4,2],h=function(){try{return 1===new MouseEvent("test",{buttons:1}).buttons}catch(e){return!1}}();function p(e){return-1<u.indexOf(e)}var m=!1;function f(e){if(!p(e)&&"touchend"!==e)return o&&m&&a.a?{passive:!0}:void 0}!function(){try{var e=Object.defineProperty({},"passive",{get:function(){m=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){}}();var g=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/),v=[],y={button:!0,input:!0,keygen:!0,meter:!0,output:!0,textarea:!0,progress:!0,select:!0},_={button:!0,command:!0,fieldset:!0,input:!0,keygen:!0,optgroup:!0,option:!0,select:!0,textarea:!0};function b(e){var t=Array.prototype.slice.call(e.labels||[]);if(!t.length){t=[];var n=e.getRootNode();if(e.id)for(var i=n.querySelectorAll("label[for = ".concat(e.id,"]")),r=0;r<i.length;r++)t.push(i[r])}return t}var C=function(e){var t,n=e.sourceCapabilities;if((!n||n.firesTouchEvents)&&(e[c]={skip:!0},"click"===e.type)){var i=!1,r=e.composedPath&&e.composedPath();if(r)for(var a=0;a<r.length;a++){if(r[a].nodeType===Node.ELEMENT_NODE)if("label"===r[a].localName)v.push(r[a]);else if(t=r[a],y[t.localName])for(var o=b(r[a]),s=0;s<o.length;s++)i=i||-1<v.indexOf(o[s]);if(r[a]===w.mouse.target)return}if(i)return;e.preventDefault(),e.stopPropagation()}};function k(e){for(var t,n=g?["click"]:u,i=0;i<n.length;i++)t=n[i],e?(v.length=0,document.addEventListener(t,C,!0)):document.removeEventListener(t,C,!0)}function S(e){var t=e.type;if(!p(t))return!1;if("mousemove"!==t)return 0===(void 0===e.button?0:e.button);var n=void 0===e.buttons?1:e.buttons;return e instanceof window.MouseEvent&&!h&&(n=d[e.which]||0),Boolean(1&n)}var w={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};function P(e,t,n){e.movefn=t,e.upfn=n,document.addEventListener("mousemove",t),document.addEventListener("mouseup",n)}function E(e){document.removeEventListener("mousemove",e.movefn),document.removeEventListener("mouseup",e.upfn),e.movefn=null,e.upfn=null}document.addEventListener("touchend",function(e){w.mouse.mouseIgnoreJob||k(!0),w.mouse.target=e.composedPath()[0],w.mouse.mouseIgnoreJob=r.a.debounce(w.mouse.mouseIgnoreJob,i.b.after(2500),function(){k(),w.mouse.target=null,w.mouse.mouseIgnoreJob=null})},!!m&&{passive:!0});var T={},O=[];function A(e,t){for(var n=document.elementFromPoint(e,t),i=n;i&&i.shadowRoot&&!window.ShadyDOM&&i!==(i=i.shadowRoot.elementFromPoint(e,t));)i&&(n=i);return n}function L(e){if(e.composedPath){var t=e.composedPath();return 0<t.length?t[0]:e.target}return e.target}function x(e){var t,n=e.type,i=e.currentTarget[s];if(i){var r=i[n];if(r){if(!e[c]&&(e[c]={},"touch"===n.slice(0,5))){var a=(e=e).changedTouches[0];if("touchstart"===n&&1===e.touches.length&&(w.touch.id=a.identifier),w.touch.id!==a.identifier)return;o||"touchstart"!==n&&"touchmove"!==n||function(e){var t=e.changedTouches[0],n=e.type;if("touchstart"===n)w.touch.x=t.clientX,w.touch.y=t.clientY,w.touch.scrollDecided=!1;else if("touchmove"===n){if(w.touch.scrollDecided)return;w.touch.scrollDecided=!0;var i=function(e){var t="auto",n=e.composedPath&&e.composedPath();if(n)for(var i,r=0;r<n.length;r++)if((i=n[r])[l]){t=i[l];break}return t}(e),r=!1,a=Math.abs(w.touch.x-t.clientX),o=Math.abs(w.touch.y-t.clientY);e.cancelable&&("none"===i?r=!0:"pan-x"===i?r=a<o:"pan-y"===i&&(r=o<a)),r?e.preventDefault():N("track")}}(e)}if(!(t=e[c]).skip){for(var u,d=0;d<O.length;d++)r[(u=O[d]).name]&&!t[u.name]&&u.flow&&-1<u.flow.start.indexOf(e.type)&&u.reset&&u.reset();for(var h,p=0;p<O.length;p++)r[(h=O[p]).name]&&!t[h.name]&&(t[h.name]=!0,h[n](e))}}}}function R(e,t,n){return!!T[t]&&(function(e,t,n){var i=T[t],r=i.deps,a=i.name,o=e[s];o||(e[s]=o={});for(var c,l,u=0;u<r.length;u++)c=r[u],g&&p(c)&&"click"!==c||((l=o[c])||(o[c]=l={_count:0}),0===l._count&&e.addEventListener(c,x,f(c)),l[a]=(l[a]||0)+1,l._count=(l._count||0)+1);e.addEventListener(t,n),i.touchAction&&M(e,i.touchAction)}(e,t,n),!0)}function I(e,t,n){return!!T[t]&&(function(e,t,n){var i=T[t],r=i.deps,a=i.name,o=e[s];if(o)for(var c,l,u=0;u<r.length;u++)(l=o[c=r[u]])&&l[a]&&(l[a]=(l[a]||1)-1,l._count=(l._count||1)-1,0===l._count&&e.removeEventListener(c,x,f(c)));e.removeEventListener(t,n)}(e,t,n),!0)}function F(e){O.push(e);for(var t=0;t<e.emits.length;t++)T[e.emits[t]]=e}function M(e,t){o&&i.a.run(function(){e.style.touchAction=t}),e[l]=t}function D(e,t,n){var i=new Event(t,{bubbles:!0,cancelable:!0,composed:!0});if(i.detail=n,e.dispatchEvent(i),i.defaultPrevented){var r=n.preventer||n.sourceEvent;r&&r.preventDefault&&r.preventDefault()}}function N(e){var t=function(e){for(var t,n=0;n<O.length;n++){t=O[n];for(var i=0;i<t.emits.length;i++)if(t.emits[i]===e)return t}return null}(e);t.info&&(t.info.prevent=!0)}function U(){w.mouse.mouseIgnoreJob&&w.mouse.mouseIgnoreJob.flush()}function j(e,t,n,i){t&&D(t,e,{x:n.clientX,y:n.clientY,sourceEvent:n,preventer:i,prevent:function(e){return N(e)}})}function H(e,t,n){if(e.prevent)return!1;if(e.started)return!0;var i=Math.abs(e.x-t),r=Math.abs(e.y-n);return 5<=i||5<=r}function B(e,t,n){if(t){var i,r=e.moves[e.moves.length-2],a=e.moves[e.moves.length-1],o=a.x-e.x,s=a.y-e.y,c=0;r&&(i=a.x-r.x,c=a.y-r.y),D(t,"track",{state:e.state,x:n.clientX,y:n.clientY,dx:o,dy:s,ddx:i,ddy:c,sourceEvent:n,hover:function(){return A(n.clientX,n.clientY)}})}}function q(e,t,n){var i=Math.abs(t.clientX-e.x),r=Math.abs(t.clientY-e.y),a=L(n||t);!a||_[a.localName]&&a.hasAttribute("disabled")||(isNaN(i)||isNaN(r)||i<=25&&r<=25||function(e){if("click"!==e.type)return!1;if(0===e.detail)return!0;var t=L(e);if(!t.nodeType||t.nodeType!==Node.ELEMENT_NODE)return!0;var n=t.getBoundingClientRect(),i=e.pageX,r=e.pageY;return!(i>=n.left&&i<=n.right&&r>=n.top&&r<=n.bottom)}(t))&&(e.prevent||D(a,"tap",{x:t.clientX,y:t.clientY,sourceEvent:t,preventer:n}))}F({name:"downup",deps:["mousedown","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["down","up"],info:{movefn:null,upfn:null},reset:function(){E(this.info)},mousedown:function(e){if(S(e)){var t=L(e),n=this;P(this.info,function(e){S(e)||(j("up",t,e),E(n.info))},function(e){S(e)&&j("up",t,e),E(n.info)}),j("down",t,e)}},touchstart:function(e){j("down",L(e),e.changedTouches[0],e)},touchend:function(e){j("up",L(e),e.changedTouches[0],e)}}),F({name:"track",touchAction:"none",deps:["mousedown","touchstart","touchmove","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["track"],info:{x:0,y:0,state:"start",started:!1,moves:[],addMove:function(e){2<this.moves.length&&this.moves.shift(),this.moves.push(e)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state="start",this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,E(this.info)},mousedown:function(e){if(S(e)){var t=L(e),n=this,i=function(e){var i=e.clientX,r=e.clientY;H(n.info,i,r)&&(n.info.state=n.info.started?"mouseup"===e.type?"end":"track":"start","start"===n.info.state&&N("tap"),n.info.addMove({x:i,y:r}),S(e)||(n.info.state="end",E(n.info)),t&&B(n.info,t,e),n.info.started=!0)};P(this.info,i,function(e){n.info.started&&i(e),E(n.info)}),this.info.x=e.clientX,this.info.y=e.clientY}},touchstart:function(e){var t=e.changedTouches[0];this.info.x=t.clientX,this.info.y=t.clientY},touchmove:function(e){var t=L(e),n=e.changedTouches[0],i=n.clientX,r=n.clientY;H(this.info,i,r)&&("start"===this.info.state&&N("tap"),this.info.addMove({x:i,y:r}),B(this.info,t,n),this.info.state="track",this.info.started=!0)},touchend:function(e){var t=L(e),n=e.changedTouches[0];this.info.started&&(this.info.state="end",this.info.addMove({x:n.clientX,y:n.clientY}),B(this.info,t,n))}}),F({name:"tap",deps:["mousedown","click","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["click","touchend"]},emits:["tap"],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1},mousedown:function(e){S(e)&&(this.info.x=e.clientX,this.info.y=e.clientY)},click:function(e){S(e)&&q(this.info,e)},touchstart:function(e){var t=e.changedTouches[0];this.info.x=t.clientX,this.info.y=t.clientY},touchend:function(e){q(this.info,e.changedTouches[0],e)}});var V=L,z=R,K=I},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n(18);var i=!1,r=[],a=[];function o(){i=!0,requestAnimationFrame(function(){i=!1,function(e){for(;e.length;)s(e.shift())}(r),setTimeout(function(){!function(e){for(var t=0,n=e.length;t<n;t++)s(e.shift())}(a)})})}function s(e){var t=e[0],n=e[1],i=e[2];try{n.apply(t,i)}catch(e){setTimeout(function(){throw e})}}function c(e,t,n){i||o(),a.push([e,t,n])}},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var i=n(3),r=n.n(i),a=n(2),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(4),h=n.n(d),p=n(6),m=n.n(p),f=(n(18),n(21)),g=n(12),v=Object(f.a)(function(e){return function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return m()(t,e),o()(t,[{key:"_addEventListenerToNode",value:function(e,n,i){g.addListener(e,n,i)||h()(u()(t.prototype),"_addEventListenerToNode",this).call(this,e,n,i)}},{key:"_removeEventListenerFromNode",value:function(e,n,i){g.removeListener(e,n,i)||h()(u()(t.prototype),"_removeEventListenerFromNode",this).call(this,e,n,i)}}]),t}(e)})},function(e,t,n){"use strict";function i(e){return 0<=e.indexOf(".")}function r(e){var t=e.indexOf(".");return-1===t?e:e.slice(0,t)}function a(e,t){return 0===e.indexOf(t+".")}function o(e,t){return 0===t.indexOf(e+".")}function s(e,t,n){return t+n.slice(e.length)}function c(e,t){return e===t||a(e,t)||o(e,t)}function l(e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++)for(var i=e[n].toString().split("."),r=0;r<i.length;r++)t.push(i[r]);return t.join(".")}return e}function u(e){return Array.isArray(e)?l(e).split("."):e.toString().split(".")}function d(e,t,n){for(var i=e,r=u(t),a=0;a<r.length;a++){if(!i)return;i=i[r[a]]}return n&&(n.path=r.join(".")),i}function h(e,t,n){var i=e,r=u(t),a=r[r.length-1];if(1<r.length){for(var o=0;o<r.length-1;o++)if(!(i=i[r[o]]))return;i[a]=n}else i[t]=n;return r.join(".")}n.d(t,"d",function(){return i}),n.d(t,"g",function(){return r}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"i",function(){return s}),n.d(t,"e",function(){return c}),n.d(t,"f",function(){return l}),n.d(t,"a",function(){return d}),n.d(t,"h",function(){return h}),n(18)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(3),r=n.n(i),a=n(2),o=n.n(a),s=n(11),c=function(){function e(t,n){r()(this,e),this.elementTemplate=t.node||t,this.type=t.type,this.name=t.localName,this.parent=t.parentNode||n,this.previousSibling=t.previousSibling,this.nextSibling=t.nextSibling;try{t.shadowRoot&&t.shadowRoot.parentNode&&t.shadowRoot.parentNode.removeChild(this.elementTemplate)}catch(t){console.error(t)}}return o()(e,[{key:"insert",value:function(e,t,n,i){var r=void 0!==e&&(void 0!==e.parentElement||e.parentNode);e=e||(this.elementTemplate.clone?this.elementTemplate.clone():this.elementTemplate.cloneNode(!0)),r||(this.nextSibling?this.parent.insertBefore(e,this.nextSibling):this.parent.appendChild(e)),!0!==i&&Object(s.b)();try{t&&setTimeout(function(){return t(e,n)})}catch(e){console.error(e)}}},{key:"insertAll",value:function(e,t,n,i,r){for(var a=Math.max(e.length,t.length),o=0;o<a;o++){var s=e[o],c=t[o];this.insert(s,n,c,r)}setTimeout(function(){try{i&&i()}catch(e){console.error(e)}})}}]),e}()},function(e,t){window.JSCompiler_renameProperty=function(e){return e}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=i=function(e){return n(e)}:e.exports=i=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},i(t)}e.exports=i},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(3),r=n.n(i),a=n(2),o=n.n(a),s=(n(18),n(21),n(10),function(){function e(){r()(this,e),this._asyncModule=null,this._callback=null,this._timer=null}return o()(e,[{key:"setConfig",value:function(e,t){var n=this;this._asyncModule=e,this._callback=t,this._timer=this._asyncModule.run(function(){n._timer=null,n._callback()})}},{key:"cancel",value:function(){this.isActive()&&(this._asyncModule.cancel(this._timer),this._timer=null)}},{key:"flush",value:function(){this.isActive()&&(this.cancel(),this._callback())}},{key:"isActive",value:function(){return null!=this._timer}}],[{key:"debounce",value:function(t,n,i){return t instanceof e?t.cancel():t=new e,t.setConfig(n,i),t}}]),e}())},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n(18);var i=0,r=function(e){var t=e.__mixinApplications;t||(t=new WeakMap,e.__mixinApplications=t);var n=i++;return function(i){var r=i.__mixinSet;if(r&&r[n])return i;var a=t,o=a.get(i);o||(o=e(i),a.set(i,o));var s=Object.create(o.__mixinSet||r||null);return s[n]=!0,o.__mixinSet=s,o}}},function(e,t,n){"use strict";n.r(t),n.d(t,"RecordList",function(){return T});var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(2),c=n.n(s),l=n(5),u=n.n(l),d=n(1),h=n.n(d),p=n(4),m=n.n(p),f=n(6),g=n.n(f),v=n(7),y=n(20),_=n(10),b=n(14),C=n(11),k=n(0),S=n(17),w=n(9),P=n(30);function E(){var e=r()(["<style>:host{display:block}#infiniteBorder{height:1px;width:1px;position:absolute}</style><slot></slot>"]);return E=function(){return e},e}var T=function(e){function t(){return o()(this,t),u()(this,h()(t).apply(this,arguments))}return g()(t,e),c()(t,[{key:"_recordsChanged",value:function(e,t){var n=this;if(e&&0<e.length){if(t&&t.length===e.length){var i=!0;if(e.forEach(function(e,n){var r=e,a=t[n];r.id!==a.id&&(i=!1)}),i&&!0!==this.stampAlways)return}t=!0===this.pageLoading?[]:this.querySelectorAll(P.Record.is),this.insertElementHelper.insertAll(t,e,function(e,t){!0===n.pageLoading&&n.page&&(t.record.page=n.page),e.stampAlways=n.stampAlways,e.isRecommendation=n.isRecommendation,e.recordData=t},function(){Object(C.b)(),n.activateStateOne(),Object(b.a)(n,function(){n.dispatchEvent(new CustomEvent("dom-updated",{bubbles:!0,composed:!0})),n.infiniteScrolling&&(n.pageLoading=!1,n.page=void 0)})})}else this.activateStateTwo()}},{key:"ready",value:function(){if(m()(h()(t.prototype),"ready",this).call(this),this.attributeName="display",this.stateTwoValue="none",(!this.records||!this.records.length||this.records.length<=0)&&this.activateStateTwo(),this._templateRecord=this._templateRecord||this.querySelector(P.Record.is),this._templateRecord){this.insertElementHelper=new S.a(this._templateRecord,this);var e=this._templateRecord.parentNode;e&&e.removeChild(this._templateRecord)}}},{key:"connectedCallback",value:function(){m()(h()(t.prototype),"connectedCallback",this).call(this),"true"!==this.subscribe||this.subscribtionKey||(this.subscribtionKey=k.a.communication.ResultDispatcher.subscribe("records",this._recordsChanged,this))}},{key:"disconnectedCallback",value:function(){m()(h()(t.prototype),"disconnectedCallback",this).call(this),this.subscribtionKey&&(k.a.communication.ResultDispatcher.unsubscribe("records",this.subscribtionKey),this.subscribtionKey=null),this._handler&&(window.removeEventListener("DOMContentLoaded",this._handler,!1),window.removeEventListener("load",this._handler,!1),window.removeEventListener("scroll",this._handler,!1),window.removeEventListener("resize",this._handler,!1))}},{key:"loadNextPage",value:function(){if(!this.pageLoading){var e=k.a.communication.FFCommunicationEventAggregator.currentSearchResult,t=e?e.paging.nextLink:void 0;if(t){this.pageLoading=!0,this.page=t.number;var n={type:"paging",number:t.number,topics:function(){return["result","records"]}};k.a.communication.FFCommunicationEventAggregator.addFFEvent(n)}}}},{key:"isElementInViewport",value:function(e){var t=e.getBoundingClientRect();return 0<=t.top&&0<=t.left&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}},{key:"onVisibilityChange",value:function(e,t){var n,i=this;return function(){var r=i.isElementInViewport(e);r!=n&&1==(n=r)&&"function"==typeof t&&t()}}},{key:"_infiniteScrollingChanged",value:function(e,t){if(e)this._addInfiniteBorder();else{var n=this.querySelector("#infiniteBorder");n&&this.removeChild(n)}}},{key:"_addInfiniteBorder",value:function(){var e=this,t=document.createElement("div");t.setAttribute("id","infiniteBorder"),t.style.marginTop="".concat(this.infiniteScrollMargin,"px"),this.appendChild(t),Object(C.b)(),this._handler=this.onVisibilityChange(t,function(){e.infiniteScrolling&&(e._debounceJob=y.a.debounce(e._debounceJob,_.b.after(e.infiniteDebounceDelay),function(){e.loadNextPage(),console.log("Load next page...")}))}),window.addEventListener("DOMContentLoaded",this._handler,!1),window.addEventListener("load",this._handler,!1),window.addEventListener("scroll",this._handler,!1),window.addEventListener("resize",this._handler,!1)}}],[{key:"is",get:function(){return"ff-record-list"}},{key:"properties",get:function(){return{records:{type:Array,observer:"_recordsChanged"},subscribe:{type:String,value:"true"},isRecommendation:{type:Boolean},infiniteScrolling:{type:Boolean,observer:"_infiniteScrollingChanged"},infiniteDebounceDelay:{type:Number,value:32},infiniteScrollMargin:{type:Number,value:0},stampAlways:{type:Boolean}}}},{key:"template",get:function(){return Object(v.b)(E())}}]),t}(Object(w.a)(["CssAttributeToggle","RemoveUnresolvedAttribute"],v.a));window.customElements.define(T.is,T)},function(e,t,n){"use strict";var i=n(3),r=n.n(i),a=n(2),o=n.n(a),s=n(26),c=function e(){r()(this,e),this.start=0,this.end=0,this.previous=null,this.parent=null,this.rules=null,this.parsedCssText="",this.cssText="",this.atRule=!1,this.type=0,this.keyframesName="",this.selector="",this.parsedSelector=""};function l(e){return function e(t,n){var i=n.substring(t.start,t.end-1);if(t.parsedCssText=t.cssText=i.trim(),t.parent){var r=t.previous?t.previous.end:t.parent.start;i=(i=(i=(i=n.substring(r,t.start-1)).replace(/\\([0-9a-f]{1,6})\s/gi,function(){for(var e=arguments[1],t=6-e.length;t--;)e="0"+e;return"\\"+e})).replace(p.multipleSpaces," ")).substring(i.lastIndexOf(";")+1);var a=t.parsedSelector=t.selector=i.trim();t.atRule=0===a.indexOf(g),t.atRule?0===a.indexOf(f)?t.type=u.MEDIA_RULE:a.match(p.keyframesRule)&&(t.type=u.KEYFRAMES_RULE,t.keyframesName=t.selector.split(p.multipleSpaces).pop()):0===a.indexOf(m)?t.type=u.MIXIN_RULE:t.type=u.STYLE_RULE}var o=t.rules;if(o)for(var s,c=0,l=o.length;c<l&&(s=o[c]);c++)e(s,n);return t}(function(e){var t=new c;t.start=0,t.end=e.length;for(var n=t,i=0,r=e.length;i<r;i++)if(e[i]===d){n.rules||(n.rules=[]);var a=n,o=a.rules[a.rules.length-1]||null;(n=new c).start=i+1,n.parent=a,n.previous=o,a.rules.push(n)}else e[i]===h&&(n.end=i+1,n=n.parent||t);return t}(e=e.replace(p.comments,"").replace(p.port,"")),e)}var u={STYLE_RULE:1,KEYFRAMES_RULE:7,MEDIA_RULE:4,MIXIN_RULE:1e3},d="{",h="}",p={comments:/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,port:/@import[^;]*;/gim,customProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,mixinProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,mixinApply:/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,varApply:/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,keyframesRule:/^@[^\s]*keyframes/,multipleSpaces:/\s+/g},m="--",f="@media",g="@",v=n(25),y=new Set;function _(e){var t=e.textContent;if(!y.has(t)){y.add(t);var n=e.cloneNode(!0);document.head.appendChild(n)}}function b(e,t){return e?("string"==typeof e&&(e=l(e)),t&&k(e,t),function e(t,n){var i,r,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",o="";if(t.cssText||t.rules){var s=t.rules;if(!s||(r=s[0],Boolean(r)&&Boolean(r.selector)&&0===r.selector.indexOf(m)))(o=(o=n?t.cssText:(i=t.cssText,(i=i.replace(p.customProp,"").replace(p.mixinProp,"")).replace(p.mixinApply,"").replace(p.varApply,""))).trim())&&(o="  "+o+"\n");else for(var c,l=0,u=s.length;l<u&&(c=s[l]);l++)o=e(c,n,o)}return o&&(t.selector&&(a+=t.selector+" "+d+"\n"),a+=o,t.selector&&(a+=h+"\n\n")),a}(e,s.a)):""}function C(e){return!e.__cssRules&&e.textContent&&(e.__cssRules=l(e.textContent)),e.__cssRules||null}function k(e,t,n,i){if(e){var r=!1,a=e.type;if(i&&a===u.MEDIA_RULE){var o=e.selector.match(v.a);o&&(window.matchMedia(o[1]).matches||(r=!0))}a===u.STYLE_RULE?t(e):n&&a===u.KEYFRAMES_RULE?n(e):a===u.MIXIN_RULE&&(r=!0);var s=e.rules;if(s&&!r)for(var c,l=0,d=s.length;l<d&&(c=s[l]);l++)k(c,t,n,i)}}var S="css-build";function w(e){return""!==function(e){if(void 0===e.__cssBuild){var t=e.getAttribute(S);if(t)e.__cssBuild=t;else{var n=function(e){var t="template"===e.localName?e.content.firstChild:e.firstChild;if(t instanceof Comment){var n=t.textContent.trim().split(":");if(n[0]===S)return n[1]}return""}(e);""!==n&&(r="template"===(i=e).localName?i.content.firstChild:i.firstChild).parentNode.removeChild(r),e.__cssBuild=n}}var i,r;return e.__cssBuild||""}(e)}var P=n(29),E=/;\s*/m,T=/^\s*(initial)|(inherit)\s*$/,O=/\s*!important/,A=function(){function e(){r()(this,e),this._map={}}return o()(e,[{key:"set",value:function(e,t){e=e.trim(),this._map[e]={properties:t,dependants:{}}}},{key:"get",value:function(e){return e=e.trim(),this._map[e]||null}}]),e}(),L=null,x=function(){function e(){r()(this,e),this._currentElement=null,this._measureElement=null,this._map=new A}return o()(e,[{key:"detectMixin",value:function(e){return Object(P.a)(e)}},{key:"gatherStyles",value:function(e){var t=function(e){for(var t=[],n=e.querySelectorAll("style"),i=0;i<n.length;i++){var r=n[i];r.hasAttribute("shady-unscoped")?s.b||(_(r),r.parentNode.removeChild(r)):(t.push(r.textContent),r.parentNode.removeChild(r))}return t.join("").trim()}(e.content);if(t){var n=document.createElement("style");return n.textContent=t,e.content.insertBefore(n,e.content.firstChild),n}return null}},{key:"transformTemplate",value:function(e,t){void 0===e._gatheredStyle&&(e._gatheredStyle=this.gatherStyles(e));var n=e._gatheredStyle;return n?this.transformStyle(n,t):null}},{key:"transformStyle",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=C(e);return this.transformRules(n,t),e.textContent=b(n),n}},{key:"transformCustomStyle",value:function(e){var t=this,n=C(e);return k(n,function(e){":root"===e.selector&&(e.selector="html"),t.transformRule(e)}),e.textContent=b(n),n}},{key:"transformRules",value:function(e,t){var n=this;this._currentElement=t,k(e,function(e){n.transformRule(e)}),this._currentElement=null}},{key:"transformRule",value:function(e){e.cssText=this.transformCssText(e.parsedCssText),":root"===e.selector&&(e.selector=":host > *")}},{key:"transformCssText",value:function(e){var t=this;return e=e.replace(v.c,function(e,n,i,r){return t._produceCssProperties(e,n,i,r)}),this._consumeCssProperties(e)}},{key:"_getInitialValueForProperty",value:function(e){return this._measureElement||(this._measureElement=document.createElement("meta"),this._measureElement.setAttribute("apply-shim-measure",""),this._measureElement.style.all="initial",document.head.appendChild(this._measureElement)),window.getComputedStyle(this._measureElement).getPropertyValue(e)}},{key:"_consumeCssProperties",value:function(e){for(var t=null;t=v.b.exec(e);){var n=t[0],i=t[1],r=t.index,a=r+n.indexOf("@apply"),o=r+n.length,s=e.slice(0,a),c=e.slice(o),l=this._cssTextToMap(s),u=this._atApplyToCssProperties(i,l);e="".concat(s).concat(u).concat(c),v.b.lastIndex=r+u.length}return e}},{key:"_atApplyToCssProperties",value:function(e,t){e=e.replace(E,"");var n=[],i=this._map.get(e);if(i||(this._map.set(e,{}),i=this._map.get(e)),i){var r,a,o;this._currentElement&&(i.dependants[this._currentElement]=!0);var s=i.properties;for(r in s)a=[r,": var(",e,"_-_",r],(o=t&&t[r])&&a.push(",",o.replace(O,"")),a.push(")"),O.test(s[r])&&a.push(" !important"),n.push(a.join(""))}return n.join("; ")}},{key:"_replaceInitialOrInherit",value:function(e,t){var n=T.exec(t);return n&&(t=n[1]?this._getInitialValueForProperty(e):"apply-shim-inherit"),t}},{key:"_cssTextToMap",value:function(e){for(var t,n,i,r,a=e.split(";"),o={},s=0;s<a.length;s++)(i=a[s])&&1<(r=i.split(":")).length&&(t=r[0].trim(),n=this._replaceInitialOrInherit(t,r.slice(1).join(":")),o[t]=n);return o}},{key:"_invalidateMixinEntry",value:function(e){if(L)for(var t in e.dependants)t!==this._currentElement&&L(t)}},{key:"_produceCssProperties",value:function(e,t,n,i){var r=this;if(n&&function e(t,n){var i=t.indexOf("var(");if(-1===i)return n(t,"","","");var r=function(e,t){for(var n=0,i=t,r=e.length;i<r;i++)if("("===e[i])n++;else if(")"===e[i]&&0==--n)return i;return-1}(t,i+3),a=t.substring(i+4,r),o=t.substring(0,i),s=e(t.substring(r+1),n),c=a.indexOf(",");return-1===c?n(o,a.trim(),"",s):n(o,a.substring(0,c).trim(),a.substring(c+1).trim(),s)}(n,function(e,t){t&&r._map.get(t)&&(i="@apply ".concat(t,";"))}),!i)return e;var a=this._consumeCssProperties(""+i),o=e.slice(0,e.indexOf("--")),s=this._cssTextToMap(a),c=s,l=this._map.get(t),u=l&&l.properties;u?c=Object.assign(Object.create(u),s):this._map.set(t,c);var d,h,p=[],m=!1;for(d in c)void 0===(h=s[d])&&(h="initial"),!u||d in u||(m=!0),p.push("".concat(t).concat("_-_").concat(d,": ").concat(h));return m&&this._invalidateMixinEntry(l),l&&(l.properties=c),n&&(o="".concat(e,";").concat(o)),"".concat(o).concat(p.join("; "),";")}}]),e}();x.prototype.detectMixin=x.prototype.detectMixin,x.prototype.transformStyle=x.prototype.transformStyle,x.prototype.transformCustomStyle=x.prototype.transformCustomStyle,x.prototype.transformRules=x.prototype.transformRules,x.prototype.transformRule=x.prototype.transformRule,x.prototype.transformTemplate=x.prototype.transformTemplate,x.prototype._separator="_-_",Object.defineProperty(x.prototype,"invalidCallback",{get:function(){return L},set:function(e){L=e}});var R=x,I={},F="_applyShimCurrentVersion",M="_applyShimNextVersion",D="_applyShimValidatingVersion",N=Promise.resolve();function U(e){var t,n=I[e];n&&((t=n)[F]=t[F]||0,t[D]=t[D]||0,t[M]=(t[M]||0)+1)}function j(e){return e[F]===e[M]}n(41);var H=new R,B=function(){function e(){r()(this,e),this.customStyleInterface=null,H.invalidCallback=U}return o()(e,[{key:"ensure",value:function(){var e=this;this.customStyleInterface||(this.customStyleInterface=window.ShadyCSS.CustomStyleInterface,this.customStyleInterface&&(this.customStyleInterface.transformCallback=function(e){H.transformCustomStyle(e)},this.customStyleInterface.validateCallback=function(){requestAnimationFrame(function(){e.customStyleInterface.enqueued&&e.flushCustomStyles()})}))}},{key:"prepareTemplate",value:function(e,t){if(this.ensure(),!w(e)){I[t]=e;var n=H.transformTemplate(e,t);e._styleAst=n}}},{key:"flushCustomStyles",value:function(){if(this.ensure(),this.customStyleInterface){var e=this.customStyleInterface.processStyles();if(this.customStyleInterface.enqueued){for(var t=0;t<e.length;t++){var n=e[t],i=this.customStyleInterface.getStyleForCustomStyle(n);i&&H.transformCustomStyle(i)}this.customStyleInterface.enqueued=!1}}}},{key:"styleSubtree",value:function(e,t){if(this.ensure(),t&&Object(P.c)(e,t),e.shadowRoot){this.styleElement(e);for(var n=e.shadowRoot.children||e.shadowRoot.childNodes,i=0;i<n.length;i++)this.styleSubtree(n[i])}else for(var r=e.children||e.childNodes,a=0;a<r.length;a++)this.styleSubtree(r[a])}},{key:"styleElement",value:function(e){this.ensure();var t,n,i,r,a=(n=(t=e).localName,r=i="",n?i=-1<n.indexOf("-")?n:(r=n,t.getAttribute&&t.getAttribute("is")||""):(i=t.is,r=t.extends),{is:i,typeExtension:r}).is,o=I[a];if((!o||!w(o))&&o&&!j(o)){(function(e){return!j(e)&&e[D]===e[M]})(o)||(this.prepareTemplate(o,a),function(e){e[D]=e[M],e._validating||(e._validating=!0,N.then(function(){e[F]=e[M],e._validating=!1}))}(o));var s=e.shadowRoot;if(s){var c=s.querySelector("style");c&&(c.__cssRules=o._styleAst,c.textContent=b(o._styleAst))}}}},{key:"styleDocument",value:function(e){this.ensure(),this.styleSubtree(document.body,e)}}]),e}();if(!window.ShadyCSS||!window.ShadyCSS.ScopingShim){var q=new B,V=window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface;window.ShadyCSS={prepareTemplate:function(e,t,n){q.flushCustomStyles(),q.prepareTemplate(e,t)},prepareTemplateStyles:function(e,t,n){this.prepareTemplate(e,t,n)},prepareTemplateDom:function(e,t){},styleSubtree:function(e,t){q.flushCustomStyles(),q.styleSubtree(e,t)},styleElement:function(e){q.flushCustomStyles(),q.styleElement(e)},styleDocument:function(e){q.flushCustomStyles(),q.styleDocument(e)},getComputedStyleValue:function(e,t){return Object(P.b)(e,t)},flushCustomStyles:function(){q.flushCustomStyles()},nativeCss:s.a,nativeShadow:s.b},V&&(window.ShadyCSS.CustomStyleInterface=V)}window.ShadyCSS.ApplyShim=H},function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"b",function(){return c}),n.d(t,"a",function(){return l}),n(18);var i,r,a=/(url\()([^)]*)(\))/g,o=/(^\/)|(^#)|(^[\w-\d]*:)/;function s(e,t){if(e&&o.test(e))return e;if(void 0===i){i=!1;try{var n=new URL("b","http://a");n.pathname="c%20d",i="http://a/c%20d"===n.href}catch(e){}}return t||(t=document.baseURI||window.location.href),i?new URL(e,t).href:(r||((r=document.implementation.createHTMLDocument("temp")).base=r.createElement("base"),r.head.appendChild(r.base),r.anchor=r.createElement("a"),r.body.appendChild(r.anchor)),r.base.href=t,r.anchor.href=e,r.anchor.href||e)}function c(e,t){return e.replace(a,function(e,n,i,r){return n+"'"+s(i.replace(/["']/g,""),t)+"'"+r})}function l(e){return e.substring(0,e.lastIndexOf("/")+1)}},function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});var i=/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,r=/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,a=/@media\s(.*)/},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o});var i,r=!(window.ShadyDOM&&window.ShadyDOM.inUse);function a(e){i=(!e||!e.shimcssproperties)&&(r||Boolean(!navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)&&window.CSS&&CSS.supports&&CSS.supports("box-shadow","0 0 0 var(--foo)")))}window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?i=window.ShadyCSS.nativeCss:window.ShadyCSS?(a(window.ShadyCSS),window.ShadyCSS=void 0):a(window.WebComponents&&window.WebComponents.flags);var o=i},function(e,t,n){"use strict";n.d(t,"a",function(){return k});var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(2),c=n.n(s),l=n(5),u=n.n(l),d=n(1),h=n.n(d),p=n(4),m=n.n(p),f=n(6),g=n.n(f),v=n(7),y=n(15),_=n(12),b=(n(23),n(9));function C(){var e=r()(['<style>:host{display:inline-block}.cursor{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;@apply(--paging-item-cursor-mixin);}</style><div id="pageItemContainer" class="cursor"><slot></slot></div>']);return C=function(){return e},e}var k=function(e){function t(){return o()(this,t),u()(this,h()(t).apply(this,arguments))}return g()(t,e),c()(t,[{key:"ready",value:function(){m()(h()(t.prototype),"ready",this).call(this),this.attributeName="display",this.stateTwoValue="none",this.activateStateTwo()}},{key:"connectedCallback",value:function(){var e=this;m()(h()(t.prototype),"connectedCallback",this).call(this),_.addListener(this.$.pageItemContainer,"tap",function(t){return e._taped(t)})}},{key:"disconnectedCallback",value:function(){var e=this;m()(h()(t.prototype),"disconnectedCallback",this).call(this),_.removeListener(this.$.pageItemContainer,"tap",function(t){return e._taped(t)})}},{key:"clone",value:function(){var e=document.createElement(t.is);return e.innerHTML=this.innerHTML,e.templateString=this.templateString,e}},{key:"_pppItemChanged",value:function(e){e?(!0===(this.model=e).currentPage&&!0!==this.productsPerPageItem.showSelected?(this.classList.add("selected"),this.selected=!0):(this.classList.remove("selected"),this.selected=!1),this.classList.remove("disabled"),this.activateStateOne()):(this.classList.add("disabled"),this.activateStateTwo())}},{key:"_taped",value:function(e){this.productsPerPageItem&&!this.productsPerPageItem.currentPage&&"true"!==this.showOnly&&factfinder.communication.FFCommunicationEventAggregator.addFFEvent({type:"paging",number:this.productsPerPageItem.number})}}],[{key:"is",get:function(){return"ff-paging-item"}},{key:"properties",get:function(){return{type:{type:String,value:"pageLink",reflectToAttribute:!0},productsPerPageItem:{type:Object,observer:"_pppItemChanged"},showSelected:{type:Boolean},showOnly:{type:"String",reflectToAttribute:!0}}}},{key:"template",get:function(){return Object(v.b)(C())}}]),t}(Object(b.a)(["LightDOMTemplate","CssAttributeToggle","RemoveUnresolvedAttribute"],Object(y.a)(v.a)));window.customElements.define(k.is,k)},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return o}),n(18);var i=n(24),r=(window.ShadyDOM,Boolean(!window.ShadyCSS||window.ShadyCSS.nativeCss),window.customElements.polyfillWrapFlushCallback,Object(i.a)(document.baseURI||window.location.href)),a=void 0,o=!1},function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o});var i=n(25);function r(e,t){for(var n in t)null===n?e.style.removeProperty(n):e.style.setProperty(n,t[n])}function a(e,t){var n=window.getComputedStyle(e).getPropertyValue(t);return n?n.trim():""}function o(e){var t=i.b.test(e)||i.c.test(e);return i.b.lastIndex=0,i.c.lastIndex=0,t}},function(e,t,n){"use strict";n.r(t),n.d(t,"Record",function(){return _});var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(2),h=n.n(d),p=n(6),m=n.n(p),f=n(7),g=n(0),v=n(9);function y(){var e=r()(["<style>:host{display:inline-block;vertical-align:top}</style><slot></slot>"]);return y=function(){return e},e}var _=function(e){function t(){var e;return o()(this,t),(e=c()(this,u()(t).call(this))).attributeName="display",e.stateTwoValue="none",e}return m()(t,e),h()(t,null,[{key:"is",get:function(){return"ff-record"}},{key:"properties",get:function(){return{recordData:{type:Object,observer:"_recordDataChanged"},isRecommendation:{type:Boolean,value:!1},addCartClick:{type:Boolean},addCheckoutClick:{type:Boolean},stampAlways:{type:Boolean}}}},{key:"template",get:function(){return Object(f.b)(y())}}]),h()(t,[{key:"_recordDataChanged",value:function(e,t){e?(t&&e.id===t.id&&!0!==this.stampAlways||(this.model=e,this.bindProductActions(),this.bindProductImage(),this.bindProductAnchors(),this.bindClick(),this.addCartClick&&this.bindCartClick(),this.addCheckoutClick&&this.bindCheckoutClick()),this.activateStateOne()):this.activateStateTwo()}},{key:"clone",value:function(){var e=document.createElement(t.is);return g.a.common.copyHTMLAttributes(this,e),e.templateString=this.templateString,e}}]),t}(Object(v.a)(["LightDOMTemplate","CssAttributeToggle","RecordBinding","RemoveUnresolvedAttribute","TrackingBinding"],f.a));window.customElements.define(_.is,_)},function(e,t,n){"use strict";n.r(t),n.d(t,"TrackingBehavior",function(){return m});var i=n(3),r=n.n(i),a=n(2),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(6),h=n.n(d),p=n(0),m=function(e){return function(e){function t(){var e;return r()(this,t),(e=c()(this,u()(t).call(this))).clickSelector="[data-track]",e.productClickSelector='[data-track="productClick"]',e.recommendationClickSelector='[data-track="recommendationClick"]',e.checkoutClickSelector='[data-track="checkoutClick"]',e.cartClickSelector='[data-track="cartClick"]',e.dataCountSelector="[data-track-count]",e.tracking=new p.a.communication.Tracking12,e.getTrackingProductId=p.a.communication.Util.trackingHelper.getTrackingProductId,e.getPrice=p.a.communication.Util.trackingHelper.getPrice,e.getMasterArticleNumber=p.a.communication.Util.trackingHelper.getMasterArticleNumber,e.getUserId=p.a.communication.Util.trackingHelper.getUserId,e.getTitle=p.a.communication.Util.trackingHelper.getTitle,e}return h()(t,e),o()(t,[{key:"appendCount",value:function(e,t){e.count=t.count||"1";var n=t.querySelector(this.dataCountSelector);if(n){var i=n.getAttribute("data-track-count");e.count=n[i]||n.value||"1"}}},{key:"appendInstoreAds",value:function(e,t){"true"===t.record.__FFInstoreAds__&&(e.instoreAds="true")}},{key:"appendCampaign",value:function(e,t){t.record.__FFCampaign__&&(e.campaign=t.record.__FFCampaign__)}},{key:"appendUserId",value:function(e){var t=this.getUserId();null!=t&&(e.userId=t)}},{key:"appendTitle",value:function(e,t){var n=this.getTitle(t);null!=n&&(e.title=n)}},{key:"appendPageSize",value:function(e,t,n){var i=null;if(n&&n.resultsPerPageList)for(var r=0;r<n.resultsPerPageList.length;r++){var a=n.resultsPerPageList[r];if(1==a.selected){i=a.value;break}}null!=i&&(e.pageSize=i)}},{key:"appendOrigPageSize",value:function(e,t){var n=null;if(t&&t.resultsPerPageList)for(var i=0;i<t.resultsPerPageList.length;i++){var r=t.resultsPerPageList[i];if(1==r.default){n=r.value;break}}null!=n&&(e.origPageSize=n)}},{key:"appendSimi",value:function(e,t){var n=t.searchSimilarity;null!=n&&(e.simi=n)}},{key:"appendMasterArticleNumber",value:function(e,t){var n=this.getMasterArticleNumber(t);null!=n&&(e.masterId=n)}},{key:"getRecordElement",value:function(e,t){return t&&!e?{recordData:t}:e&&t?(e.recordData=t,e):e.tagName&&"ff-record"===e.tagName.toLowerCase()?this:p.a.common.getParentElementByName(e,"ff-record")}},{key:"bindClick",value:function(e){var t;e=e||this,this.searchShadowDOM&&(t=e.root,!0===this.isRecommendation?this.bindAll(this.clickSelector,function(t){e._trackRecommendationClick(e)},t):this.bindAll(this.clickSelector,function(t){e._trackProductClick(e)},t)),this.searchLightDOM&&(t=e,!0===this.isRecommendation?this.bindAll(this.clickSelector,function(t){e._trackRecommendationClick(e)},t):this.bindAll(this.clickSelector,function(t){e._trackProductClick(e)},t))}},{key:"bindProductClick",value:function(e){var t;e=e||this,this.searchShadowDOM&&(t=e.root,this.bindAll(this.productClickSelector,function(t){e._trackProductClick(e)},t)),this.searchLightDOM&&(t=e,this.bindAll(this.productClickSelector,function(t){e._trackProductClick(e)},t))}},{key:"bindRecommendationClick",value:function(e){var t;e=e||this,this.searchShadowDOM&&(t=e.root,this.bindAll(this.recommendationClickSelector,function(t){e._trackRecommendationClick(e)},t)),this.searchLightDOM&&(t=e,this.bindAll(this.recommendationClickSelector,function(t){e._trackRecommendationClick(e)},t))}},{key:"bindCheckoutClick",value:function(e){var t;e=e||this,this.searchShadowDOM&&(t=e.root,this.bindAll(this.checkoutClickSelector,function(t){e._trackCheckoutClick(e)},t)),this.searchLightDOM&&(t=e,this.bindAll(this.checkoutClickSelector,function(t){e._trackCheckoutClick(e)},t))}},{key:"bindCartClick",value:function(e){var t;e=e||this,this.searchShadowDOM&&(t=e.root,this.bindAll(this.cartClickSelector,function(t){e._trackCartClick(e)},t)),this.searchLightDOM&&(t=e,this.bindAll(this.cartClickSelector,function(t){e._trackCartClick(e)},t))}},{key:"_trackRecommendationClick",value:function(e,t,n){var i,r;if(i=t?{recordData:t}:e.tagName&&"ff-record"===e.tagName.toLowerCase()?this:p.a.common.getParentElementByName(e,"ff-record"),"ff-recommendation"===e.tagName.toLowerCase())r=e;else{var a=e;r=p.a.common.getParentElementByName(a,"ff-recommendation")}if(i){var o={type:"recommendationClick",mainId:r.recordId,id:this.getTrackingProductId(i.recordData)};this.appendMasterArticleNumber(o,i.recordData),this.appendUserId(o),n&&(o.always=n),this.tracking.recommendationClick(o)}}},{key:"_trackCheckoutClick",value:function(e,t,n){var i=this.getRecordElement(e,t);if(i){var r={id:this.getTrackingProductId(i.recordData),price:this.getPrice(i.recordData)},a=i.recordData.record.__FFCartQuery__||p.a.communication.Util.getQueryFromSearchParams();a&&(r.query=a),this.appendMasterArticleNumber(r,i.recordData),this.appendCount(r,e),this.appendCampaign(r,i.recordData),this.appendInstoreAds(r,i.recordData),this.appendUserId(r),n&&(r.always=n),this.tracking.checkout(r)}else console.log("No record element found. Tracking not possible.")}},{key:"_trackCartClick",value:function(e,t,n){var i=this.getRecordElement(e,t),r={id:this.getTrackingProductId(i.recordData),price:this.getPrice(i.recordData),query:p.a.communication.Util.getQueryFromSearchParams()};this.appendMasterArticleNumber(r,i.recordData),this.appendCount(r,e),this.appendCampaign(r,i.recordData),this.appendInstoreAds(r,i.recordData),this.appendUserId(r),n&&(r.always=n),this.tracking.cart(r)}},{key:"_trackProductClick",value:function(e,t,n){e=this.getRecordElement(e,t);var i=p.a.communication.FFCommunicationEventAggregator.currentSearchResult,r=e.recordData.position||e.recordData.record.__ORIG_POSITION__,a=p.a.communication.Util.getQueryFromSearchParams(),o=p.a.common.parameterStringToDict(p.a.common.getParameterString());if(o.navigation){for(var s in o)-1<s.indexOf("CategoryROOT")&&(a="".concat(s.replace("filterCategoryROOT",""),"%2F").concat(o[s]));a=p.a.common.fixedDecodeURIComponent(a)}var c={query:a,page:e.recordData.record.page||i.paging.currentPage,id:this.getTrackingProductId(e.recordData),pos:r,origPos:e.recordData.record.__ORIG_POSITION__||r,origPageSize:i.resultsPerPageList[0].value};this.appendPageSize(c,e.recordData,i),this.appendSimi(c,e.recordData),this.appendMasterArticleNumber(c,e.recordData),this.appendCampaign(c,e.recordData),this.appendInstoreAds(c,e.recordData),this.appendTitle(c,e.recordData),this.appendUserId(c),this.appendOrigPageSize(c,i),n&&(c.always=n),this.tracking.click(c)}}]),t}(e)}},function(e,t,n){"use strict";n.d(t,"c",function(){return p}),n.d(t,"b",function(){return m}),n.d(t,"a",function(){return g});var i=n(34),r=n.n(i),a=n(24),o="link[rel=import][type~=css]",s="include",c="shady-unscoped";function l(e){var t=customElements.get("dom-module");return t?t.import(e):null}function u(e){var t=e.body?e.body:e,n=Object(a.b)(t.textContent,e.baseURI),i=document.createElement("style");return i.textContent=n,i}function d(e){for(var t=e.trim().split(/\s+/),n=[],i=0;i<t.length;i++)n.push.apply(n,r()(h(t[i])));return n}function h(e){var t=l(e);if(!t)return console.warn("Could not find style data in module named",e),[];if(void 0===t._styles){var n=[];n.push.apply(n,r()(f(t)));var i=t.querySelector("template");i&&n.push.apply(n,r()(p(i,t.assetpath))),t._styles=n}return t._styles}function p(e,t){if(!e._styles){for(var n=[],i=e.content.querySelectorAll("style"),o=0;o<i.length;o++){var c=i[o],l=c.getAttribute(s);l&&n.push.apply(n,r()(d(l).filter(function(e,t,n){return n.indexOf(e)===t}))),t&&(c.textContent=Object(a.b)(c.textContent,t)),n.push(c)}e._styles=n}return e._styles}function m(e){var t=l(e);return t?f(t):[]}function f(e){for(var t=[],n=e.querySelectorAll(o),i=0;i<n.length;i++){var r=n[i];if(r.import){var a=r.import,s=r.hasAttribute(c);if(s&&!a._unscopedStyle){var l=u(a);l.setAttribute(c,""),a._unscopedStyle=l}else a._style||(a._style=u(a));t.push(s?a._unscopedStyle:a._style)}}return t}function g(e){for(var t=e.trim().split(/\s+/),n="",i=0;i<t.length;i++)n+=v(t[i]);return n}function v(e){var t=l(e);if(t&&void 0===t._cssText){var n=function(e){for(var t="",n=f(e),i=0;i<n.length;i++)t+=n[i].textContent;return t}(t),i=t.querySelector("template");i&&(n+=function(e,t){for(var n="",i=p(e,t),r=0;r<i.length;r++){var a=i[r];a.parentNode&&a.parentNode.removeChild(a),n+=a.textContent}return n}(i,t.assetpath)),t._cssText=n||null}return t||console.warn("Could not find style data in module named",e),t&&t._cssText||""}},function(e,t,n){"use strict";var i={};n.r(i),n.d(i,"dashToCamelCase",function(){return S}),n.d(i,"camelToDashCase",function(){return w});var r=n(3),a=n.n(r),o=n(2),s=n.n(o),c=n(5),l=n.n(c),u=n(1),d=n.n(u),h=n(4),p=n.n(h),m=n(6),f=n.n(m),g=n(19),v=n.n(g),y=(n(18),n(21)),_=n(16),b={},C=/-[a-z]/g,k=/([A-Z])/g;function S(e){return b[e]||(b[e]=e.indexOf("-")<0?e:e.replace(C,function(e){return e[1].toUpperCase()}))}function w(e){return b[e]||(b[e]=e.replace(k,"-$1").toLowerCase())}for(var P=n(37),E=i,T={},O=HTMLElement.prototype;O;){for(var A=Object.getOwnPropertyNames(O),L=0;L<A.length;L++)T[A[L]]=!0;O=Object.getPrototypeOf(O)}var x=Object(y.a)(function(e){return function(e){function t(){return a()(this,t),l()(this,d()(t).apply(this,arguments))}return f()(t,e),s()(t,[{key:"_initializeProperties",value:function(){this.__dataProto&&(this._initializeProtoProperties(this.__dataProto),this.__dataProto=null),p()(d()(t.prototype),"_initializeProperties",this).call(this)}},{key:"_initializeProtoProperties",value:function(e){for(var t in e)this._setProperty(t,e[t])}},{key:"_ensureAttribute",value:function(e,t){this.hasAttribute(e)||this._valueToNodeAttribute(this,t,e)}},{key:"_serializeValue",value:function(e){switch(v()(e)){case"object":if(e instanceof Date)return e.toString();if(e)try{return JSON.stringify(e)}catch(e){return""}default:return p()(d()(t.prototype),"_serializeValue",this).call(this,e)}}},{key:"_deserializeValue",value:function(e,n){var i;switch(n){case Object:try{i=JSON.parse(e)}catch(n){i=e}break;case Array:try{i=JSON.parse(e)}catch(n){i=null,console.warn("Polymer::Attributes: couldn't decode Array as JSON: ".concat(e))}break;case Date:i=isNaN(e)?String(e):Number(e),i=new Date(i);break;default:i=p()(d()(t.prototype),"_deserializeValue",this).call(this,e,n)}return i}},{key:"_definePropertyAccessor",value:function(e,n){!function(e,t){if(!T[t]){var n=e[t];void 0!==n&&(e.__data?e._setPendingProperty(t,n):(e.__dataProto?e.hasOwnProperty(JSCompiler_renameProperty("__dataProto",e))||(e.__dataProto=Object.create(e.__dataProto)):e.__dataProto={},e.__dataProto[t]=n))}}(this,e),p()(d()(t.prototype),"_definePropertyAccessor",this).call(this,e,n)}},{key:"_hasAccessor",value:function(e){return this.__dataHasAccessor&&this.__dataHasAccessor[e]}},{key:"_isPropertyPending",value:function(e){return Boolean(this.__dataPending&&e in this.__dataPending)}}],[{key:"createPropertiesForAttributes",value:function(){for(var e=this.observedAttributes,t=0;t<e.length;t++)this.prototype._createPropertyAccessor(E.dashToCamelCase(e[t]))}},{key:"attributeNameForProperty",value:function(e){return E.camelToDashCase(e)}}]),t}(Object(P.a)(e))}),R={"dom-if":!0,"dom-repeat":!0};function I(e){var t=e.getAttribute("is");if(t&&R[t]){var n=e;for(n.removeAttribute("is"),e=n.ownerDocument.createElement(t),n.parentNode.replaceChild(e,n),e.appendChild(n);n.attributes.length;)e.setAttribute(n.attributes[0].name,n.attributes[0].value),n.removeAttribute(n.attributes[0].name)}return e}function F(e,t){var n=t.parentInfo&&F(e,t.parentInfo);if(!n)return e;for(var i=n.firstChild,r=0;i;i=i.nextSibling)if(t.parentIndex===r++)return i}function M(e,t,n){if(n.events&&n.events.length)for(var i,r=0,a=n.events;r<a.length&&(i=a[r]);r++)e._addMethodEventListenerToNode(t,i.name,i.value,e)}var D=Object(y.a)(function(e){return function(e){function t(){return a()(this,t),l()(this,d()(t).apply(this,arguments))}return f()(t,e),s()(t,[{key:"_stampTemplate",value:function(e){e&&!e.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(e);var t=this.constructor._parseTemplate(e),n=t.nodeInfoList,i=t.content||e.content,r=document.importNode(i,!0);r.__noInsertionPoint=!t.hasInsertionPoint;var a,o,s,c,l,u=r.nodeList=new Array(n.length);r.$={};for(var d,h=0,p=n.length;h<p&&(d=n[h]);h++){var m=u[h]=F(r,d);s=r.$,c=m,(l=d).id&&(s[l.id]=c),a=m,(o=d).templateInfo&&(a._templateInfo=o.templateInfo),M(this,m,d)}return r}},{key:"_addMethodEventListenerToNode",value:function(e,t,n,i){var r,a,o=(a=n,r=(r=i=i||e)._methodHost||r,function(e){r[a]?r[a](e,e.detail):console.warn("listener method `"+a+"` not defined")});return this._addEventListenerToNode(e,t,o),o}},{key:"_addEventListenerToNode",value:function(e,t,n){e.addEventListener(t,n)}},{key:"_removeEventListenerFromNode",value:function(e,t,n){e.removeEventListener(t,n)}}],[{key:"_parseTemplate",value:function(e,t){if(!e._templateInfo){var n=e._templateInfo={};n.nodeInfoList=[],n.stripWhiteSpace=t&&t.stripWhiteSpace||e.hasAttribute("strip-whitespace"),this._parseTemplateContent(e,n,{parent:null})}return e._templateInfo}},{key:"_parseTemplateContent",value:function(e,t,n){return this._parseTemplateNode(e.content,t,n)}},{key:"_parseTemplateNode",value:function(e,t,n){var i,r=e;return"template"!=r.localName||r.hasAttribute("preserve-content")?"slot"===r.localName&&(t.hasInsertionPoint=!0):i=this._parseTemplateNestedTemplate(r,t,n)||i,r.firstChild&&(i=this._parseTemplateChildNodes(r,t,n)||i),r.hasAttributes&&r.hasAttributes()&&(i=this._parseTemplateNodeAttributes(r,t,n)||i),i}},{key:"_parseTemplateChildNodes",value:function(e,t,n){if("script"!==e.localName&&"style"!==e.localName)for(var i,r=e.firstChild,a=0;r;r=i){if("template"==r.localName&&(r=I(r)),i=r.nextSibling,r.nodeType===Node.TEXT_NODE){for(var o=i;o&&o.nodeType===Node.TEXT_NODE;)r.textContent+=o.textContent,i=o.nextSibling,e.removeChild(o),o=i;if(t.stripWhiteSpace&&!r.textContent.trim()){e.removeChild(r);continue}}var s={parentIndex:a,parentInfo:n};this._parseTemplateNode(r,t,s)&&(s.infoIndex=t.nodeInfoList.push(s)-1),r.parentNode&&a++}}},{key:"_parseTemplateNestedTemplate",value:function(e,t,n){var i=this._parseTemplate(e,t);return(i.content=e.content.ownerDocument.createDocumentFragment()).appendChild(e.content),n.templateInfo=i,!0}},{key:"_parseTemplateNodeAttributes",value:function(e,t,n){for(var i,r=!1,a=Array.from(e.attributes),o=a.length-1;i=a[o];o--)r=this._parseTemplateNodeAttribute(e,t,n,i.name,i.value)||r;return r}},{key:"_parseTemplateNodeAttribute",value:function(e,t,n,i,r){return"on-"===i.slice(0,3)?(e.removeAttribute(i),n.events=n.events||[],n.events.push({name:i.slice(3),value:r}),!0):"id"===i&&(n.id=r,!0)}},{key:"_contentForTemplate",value:function(e){var t=e._templateInfo;return t&&t.content||e.content}}]),t}(e)}),N=n(28);n.d(t,"a",function(){return de});var U=i,j=0,H={COMPUTE:"__computeEffects",REFLECT:"__reflectEffects",NOTIFY:"__notifyEffects",PROPAGATE:"__propagateEffects",OBSERVE:"__observeEffects",READ_ONLY:"__readOnly"},B=/[A-Z]/;function q(e,t){var n=e[t];if(n){if(!e.hasOwnProperty(t))for(var i in n=e[t]=Object.create(e[t]))for(var r=n[i],a=n[i]=Array(r.length),o=0;o<r.length;o++)a[o]=r[o]}else n=e[t]={};return n}function V(e,t,n,i,r,a){if(t){var o=!1,s=j++;for(var c in n)z(e,t,s,c,n,i,r,a)&&(o=!0);return o}return!1}function z(e,t,n,i,r,a,o,s){var c=!1,l=t[o?Object(_.g)(i):i];if(l)for(var u,d=0,h=l.length;d<h&&(u=l[d]);d++)u.info&&u.info.lastRun===n||o&&!K(i,u.trigger)||(u.info&&(u.info.lastRun=n),u.fn(e,i,r,a,u.info,o,s),c=!0);return c}function K(e,t){if(t){var n=t.name;return n==e||t.structured&&Object(_.b)(n,e)||t.wildcard&&Object(_.c)(n,e)}return!0}function W(e,t,n,i,r){var a="string"==typeof r.method?e[r.method]:r.method,o=r.property;a?a.call(e,e.__data[o],i[o]):r.dynamicFn||console.warn("observer method `"+r.method+"` not defined")}function G(e,t,n,i){var r={value:n,queueProperty:!0};i&&(r.path=i),e.dispatchEvent(new CustomEvent(t,{detail:r}))}function Y(e,t,n,i,r,a){var o=(a?Object(_.g)(t):t)!=t?t:null,s=o?Object(_.a)(e,o):e.__data[t];o&&void 0===s&&(s=n[t]),G(e,r.eventName,s,o)}function X(e,t,n,i,r){var a=e.__data[t];N.c&&(a=Object(N.c)(a,r.attrName,"attribute",e)),e._propertyToAttribute(t,r.attrName,a)}function $(e,t,n,i,r){var a=ie(e,t,n,i,r),o=r.methodInfo;e.__dataHasAccessor&&e.__dataHasAccessor[o]?e._setPendingProperty(o,a,!0):e[o]=a}function J(e,t,n,i,r,a,o){n.bindings=n.bindings||[];var s,c={kind:i,target:r,parts:a,literal:o,isCompound:1!==a.length};if(n.bindings.push(c),s=c,Boolean(s.target)&&"attribute"!=s.kind&&"text"!=s.kind&&!s.isCompound&&"{"===s.parts[0].mode){var l=c.parts[0],u=l.event,d=l.negate;c.listenerEvent=u||U.camelToDashCase(r)+"-changed",c.listenerNegate=d}for(var h=t.nodeInfoList.length,p=0;p<c.parts.length;p++){var m=c.parts[p];m.compoundIndex=p,Q(e,t,c,m,h)}}function Q(e,t,n,i,r){if(!i.literal)if("attribute"===n.kind&&"-"===n.target[0])console.warn("Cannot set attribute "+n.target+' because "-" is not a valid attribute starting character');else for(var a=i.dependencies,o={index:r,binding:n,part:i,evaluator:e},s=0;s<a.length;s++){var c=a[s];"string"==typeof c&&((c=ce(c)).wildcard=!0),e._addTemplatePropertyEffect(t,c.rootProperty,{fn:Z,info:o,trigger:c})}}function Z(e,t,n,i,r,a,o){var s=o[r.index],c=r.binding,l=r.part;if(a&&l.source&&t.length>l.source.length&&"property"==c.kind&&!c.isCompound&&s.__isPropertyEffectsClient&&s.__dataHasAccessor&&s.__dataHasAccessor[c.target]){var u=n[t];t=Object(_.i)(l.source,c.target,t),s._setPendingPropertyOrPath(t,u,!1,!0)&&e._enqueueClient(s)}else!function(e,t,n,i,r){if(r=function(e,t,n,i){if(n.isCompound){var r=e.__dataCompoundStorage[n.target];r[i.compoundIndex]=t,t=r.join("")}return"attribute"!==n.kind&&("textContent"!==n.target&&("value"!==n.target||"input"!==e.localName&&"textarea"!==e.localName)||(t=null==t?"":t)),t}(t,r,n,i),N.c&&(r=Object(N.c)(r,n.target,n.kind,t)),"attribute"==n.kind)e._valueToNodeAttribute(t,r,n.target);else{var a=n.target;t.__isPropertyEffectsClient&&t.__dataHasAccessor&&t.__dataHasAccessor[a]?t[H.READ_ONLY]&&t[H.READ_ONLY][a]||t._setPendingProperty(a,r)&&e._enqueueClient(t):e._setUnmanagedPropertyToNode(t,a,r)}}(e,s,c,l,r.evaluator._evaluateBinding(e,l,t,n,i,a))}function ee(e,t){if(t.isCompound){for(var n=e.__dataCompoundStorage||(e.__dataCompoundStorage={}),i=t.parts,r=new Array(i.length),a=0;a<i.length;a++)r[a]=i[a].literal;var o=t.target;n[o]=r,t.literal&&"property"==t.kind&&(e[o]=t.literal)}}function te(e,t,n){if(n.listenerEvent){var i=n.parts[0];e.addEventListener(n.listenerEvent,function(e){var r,a,o,s,c,l,u,d;r=e,a=t,o=n.target,s=i.source,c=i.negate,l=(d=(u=r.detail)&&u.path)?(s=Object(_.i)(o,s,d),u&&u.value):r.target[o],l=c?!l:l,a[H.READ_ONLY]&&a[H.READ_ONLY][s]||!a._setPendingPropertyOrPath(s,l,!0,Boolean(d))||u&&u.queueProperty||a._invalidateProperties()})}}function ne(e,t,n,i,r,a){a=t.static||a&&("object"!==v()(a)||a[t.methodName]);for(var o,s={methodName:t.methodName,args:t.args,methodInfo:r,dynamicFn:a},c=0;c<t.args.length&&(o=t.args[c]);c++)o.literal||e._addPropertyEffect(o.rootProperty,n,{fn:i,info:s,trigger:o});a&&e._addPropertyEffect(t.methodName,n,{fn:i,info:s})}function ie(e,t,n,i,r){var a=e._methodHost||e,o=a[r.methodName];if(o){var s=function(e,t,n,i){for(var r=[],a=0,o=t.length;a<o;a++){var s=t[a],c=s.name,l=void 0;if(s.literal?l=s.value:s.structured?void 0===(l=Object(_.a)(e,c))&&(l=i[c]):l=e[c],s.wildcard){var u=0===c.indexOf(n+"."),d=0===n.indexOf(c)&&!u;r[a]={path:d?n:c,value:d?i[n]:l,base:l}}else r[a]=l}return r}(e.__data,r.args,t,n);return o.apply(a,s)}r.dynamicFn||console.warn("method `"+r.methodName+"` not defined")}var re=[],ae=new RegExp("(\\[\\[|{{)\\s*(?:(!)\\s*)?((?:[a-zA-Z_$][\\w.:$\\-*]*)\\s*(?:\\(\\s*(?:(?:(?:((?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\")))\\s*)(?:,\\s*(?:((?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\")))\\s*))*)?)\\)\\s*)?)(?:]]|}})","g");function oe(e){for(var t="",n=0;n<e.length;n++)t+=e[n].literal||"";return t}function se(e){var t=e.match(/([^\s]+?)\(([\s\S]*)\)/);if(t){var n={methodName:t[1],static:!0,args:re};return t[2].trim()?function(e,t){return t.args=e.map(function(e){var n=ce(e);return n.literal||(t.static=!1),n},this),t}(t[2].replace(/\\,/g,"&comma;").split(","),n):n}return null}function ce(e){var t=e.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1"),n={name:t,value:"",literal:!1},i=t[0];switch("-"===i&&(i=t[1]),"0"<=i&&i<="9"&&(i="#"),i){case"'":case'"':n.value=t.slice(1,-1),n.literal=!0;break;case"#":n.value=Number(t),n.literal=!0}return n.literal||(n.rootProperty=Object(_.g)(t),n.structured=Object(_.d)(t),n.structured&&(n.wildcard=".*"==t.slice(-2),n.wildcard&&(n.name=t.slice(0,-2)))),n}function le(e,t,n,i){var r=n+".splices";e.notifyPath(r,{indexSplices:i}),e.notifyPath(n+".length",t.length),e.__data[r]={indexSplices:null}}function ue(e,t,n,i,r,a){le(e,t,n,[{index:i,addedCount:r,removed:a,object:t,type:"splice"}])}var de=Object(y.a)(function(e){return function(e){function t(){var e;return a()(this,t),(e=l()(this,d()(t).call(this))).__isPropertyEffectsClient=!0,e.__dataCounter=0,e.__dataClientsReady,e.__dataPendingClients,e.__dataToNotify,e.__dataLinkedPaths,e.__dataHasPaths,e.__dataCompoundStorage,e.__dataHost,e.__dataTemp,e.__dataClientsInitialized,e.__data,e.__dataPending,e.__dataOld,e.__computeEffects,e.__reflectEffects,e.__notifyEffects,e.__propagateEffects,e.__observeEffects,e.__readOnly,e.__templateInfo,e}return f()(t,e),s()(t,[{key:"_initializeProperties",value:function(){p()(d()(t.prototype),"_initializeProperties",this).call(this),he.registerHost(this),this.__dataClientsReady=!1,this.__dataPendingClients=null,this.__dataToNotify=null,this.__dataLinkedPaths=null,this.__dataHasPaths=!1,this.__dataCompoundStorage=this.__dataCompoundStorage||null,this.__dataHost=this.__dataHost||null,this.__dataTemp={},this.__dataClientsInitialized=!1}},{key:"_initializeProtoProperties",value:function(e){this.__data=Object.create(e),this.__dataPending=Object.create(e),this.__dataOld={}}},{key:"_initializeInstanceProperties",value:function(e){var t=this[H.READ_ONLY];for(var n in e)t&&t[n]||(this.__dataPending=this.__dataPending||{},this.__dataOld=this.__dataOld||{},this.__data[n]=this.__dataPending[n]=e[n])}},{key:"_addPropertyEffect",value:function(e,t,n){this._createPropertyAccessor(e,t==H.READ_ONLY);var i=q(this,t)[e];i||(i=this[t][e]=[]),i.push(n)}},{key:"_removePropertyEffect",value:function(e,t,n){var i=q(this,t)[e],r=i.indexOf(n);0<=r&&i.splice(r,1)}},{key:"_hasPropertyEffect",value:function(e,t){var n=this[t];return Boolean(n&&n[e])}},{key:"_hasReadOnlyEffect",value:function(e){return this._hasPropertyEffect(e,H.READ_ONLY)}},{key:"_hasNotifyEffect",value:function(e){return this._hasPropertyEffect(e,H.NOTIFY)}},{key:"_hasReflectEffect",value:function(e){return this._hasPropertyEffect(e,H.REFLECT)}},{key:"_hasComputedEffect",value:function(e){return this._hasPropertyEffect(e,H.COMPUTE)}},{key:"_setPendingPropertyOrPath",value:function(e,n,i,r){if(r||Object(_.g)(Array.isArray(e)?e[0]:e)!==e){if(!r){var a=Object(_.a)(this,e);if(!(e=Object(_.h)(this,e,n))||!p()(d()(t.prototype),"_shouldPropertyChange",this).call(this,e,n,a))return!1}if(this.__dataHasPaths=!0,this._setPendingProperty(e,n,i))return function(e,t,n){var i,r=e.__dataLinkedPaths;if(r)for(var a in r){var o=r[a];Object(_.c)(a,t)?(i=Object(_.i)(a,o,t),e._setPendingPropertyOrPath(i,n,!0,!0)):Object(_.c)(o,t)&&(i=Object(_.i)(o,a,t),e._setPendingPropertyOrPath(i,n,!0,!0))}}(this,e,n),!0}else{if(this.__dataHasAccessor&&this.__dataHasAccessor[e])return this._setPendingProperty(e,n,i);this[e]=n}return!1}},{key:"_setUnmanagedPropertyToNode",value:function(e,t,n){n===e[t]&&"object"!=v()(n)||(e[t]=n)}},{key:"_setPendingProperty",value:function(e,t,n){var i=this.__dataHasPaths&&Object(_.d)(e),r=i?this.__dataTemp:this.__data;return!!this._shouldPropertyChange(e,t,r[e])&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),e in this.__dataOld||(this.__dataOld[e]=this.__data[e]),i?this.__dataTemp[e]=t:this.__data[e]=t,this.__dataPending[e]=t,(i||this[H.NOTIFY]&&this[H.NOTIFY][e])&&(this.__dataToNotify=this.__dataToNotify||{},this.__dataToNotify[e]=n),!0)}},{key:"_setProperty",value:function(e,t){this._setPendingProperty(e,t,!0)&&this._invalidateProperties()}},{key:"_invalidateProperties",value:function(){this.__dataReady&&this._flushProperties()}},{key:"_enqueueClient",value:function(e){this.__dataPendingClients=this.__dataPendingClients||[],e!==this&&this.__dataPendingClients.push(e)}},{key:"_flushProperties",value:function(){this.__dataCounter++,p()(d()(t.prototype),"_flushProperties",this).call(this),this.__dataCounter--}},{key:"_flushClients",value:function(){this.__dataClientsReady?this.__enableOrFlushClients():(this.__dataClientsReady=!0,this._readyClients(),this.__dataReady=!0)}},{key:"__enableOrFlushClients",value:function(){var e=this.__dataPendingClients;if(e){this.__dataPendingClients=null;for(var t=0;t<e.length;t++){var n=e[t];n.__dataEnabled?n.__dataPending&&n._flushProperties():n._enableProperties()}}}},{key:"_readyClients",value:function(){this.__enableOrFlushClients()}},{key:"setProperties",value:function(e,t){for(var n in e)!t&&this[H.READ_ONLY]&&this[H.READ_ONLY][n]||this._setPendingPropertyOrPath(n,e[n],!0);this._invalidateProperties()}},{key:"ready",value:function(){this._flushProperties(),this.__dataClientsReady||this._flushClients(),this.__dataPending&&this._flushProperties()}},{key:"_propertiesChanged",value:function(e,t,n){var i=this.__dataHasPaths;this.__dataHasPaths=!1,function(e,t,n,i){var r=e[H.COMPUTE];if(r)for(var a=t;V(e,r,a,n,i);)Object.assign(n,e.__dataOld),Object.assign(t,e.__dataPending),a=e.__dataPending,e.__dataPending=null}(this,t,n,i);var r=this.__dataToNotify;this.__dataToNotify=null,this._propagatePropertyChanges(t,n,i),this._flushClients(),V(this,this[H.REFLECT],t,n,i),V(this,this[H.OBSERVE],t,n,i),r&&function(e,t,n,i,r){var a,o,s,c,l,u,d=e[H.NOTIFY],h=j++;for(var p in t)t[p]&&(d&&z(e,d,h,p,n,i,r)?a=!0:r&&(s=e,c=p,l=n,(u=Object(_.g)(c))!==c&&(G(s,w(u)+"-changed",l[c],c),1))&&(a=!0));a&&(o=e.__dataHost)&&o._invalidateProperties&&o._invalidateProperties()}(this,r,t,n,i),1==this.__dataCounter&&(this.__dataTemp={})}},{key:"_propagatePropertyChanges",value:function(e,t,n){this[H.PROPAGATE]&&V(this,this[H.PROPAGATE],e,t,n);for(var i=this.__templateInfo;i;)V(this,i.propertyEffects,e,t,n,i.nodeList),i=i.nextTemplateInfo}},{key:"linkPaths",value:function(e,t){e=Object(_.f)(e),t=Object(_.f)(t),this.__dataLinkedPaths=this.__dataLinkedPaths||{},this.__dataLinkedPaths[e]=t}},{key:"unlinkPaths",value:function(e){e=Object(_.f)(e),this.__dataLinkedPaths&&delete this.__dataLinkedPaths[e]}},{key:"notifySplices",value:function(e,t){var n={path:""};le(this,Object(_.a)(this,e,n),n.path,t)}},{key:"get",value:function(e,t){return Object(_.a)(t||this,e)}},{key:"set",value:function(e,t,n){n?Object(_.h)(n,e,t):this[H.READ_ONLY]&&this[H.READ_ONLY][e]||this._setPendingPropertyOrPath(e,t,!0)&&this._invalidateProperties()}},{key:"push",value:function(e){for(var t={path:""},n=Object(_.a)(this,e,t),i=n.length,r=arguments.length,a=new Array(1<r?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];var s=n.push.apply(n,a);return a.length&&ue(this,n,t.path,i,a.length,[]),s}},{key:"pop",value:function(e){var t={path:""},n=Object(_.a)(this,e,t),i=Boolean(n.length),r=n.pop();return i&&ue(this,n,t.path,n.length,0,[r]),r}},{key:"splice",value:function(e,t,n){for(var i=arguments.length,r=new Array(3<i?i-3:0),a=3;a<i;a++)r[a-3]=arguments[a];var o,s={path:""},c=Object(_.a)(this,e,s);return t<0?t=c.length-Math.floor(-t):t&&(t=Math.floor(t)),o=2===arguments.length?c.splice(t):c.splice.apply(c,[t,n].concat(r)),(r.length||o.length)&&ue(this,c,s.path,t,r.length,o),o}},{key:"shift",value:function(e){var t={path:""},n=Object(_.a)(this,e,t),i=Boolean(n.length),r=n.shift();return i&&ue(this,n,t.path,0,0,[r]),r}},{key:"unshift",value:function(e){for(var t={path:""},n=Object(_.a)(this,e,t),i=arguments.length,r=new Array(1<i?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];var o=n.unshift.apply(n,r);return r.length&&ue(this,n,t.path,0,r.length,[]),o}},{key:"notifyPath",value:function(e,t){var n;if(1==arguments.length){var i={path:""};t=Object(_.a)(this,e,i),n=i.path}else n=Array.isArray(e)?Object(_.f)(e):e;this._setPendingPropertyOrPath(n,t,!0,!0)&&this._invalidateProperties()}},{key:"_createReadOnlyProperty",value:function(e,t){var n;this._addPropertyEffect(e,H.READ_ONLY),t&&(this["_set"+(n=e,n[0].toUpperCase()+n.substring(1))]=function(t){this._setProperty(e,t)})}},{key:"_createPropertyObserver",value:function(e,t,n){var i={property:e,method:t,dynamicFn:Boolean(n)};this._addPropertyEffect(e,H.OBSERVE,{fn:W,info:i,trigger:{name:e}}),n&&this._addPropertyEffect(t,H.OBSERVE,{fn:W,info:i,trigger:{name:t}})}},{key:"_createMethodObserver",value:function(e,t){var n=se(e);if(!n)throw new Error("Malformed observer expression '"+e+"'");ne(this,n,H.OBSERVE,ie,null,t)}},{key:"_createNotifyingProperty",value:function(e){this._addPropertyEffect(e,H.NOTIFY,{fn:Y,info:{eventName:U.camelToDashCase(e)+"-changed",property:e}})}},{key:"_createReflectedProperty",value:function(e){var t=this.constructor.attributeNameForProperty(e);"-"===t[0]?console.warn("Property "+e+" cannot be reflected to attribute "+t+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.'):this._addPropertyEffect(e,H.REFLECT,{fn:X,info:{attrName:t}})}},{key:"_createComputedProperty",value:function(e,t,n){var i=se(t);if(!i)throw new Error("Malformed computed expression '"+t+"'");ne(this,i,H.COMPUTE,$,e,n)}},{key:"_bindTemplate",value:function(e,t){var n=this.constructor._parseTemplate(e),i=this.__templateInfo==n;if(!i)for(var r in n.propertyEffects)this._createPropertyAccessor(r);if(t&&!((n=Object.create(n)).wasPreBound=i)&&this.__templateInfo){var a=this.__templateInfoLast||this.__templateInfo;return this.__templateInfoLast=a.nextTemplateInfo=n,n.previousTemplateInfo=a,n}return this.__templateInfo=n}},{key:"_stampTemplate",value:function(e){he.beginHosting(this);var n=p()(d()(t.prototype),"_stampTemplate",this).call(this,e);he.endHosting(this);var i=this._bindTemplate(e,!0);if(i.nodeList=n.nodeList,!i.wasPreBound)for(var r=i.childNodes=[],a=n.firstChild;a;a=a.nextSibling)r.push(a);return function(e,t){var n=t.nodeList,i=t.nodeInfoList;if(i.length)for(var r=0;r<i.length;r++){var a=i[r],o=n[r],s=a.bindings;if(s)for(var c=0;c<s.length;c++){var l=s[c];ee(o,l),te(o,e,l)}o.__dataHost=e}}(this,n.templateInfo=i),this.__dataReady&&V(this,i.propertyEffects,this.__data,null,!1,i.nodeList),n}},{key:"_removeBoundDom",value:function(e){var t=e.templateInfo;t.previousTemplateInfo&&(t.previousTemplateInfo.nextTemplateInfo=t.nextTemplateInfo),t.nextTemplateInfo&&(t.nextTemplateInfo.previousTemplateInfo=t.previousTemplateInfo),this.__templateInfoLast==t&&(this.__templateInfoLast=t.previousTemplateInfo),t.previousTemplateInfo=t.nextTemplateInfo=null;for(var n=t.childNodes,i=0;i<n.length;i++){var r=n[i];r.parentNode.removeChild(r)}}},{key:"PROPERTY_EFFECT_TYPES",get:function(){return H}}],[{key:"addPropertyEffect",value:function(e,t,n){this.prototype._addPropertyEffect(e,t,n)}},{key:"createPropertyObserver",value:function(e,t,n){this.prototype._createPropertyObserver(e,t,n)}},{key:"createMethodObserver",value:function(e,t){this.prototype._createMethodObserver(e,t)}},{key:"createNotifyingProperty",value:function(e){this.prototype._createNotifyingProperty(e)}},{key:"createReadOnlyProperty",value:function(e,t){this.prototype._createReadOnlyProperty(e,t)}},{key:"createReflectedProperty",value:function(e){this.prototype._createReflectedProperty(e)}},{key:"createComputedProperty",value:function(e,t,n){this.prototype._createComputedProperty(e,t,n)}},{key:"bindTemplate",value:function(e){return this.prototype._bindTemplate(e)}},{key:"_addTemplatePropertyEffect",value:function(e,t,n){(e.hostProps=e.hostProps||{})[t]=!0;var i=e.propertyEffects=e.propertyEffects||{};(i[t]=i[t]||[]).push(n)}},{key:"_parseTemplateNode",value:function(e,n,i){var r=p()(d()(t),"_parseTemplateNode",this).call(this,e,n,i);if(e.nodeType===Node.TEXT_NODE){var a=this._parseBindings(e.textContent,n);a&&(e.textContent=oe(a)||" ",J(this,n,i,"text","textContent",a),r=!0)}return r}},{key:"_parseTemplateNodeAttribute",value:function(e,n,i,r,a){var o=this._parseBindings(a,n);if(o){var s=r,c="property";B.test(r)?c="attribute":"$"==r[r.length-1]&&(r=r.slice(0,-1),c="attribute");var l=oe(o);return l&&"attribute"==c&&e.setAttribute(r,l),"input"===e.localName&&"value"===s&&e.setAttribute(s,""),e.removeAttribute(s),"property"===c&&(r=S(r)),J(this,n,i,c,r,o,l),!0}return p()(d()(t),"_parseTemplateNodeAttribute",this).call(this,e,n,i,r,a)}},{key:"_parseTemplateNestedTemplate",value:function(e,n,i){var r=p()(d()(t),"_parseTemplateNestedTemplate",this).call(this,e,n,i),a=i.templateInfo.hostProps;for(var o in a)J(this,n,i,"property","_host_"+o,[{mode:"{",source:o,dependencies:[o]}]);return r}},{key:"_parseBindings",value:function(e,t){for(var n,i=[],r=0;null!==(n=ae.exec(e));){n.index>r&&i.push({literal:e.slice(r,n.index)});var a=n[1][0],o=Boolean(n[2]),s=n[3].trim(),c=!1,l="",u=-1;"{"==a&&0<(u=s.indexOf("::"))&&(l=s.substring(u+2),s=s.substring(0,u),c=!0);var d=se(s),h=[];if(d){for(var p=d.args,m=d.methodName,f=0;f<p.length;f++){var g=p[f];g.literal||h.push(g)}var v=t.dynamicFns;(v&&v[m]||d.static)&&(h.push(m),d.dynamicFn=!0)}else h.push(s);i.push({source:s,mode:a,negate:o,customEvent:c,signature:d,dependencies:h,event:l}),r=ae.lastIndex}if(r&&r<e.length){var y=e.substring(r);y&&i.push({literal:y})}return i.length?i:null}},{key:"_evaluateBinding",value:function(e,t,n,i,r,a){var o;return o=t.signature?ie(e,n,i,0,t.signature):n!=t.source?Object(_.a)(e,t.source):a&&Object(_.d)(n)?Object(_.a)(e,n):e.__data[n],t.negate&&(o=!o),o}}]),t}(D(x(e)))}),he=new(function(){function e(){a()(this,e),this.stack=[]}return s()(e,[{key:"registerHost",value:function(e){this.stack.length&&this.stack[this.stack.length-1]._enqueueClient(e)}},{key:"beginHosting",value:function(e){this.stack.push(e)}},{key:"endHosting",value:function(e){var t=this.stack.length;t&&this.stack[t-1]==e&&this.stack.pop()}}]),e}())},function(e,t,n){var i=n(51),r=n(52),a=n(53);e.exports=function(e){return i(e)||r(e)||a()}},function(e,t,n){"use strict";n.d(t,"a",function(){return P});var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(4),h=n.n(d),p=n(2),m=n.n(p),f=n(6),g=n.n(f),v=n(13),y=n.n(v),_=n(7),b=n(15),C=n(12),k=n(0),S=n(9);function w(){var e=r()(["<style>:host{display:block;word-wrap:break-word}:host:hover{text-decoration:underline}</style><slot></slot>"]);return w=function(){return e},e}n(42);var P=function(e){function t(){var e;return o()(this,t),e=c()(this,u()(t).call(this)),C.addListener(y()(y()(e)),"tap",e._tapped.bind(y()(y()(e)))),e}return g()(t,e),m()(t,null,[{key:"properties",get:function(){return{type:{type:String,value:"all",reflectToAttribute:!0},suggestion:{type:Object,observer:"_suggestionChanged"}}}},{key:"template",get:function(){return Object(_.b)(w())}}]),m()(t,[{key:"ready",value:function(){var e=this;h()(u()(t.prototype),"ready",this).call(this),this.attributeName="display",this.stateTwoValue="none",this.activateStateTwo(),this.query||k.a.common.whenBrowserReady(function(){e.query=k.a.communication.globalElementValues.currentFFSearchBoxValue})}},{key:"disconnectedCallback",value:function(){h()(u()(t.prototype),"disconnectedCallback",this).call(this),C.removeListener(this,"tap",this._tapped.bind(this))}},{key:"highlightQuery",value:function(e,t){try{var n=t.split(" ");n.map(function(e,t){n[t]=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")});var i=n.join("|");e.name=e.name.replace(new RegExp(i,"gi"),function(e){return'<span class="query">'+e+"</span>"})}catch(e){console.log(e)}}},{key:"_suggestionChanged",value:function(e,t){if(e){this.query=k.a.communication.globalElementValues.currentFFSearchBoxValue,this.highlightQuery(e,this.query),this.model=e;try{this.bindImage(e.image)}catch(e){this.error("Bind image failed: "+e)}this.activateStateOne()}else this.activateStateTwo()}},{key:"_tapped",value:function(e){var t={type:this.type,suggestion:this.suggestion,element:this};if(this.dispatchEvent(new CustomEvent("item-clicked",{detail:t,bubbles:!0})),!0!==this.ffPreventDefault){var n=this.suggestion.attributes[this.getDeeplinkField(k.a.communication.fieldRoles)];if(!this.openDeeplink(n))if("productName"===this.type){var i=this.getRecordEvent();this.dispatchEvent(new CustomEvent("before-search",{detail:i,bubbles:!0})),i.success=k.a.common.concatFunctions(i.success,this.recordSearchHandler.bind(this)),k.a.communication.FFCommunicationEventAggregator.addFFEvent(i)}else{var r=k.a.common.urlStringToDict(this.suggestion.searchParams);(r=k.a.common.decodeDict(r)).queryFromSuggest=!0,r.userInput=k.a.communication.globalElementValues.currentFFSearchBoxValue,r.type="search",this.dispatchEvent(new CustomEvent("before-search",{detail:r,bubbles:!0})),k.a.communication.FFCommunicationEventAggregator.addFFEvent(r)}}else delete this.ffPreventDefault}},{key:"getRecordEvent",value:function(){var e=7.2;try{e=parseFloat(k.a.communication.globalSearchParameter.version)}catch(e){this.error("Could not parse float from Fact-Finder version string, using fallback article number search")}return e<7.3?{type:"productDetail",id:this.suggestion.attributes.articleNr}:{type:"getRecords",recordId:[this.suggestion.attributes.id]}}},{key:"recordSearchHandler",value:function(e){var t;if(e.searchResult){if(e.searchResult.records&&0<e.searchResult.records.length){var n=this.getDeeplinkField(e.searchResult.fieldRoles);t=e.searchResult.records[0].record[n]}}else if(0<e.length&&e[0]&&e[0].record){var i=this.getDeeplinkField(k.a.communication.fieldRoles);t=e[0].record[i]}this.openDeeplink(t)}},{key:"getDeeplinkField",value:function(e){return e&&e.deeplink||"Deeplink"}},{key:"openDeeplink",value:function(e){if(e){if(-1<e.indexOf("http://")||-1<e.indexOf("https://"))return window.open(e,"_self"),!0;if(!0===k.a.communication.globalCommunicationParameter.singleHitRedirect){var t=k.a.communication.globalCommunicationParameter.singleHitRedirectBasePath;return t&&""!=t&&(e=t+e),window.open(e,"_self"),!0}}return!1}},{key:"clone",value:function(){var e=document.createElement("ff-suggest-item");return e.type=this.type,e.templateString=this.templateString,k.a.common.copyHTMLAttributes(this,e),e}}]),t}(Object(S.a)(["CssAttributeToggle","ElementLog","ImageTest","LightDOMTemplate","RemoveUnresolvedAttribute"],Object(b.a)(_.a)));window.customElements.define("ff-suggest-item",P)},function(e,t,n){var i=n(1),r=n(38),a=n(54),o=n(55);function s(t){var n="function"==typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!a(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return o(e,arguments,i(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r(t,e)},s(t)}e.exports=s},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var i=n(19),r=n.n(i),a=n(3),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(4),h=n.n(d),p=n(2),m=n.n(p),f=n(6),g=n.n(f),v=(n(18),n(21)),y=n(10).a,_=Object(v.a)(function(e){return function(e){function t(){var e;return o()(this,t),(e=c()(this,u()(t).call(this))).__dataEnabled=!1,e.__dataReady=!1,e.__dataInvalid=!1,e.__data={},e.__dataPending=null,e.__dataOld=null,e.__dataInstanceProps=null,e.__serializing=!1,e._initializeProperties(),e}return g()(t,e),m()(t,[{key:"_createPropertyAccessor",value:function(e,t){this._addPropertyToAttributeMap(e),this.hasOwnProperty("__dataHasAccessor")||(this.__dataHasAccessor=Object.assign({},this.__dataHasAccessor)),this.__dataHasAccessor[e]||(this.__dataHasAccessor[e]=!0,this._definePropertyAccessor(e,t))}},{key:"_addPropertyToAttributeMap",value:function(e){if(this.hasOwnProperty("__dataAttributes")||(this.__dataAttributes=Object.assign({},this.__dataAttributes)),!this.__dataAttributes[e]){var t=this.constructor.attributeNameForProperty(e);this.__dataAttributes[t]=e}}},{key:"_definePropertyAccessor",value:function(e,t){Object.defineProperty(this,e,{get:function(){return this._getProperty(e)},set:t?function(){}:function(t){this._setProperty(e,t)}})}}],[{key:"createProperties",value:function(e){var t=this.prototype;for(var n in e)n in t||t._createPropertyAccessor(n)}},{key:"attributeNameForProperty",value:function(e){return e.toLowerCase()}},{key:"typeForProperty",value:function(e){}}]),m()(t,[{key:"ready",value:function(){this.__dataReady=!0,this._flushProperties()}},{key:"_initializeProperties",value:function(){for(var e in this.__dataHasAccessor)this.hasOwnProperty(e)&&(this.__dataInstanceProps=this.__dataInstanceProps||{},this.__dataInstanceProps[e]=this[e],delete this[e])}},{key:"_initializeInstanceProperties",value:function(e){Object.assign(this,e)}},{key:"_setProperty",value:function(e,t){this._setPendingProperty(e,t)&&this._invalidateProperties()}},{key:"_getProperty",value:function(e){return this.__data[e]}},{key:"_setPendingProperty",value:function(e,t,n){var i=this.__data[e],r=this._shouldPropertyChange(e,t,i);return r&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),!this.__dataOld||e in this.__dataOld||(this.__dataOld[e]=i),this.__data[e]=t,this.__dataPending[e]=t),r}},{key:"_invalidateProperties",value:function(){var e=this;!this.__dataInvalid&&this.__dataReady&&(this.__dataInvalid=!0,y.run(function(){e.__dataInvalid&&(e.__dataInvalid=!1,e._flushProperties())}))}},{key:"_enableProperties",value:function(){this.__dataEnabled||(this.__dataEnabled=!0,this.__dataInstanceProps&&(this._initializeInstanceProperties(this.__dataInstanceProps),this.__dataInstanceProps=null),this.ready())}},{key:"_flushProperties",value:function(){var e=this.__data,t=this.__dataPending,n=this.__dataOld;this._shouldPropertiesChange(e,t,n)&&(this.__dataPending=null,this.__dataOld=null,this._propertiesChanged(e,t,n))}},{key:"_shouldPropertiesChange",value:function(e,t,n){return Boolean(t)}},{key:"_propertiesChanged",value:function(e,t,n){}},{key:"_shouldPropertyChange",value:function(e,t,n){return n!==t&&(n==n||t==t)}},{key:"attributeChangedCallback",value:function(e,n,i,r){n!==i&&this._attributeToProperty(e,i),h()(u()(t.prototype),"attributeChangedCallback",this)&&h()(u()(t.prototype),"attributeChangedCallback",this).call(this,e,n,i,r)}},{key:"_attributeToProperty",value:function(e,t,n){if(!this.__serializing){var i=this.__dataAttributes,r=i&&i[e]||e;this[r]=this._deserializeValue(t,n||this.constructor.typeForProperty(r))}}},{key:"_propertyToAttribute",value:function(e,t,n){this.__serializing=!0,n=arguments.length<3?this[e]:n,this._valueToNodeAttribute(this,n,t||this.constructor.attributeNameForProperty(e)),this.__serializing=!1}},{key:"_valueToNodeAttribute",value:function(e,t,n){var i=this._serializeValue(t);void 0===i?e.removeAttribute(n):e.setAttribute(n,i)}},{key:"_serializeValue",value:function(e){switch(r()(e)){case"boolean":return e?"":void 0;default:return null!=e?e.toString():void 0}}},{key:"_deserializeValue",value:function(e,t){switch(t){case Boolean:return null!==e;case Number:return Number(e);default:return e}}}]),t}(e)})},function(e,t){function n(t,i){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,i)}e.exports=n},function(e,t,n){"use strict";n.r(t),n.d(t,"ElementLogBehavior",function(){return m});var i=n(3),r=n.n(i),a=n(2),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(6),h=n.n(d),p=n(0),m=function(e){return function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return h()(t,e),o()(t,[{key:"trace",value:function(e){this._isLogLevelActive("trace")&&(e=this._createMsg("trace",e),this._logTrace(e))}},{key:"info",value:function(e){this._isLogLevelActive("info")&&(e=this._createMsg("info",e),this._logInfo(e))}},{key:"debug",value:function(e){this._isLogLevelActive("debug")&&(e=this._createMsg("debug",e),this._logDebug(e))}},{key:"warn",value:function(e){this._isLogLevelActive("warn")&&(e=this._createMsg("warn",e),this._logWarn(e))}},{key:"error",value:function(e){this._isLogLevelActive("error")&&(e=this._createMsg("error",e),this._logError(e))}},{key:"_getMsgStart",value:function(e){return"".concat(e.toUpperCase()," ").concat(this.is,": ")}},{key:"_createMsg",value:function(e,t){return"".concat(this._getMsgStart(e)," ").concat(t)}},{key:"_isLogLevelActive",value:function(e){switch(this.logLevel.toLowerCase()||p.a.common.logLevel){case"trace":return"trace"===e||"debug"===e||"info"===e||"warn"===e||"error"===e;case"debug":return"debug"===e||"info"===e||"warn"===e||"error"===e;case"info":return"info"===e||"warn"===e||"error"===e;case"warn":return"warn"===e||"error"===e;case"error":return"error"===e;default:return!1}}},{key:"_logTrace",value:function(e){try{console.info(e)}catch(t){console.log(e)}}},{key:"_logDebug",value:function(e){try{console.debug(e)}catch(t){console.log(e)}}},{key:"_logInfo",value:function(e){try{console.info(e)}catch(t){console.log(e)}}},{key:"_logWarn",value:function(e){try{console.warn(e)}catch(t){console.log(e)}}},{key:"_logError",value:function(e){try{console.error(e)}catch(t){console.log(e)}}}],[{key:"properties",get:function(){return{logLevel:{type:String,value:""}}}}]),t}(e)}},function(e,t,n){"use strict";n.r(t),n.d(t,"CollapseElementBehavior",function(){return p});var i=n(3),r=n.n(i),a=n(2),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(6),h=n.n(d),p=function(e){return function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return h()(t,e),o()(t,[{key:"__transitionEnd",value:function(e){var t=this,n=e&&e.nodeName?e:e.currentTarget;try{n.__transitionActive__=!1,n.removeEventListener("transitionend",this.__transitionEnd),"0px"!==n.style.height?(this._updateTransition(n,!1),n.style.height="",n.style.overflow="",setTimeout(function(){return t._updateTransition(n,!0)})):this._updateTransition(n,!0)}catch(e){console.log(e)}finally{if(n&&n.__collapseCallback__){var i=n.__collapseCallback__;delete n.__collapseCallback__,setTimeout(function(){try{i()}catch(e){console.log(e)}},16)}}}},{key:"_updateTransition",value:function(e,t){e.style["transition-duration"]=!0===t?"":"0ms"}},{key:"_isDisplayed",value:function(e){var t=e.getBoundingClientRect();for(var n in t)if(0!==t[n])return!0;return!1}},{key:"_calcSize",value:function(e){var t=e.getBoundingClientRect();return"".concat(t.height,"px")}},{key:"_hide",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=2<arguments.length?arguments[2]:void 0;try{this._doTransition(e,t,"0px",n)}catch(e){console.log(e)}}},{key:"_show",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=2<arguments.length?arguments[2]:void 0;try{this._doTransition(e,t,"auto",n)}catch(e){console.log(e)}}},{key:"_toggle",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=2<arguments.length?arguments[2]:void 0,i=this._calcSize(e).replace(/\D/g,""),r=e.hasAttribute("opened");0<parseFloat(i)&&!r?this._hide(e,t,n):r?this._hide(e,t,n):this._show(e,t,n)}},{key:"_doTransition",value:function(e,t,n,i){if(!e.__transitionActive__){e.__transitionActive__=!0,i&&(e.__collapseCallback__=i);var r=window.getComputedStyle(e),a=r["transition-duration"]||r.transitionDuration;if(t=a&&"0"!==a.replace(/\D/g,"")&&t,this._updateTransition(e,!1),t&&this._isDisplayed(e)){var o=this._calcSize(e);if("auto"===n&&(e.style.height="",n=this._calcSize(e)),n===(e.style.height=o))return e.style.height="",e.__transitionActive__=!1,delete e.__collapseCallback__,void this._updateTransition(e,t);e.offsetHeight,this._updateTransition(e,t),e.addEventListener("transitionend",this.__transitionEnd.bind(this))}"0px"===n?(e.style.overflow="hidden",e.removeAttribute("opened")):e.setAttribute("opened",""),e.style.height=n,t&&this._isDisplayed(e)||(e.offsetHeight,this.__transitionEnd(e))}}},{key:"_showChecked",value:function(e,t){e&&this._show(e,t)}},{key:"_hideChecked",value:function(e,t){e&&this._hide(e,t)}},{key:"_toggleChecked",value:function(e,t){e&&this._toggle(e,t)}}]),t}(e)}},function(e,t,n){"use strict";var i,r=n(3),a=n.n(r),o=n(2),s=n.n(o),c=null,l=window.HTMLImports&&window.HTMLImports.whenReady||null;function u(e){requestAnimationFrame(function(){l?l(e):(c||(c=new Promise(function(e){i=e}),"complete"===document.readyState?i():document.addEventListener("readystatechange",function(){"complete"===document.readyState&&i()})),c.then(function(){e&&e()}))})}n.d(t,"a",function(){return f});var d="__seenByShadyCSS",h="__shadyCSSCachedStyle",p=null,m=null,f=function(){function e(){a()(this,e),this.customStyles=[],this.enqueued=!1,u(function(){window.ShadyCSS.flushCustomStyles&&window.ShadyCSS.flushCustomStyles()})}return s()(e,[{key:"enqueueDocumentValidation",value:function(){!this.enqueued&&m&&(this.enqueued=!0,u(m))}},{key:"addCustomStyle",value:function(e){e[d]||(e[d]=!0,this.customStyles.push(e),this.enqueueDocumentValidation())}},{key:"getStyleForCustomStyle",value:function(e){return e[h]?e[h]:e.getStyle?e.getStyle():e}},{key:"processStyles",value:function(){for(var e=this.customStyles,t=0;t<e.length;t++){var n=e[t];if(!n[h]){var i=this.getStyleForCustomStyle(n);if(i){var r=i.__appliedElement||i;p&&p(r),n[h]=r}}}return e}}]),e}();f.prototype.addCustomStyle=f.prototype.addCustomStyle,f.prototype.getStyleForCustomStyle=f.prototype.getStyleForCustomStyle,f.prototype.processStyles=f.prototype.processStyles,Object.defineProperties(f.prototype,{transformCallback:{get:function(){return p},set:function(e){p=e}},validateCallback:{get:function(){return m},set:function(e){var t=!1;m||(t=!0),m=e,t&&this.enqueueDocumentValidation()}}})},function(e,t,n){"use strict";n.r(t),n.d(t,"SearchBox",function(){return P});var i=n(3),r=n.n(i),a=n(5),o=n.n(a),s=n(1),c=n.n(s),l=n(4),u=n.n(l),d=n(2),h=n.n(d),p=n(6),m=n.n(p),f=n(13),g=n.n(f),v=n(7),y=n(20),_=n(10),b=n(15),C=n(12),k=n(0),S=n(9),w=n(35),P=function(e){function t(){var e;return r()(this,t),(e=o()(this,c()(t).call(this))).selectedIndex=-1,e._ffCommunication=k.a.communication.FFCommunicationEventAggregator,e._externalHighlightKey=k.a.communication.ResultDispatcher.subscribe("ff_suggestHighlight",e._handleExternalHighlight,g()(g()(e))),e.resetInput(),e}return m()(t,e),h()(t,null,[{key:"is",get:function(){return"ff-searchbox"}},{key:"properties",get:function(){return{suggestOnfocus:{type:String,value:"false"},hidesuggestOnblur:{type:String,value:"true"},selectOnclick:{type:String,value:"false"},useSuggest:{type:String,value:"true"},suggestDelay:{type:Number,value:0}}}}]),h()(t,[{key:"ready",value:function(){var e=this;u()(c()(t.prototype),"ready",this).call(this),this.input.addEventListener("input",function(t){return e._inputValueChanged(t)}),this.input.addEventListener("blur",function(t){return e._inputValueChanged(t)}),this.input.addEventListener("focus",function(t){return e._inputValueChanged(t)}),"true"===this.selectOnclick?C.addListener(this,"tap",this.input.select.bind(this)):"false"!==this.selectOnclick&&this.warn("select-onclick has to be either 'true' or 'false'"),this.input.onkeyup=function(t){13===t.keyCode&&e._onEnter(),27===t.keyCode&&e._hideSuggest(),40===t.keyCode&&e._onArrowDown(t),38===t.keyCode&&e._onArrowUp(t),37===t.keyCode&&e.move("left"),39===t.keyCode&&e.move("right")};try{var n=k.a.common.parameterStringToDict(k.a.common.getParameterString()).query;n&&(this.input.value=k.a.common.fixedDecodeURIComponent(n[0]))}catch(n){console.error(n)}}},{key:"connectedCallback",value:function(){u()(c()(t.prototype),"connectedCallback",this).call(this),this._subscriptionKey||(this._subscriptionKey=k.a.communication.ResultDispatcher.subscribe("bct",this._queryChanged,this))}},{key:"disconnectedCallback",value:function(){u()(c()(t.prototype),"disconnectedCallback",this).call(this),this._subscriptionKey&&(k.a.communication.ResultDispatcher.unsubscribe("bct",this._subscriptionKey),this._subscriptionKey=null)}},{key:"_queryChanged",value:function(e){if(e&&e[0]){var t=e[0];this.input.value=t.text,k.a.communication.globalElementValues.currentFFSearchBoxValue=this.input.value}}},{key:"_inputValueChanged",value:function(e){var t=this;e&&("focus"===e.type&&("true"===this.suggestOnfocus?this._triggerSuggest():"false"!==this.suggestOnfocus&&this.warn("suggest-onfocus has to be either 'true' or 'false'")),"input"===e.type&&(k.a.communication.globalElementValues.currentFFSearchBoxValue=e.currentTarget.value,this._triggerSuggest()),"blur"===e.type?"true"===this.hidesuggestOnblur?_.b.run(function(){return t._hideSuggest()},150):"false"!==this.hidesuggestOnblur&&this.warn("hidesuggest-onblur has to be either 'true' or 'false'"):e.detail&&void 0!==e.detail.value&&this._ffCommunication.addFFEvent({type:"suggest",query:e.detail.value}))}},{key:"_triggerSuggest",value:function(){var e=this;"false"!==this.useSuggest&&(this.resetHighlight(),this._debounceJob=y.a.debounce(this._debounceJob,_.b.after(this.suggestDelay),function(){return e._fireSuggest()}))}},{key:"_fireSuggest",value:function(){if(this.input.value&&2<=this.input.value.length){var e={type:"suggest",query:this.input.value};this.dispatchEvent(new CustomEvent("before-suggest",{detail:e,bubbles:!0})),this._ffCommunication.addFFEvent(e)}else this._hideSuggest()}},{key:"_hideSuggest",value:function(){this.resetHighlight(),k.a.communication.ResultDispatcher.dispatchSuggest(void 0,null)}},{key:"search",value:function(){var e={type:"search",query:this.input.value};this.dispatchEvent(new CustomEvent("before-target",{detail:e})),this._ffCommunication.addFFEvent(e)}},{key:"_onEnter",value:function(){-1!=this.selectedIndex?this.searchSelected():this.search(),this._hideSuggest()}},{key:"_onArrowUp",value:function(e){this.input.setSelectionRange(this.input.value.length,this.input.value.length);var t=this.getSuggestItems();if(0<t.length&&(this.removeHighlight(t[this.selectedIndex]),0<this.selectedIndex?(this.selectedIndex--,this.setHighlight(t[this.selectedIndex])):this.selectedIndex),-1!=this.selectedIndex)return e.stopPropagation(),e.preventDefault(),e.returnValue=!1,!(e.cancelBubble=!0)}},{key:"_onArrowDown",value:function(e){var t=this.getSuggestItems();0<t.length&&(-1!==this.selectedIndex&&this.removeHighlight(t[this.selectedIndex]),this.selectedIndex<t.length-1&&this.selectedIndex++,this.setHighlight(t[this.selectedIndex]))}},{key:"move",value:function(e){var t=this.getSuggestItems(),n=t[this.selectedIndex];if(n){var i=n.getBoundingClientRect(),r=[];t.forEach(function(t){var n=t.getBoundingClientRect();"left"===e&&n.left<i.left?r.push(t):"right"===e&&n.left>i.left&&r.push(t)});var a=null,o=9999;r.forEach(function(e){var t=Math.abs(e.getBoundingClientRect().top-i.top);a?t<o&&(a=e,o=t):(a=e,o=t)}),a&&(this.removeHighlight(n),this.setHighlight(a),this.selectedIndex=t.indexOf(a))}}},{key:"searchSelected",value:function(){var e=this.getSuggestItems()[this.selectedIndex];k.a.common.fireCustomEvent("tap",!0,!0,e)}},{key:"getSuggestItems",value:function(){var e=this,t=document.querySelectorAll(w.a.is);return Array.from(t).filter(function(t){return e._isDisplayed(t)})}},{key:"_isDisplayed",value:function(e){var t=e.getBoundingClientRect();for(var n in t)if(0!==t[n])return!0;return!1}},{key:"_handleExternalHighlight",value:function(e){this.setHighlight(e.element),this.selectedIndex=e.selectedIndex}},{key:"setHighlight",value:function(e){if(e.classList.add("ff-highlight-suggest-item"),e._onfocus)try{e._onfocus()}catch(e){console.log(e)}}},{key:"removeHighlight",value:function(e){e.classList.remove("ff-highlight-suggest-item")}},{key:"resetHighlight",value:function(){this.selectedIndex=-1,this.getSuggestItems().forEach(function(e){e.classList.remove("ff-highlight-suggest-item")})}},{key:"resetInput",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"input";this.input=this.querySelector(e)}}]),t}(Object(S.a)(["ElementLog"],Object(b.a)(v.a)));window.customElements.define(P.is,P)},function(e,t,n){var i=n(46),r=n(47),a=n(48);e.exports=function(e,t){return i(e)||r(e,t)||a()}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return PagingSet});var _babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8),_babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__),_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(4),_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_5__),_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(6),_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6__),_polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(7),_behaviors_BehaviorDecorator__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(9),ff_core_dist_ff_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(0);function _templateObject(){var e=_babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_0___default()(["<style>:host{display:inline-block}</style><slot></slot>"]);return _templateObject=function(){return e},e}var PagingSet=function(_BehaviorDecorator){function PagingSet(){return _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this,PagingSet),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default()(this,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default()(PagingSet).apply(this,arguments))}return _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6___default()(PagingSet,_BehaviorDecorator),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(PagingSet,[{key:"ready",value:function(){_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_5___default()(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default()(PagingSet.prototype),"ready",this).call(this),this.attributeName="display",this.stateTwoValue="none",this.activateStateTwo()}},{key:"_pagingChanged",value:function _pagingChanged(paging){if("all"!==this.state){var state=this.state.replace(/currentPage/g,paging.currentPage);if(state=state.replace(/pageCount/g,paging.pageCount),/[a-zA-Z]/.test(state))return this._setIsActive(!1),this.activateStateTwo(),void ff_core_dist_ff_core__WEBPACK_IMPORTED_MODULE_9__.a.common.Logger.error("alphanumerical values are not allow. could not resolve ["+/[a-zA-Z].*/.exec(state)+"] in state ["+state+"]");try{this._setIsActive(eval(state)),this.isActive?this.activateStateOne():this.activateStateTwo()}catch(e){this._setIsActive(!1),this.activateStateTwo()}}else this.isActive=!0}},{key:"hide",value:function(){this.activateStateTwo()}},{key:"show",value:function(){this.activateStateOne()}}],[{key:"is",get:function(){return"ff-paging-set"}},{key:"properties",get:function(){return{state:{type:String,value:"all"},paging:{type:Object,observer:"_pagingChanged"},isActive:{type:Boolean,readOnly:!0}}}},{key:"template",get:function(){return Object(_polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_7__.b)(_templateObject())}}]),PagingSet}(Object(_behaviors_BehaviorDecorator__WEBPACK_IMPORTED_MODULE_8__.a)(["CssAttributeToggle","RemoveUnresolvedAttribute"],_polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_7__.a));window.customElements.define(PagingSet.is,PagingSet)},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,n){"use strict";n.r(t);var i=n(7),r=i.a.prototype.attributeChangedCallback;i.a.prototype.attributeChangedCallback=function(e,t,n){r.apply(this,arguments);var i=e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()}),a=this.constructor.properties[i];a&&a.type===Boolean&&n&&"false"===n.toLowerCase()&&console.warn("Attribute [".concat(e,'] is present and set to "false"; however, its corresponding property [').concat(i,'] is of Boolean type.\nThis will NOT cause the property to be "false", it will become "true" because of the presence of the attribute! \nSee https://web-components.fact-finder.de/documentation/attribute-basics for more information. Related component:\n'),this)}},function(e,t,n){var i=n(1);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e}},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},function(e,t,n){var i=n(38);function r(t,n,a){return function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?e.exports=r=Reflect.construct:e.exports=r=function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&i(a,n.prototype),a},r.apply(null,arguments)}e.exports=r},function(e,t,n){"use strict";n.r(t);var i=n(3),r=n.n(i),a=n(5),o=n.n(a),s=n(1),c=n.n(s),l=n(4),u=n.n(l),d=n(2),h=n.n(d),p=n(6),m=n.n(p),f=n(7),g=n(10),v=n(0),y=function(e){function t(){var e;return r()(this,t),e=o()(this,c()(t).call(this)),v.a.communication.version="3.0",e._globalCommParams=v.a.communication.globalCommunicationParameter,e.communicationHistoryFallbackTopic="_ff-communication-history-fallback",e}return m()(t,e),h()(t,null,[{key:"is",get:function(){return"ff-communication"}},{key:"properties",get:function(){return{ajax:{type:Boolean,observer:"_ajaxChanged"},useUrlParameter:{type:String,value:"true",observer:"_useUrlParameterChanged"},onlySearchParams:{type:Boolean,observer:"_onlySearchParamsChanged"},parameterWhitelist:{type:String,value:"query,filter",observer:"_parameterWhitelistChanged"},useBrowserHistory:{type:String,value:"true",observer:"_useBrowserHistory"},userId:{type:String,observer:"_userIdChanged"},searchImmediate:{type:Boolean},useCache:{type:Boolean,observer:"_useCacheChanged"},version:{type:String,observer:"_versionChanged"},channel:{type:String,observer:"_channelChanged"},url:{type:String,observer:"_urlChanged"},searchUrl:{type:String,observer:"_searchUrlChanged"},suggestUrl:{type:String,observer:"_suggestUrlChanged"},recommendationUrl:{type:String,observer:"_recommendationUrlChanged"},tagCloudUrl:{type:String,observer:"_tagCloudUrlChanged"},trackingUrl:{type:String,observer:"_trackingUrlChanged"},campaignUrl:{type:String,observer:"_campaignUrlChanged"},compareUrl:{type:String,observer:"_compareUrlChanged"},similarRecordsUrl:{type:String,observer:"_similarRecordsUrlChanged"},getRecordsUrl:{type:String,observer:"_getRecordsUrlChanged"},defaultQuery:{type:String,value:"*",observer:"_defaultQueryChanged"},addParams:{type:String,observer:"_addParamsChanged"},addTrackingParams:{type:String,observer:"_addTrackingParamsChanged"},keepFilters:{type:Boolean,value:!1,observer:"_keepFiltersChanged"},keepUrlParams:{type:String,observer:"_keepUrlParamsChanged"},sid:{type:"String",observer:"_sidChanged"},useAsn:{type:String,value:"true",observer:"_useAsnChanged"},useFoundWords:{type:String,value:"false",observer:"_useFoundWordsChanged"},useCampaigns:{type:String,value:"true",observer:"_useCampaignsChanged"},generateAdvisorTree:{type:String,value:"false",observer:"_generateAdvisorTreeChanged"},disableCache:{type:String,value:"false",observer:"_disableCacheChanged"},usePersonalization:{type:String,value:"true",observer:"_usePersonalizationChanged"},useSemanticEnhancer:{type:String,value:"true",observer:"_useSemanticEnhancerChanged"},useAso:{type:String,value:"true",observer:"_useAsoChanged"},useSeo:{type:String,value:"false",observer:"_useSeoChanged"},seoPrefix:{type:String,value:"",observer:"_seoPrefixChanged"},ignorePage:{type:String,value:"false"},currencyCode:{type:String,observer:"_currencyCodeChanged"},currencyCountryCode:{type:String,observer:"_currencyCountryCodeChanged"},currencyFields:{tpe:String,observer:"_currencyFieldsChanged"},currencyMinDigits:{tpe:String,value:"2",observer:"_currencyMinDigitsChanged"},currencyMaxDigits:{tpe:String,value:"2",observer:"_currencyMaxDigitsChanged"},disableSingleHitRedirect:{type:String,value:"false",observer:"_disableSingleHitRedirectChanged"},singleHitRedirectBasePath:{type:String,observer:"_singleHitRedirectBasePathChanged"},useFilterUrl:{type:String,value:"false",observer:"_useFilterUrlChanged"},filterUrlPrefix:{type:String,value:"",observer:"_filterUrlPrefixChanged"},addUnitToFilterElements:{type:Boolean,observer:"_addUnitToFilterElements"},sortUrlParametersAlphabetically:{type:String,observer:"_enableSortUrlParametersAlphabetically"},asyncFacets:{type:Boolean,observer:"_asyncFacetsChanged"}}}}]),h()(t,[{key:"_asyncFacetsChanged",value:function(e){this._globalCommParams.asyncFacets=!!e}},{key:"_addUnitToFilterElements",value:function(e){if(this.addUnitsKey&&v.a.communication.ResultDispatcher.unsubscribe(this.addUnitsKey,"asn"),e)try{this.addUnitsKey=v.a.communication.ResultDispatcher.subscribe("asn",function(e){e.forEach(function(e){e.unit&&e.elements.concat(e.selectedElements).forEach(function(t){t.name.indexOf(e.unit)<0&&(t.name=t.name+" "+e.unit)})})},this)}catch(e){console.log(e)}}},{key:"connectedCallback",value:function(){u()(c()(t.prototype),"connectedCallback",this).call(this);var e=this;v.a.communication.ResultDispatcher.subscribe(this.communicationHistoryFallbackTopic,function(e){e=v.a.communication.FFCommunicationEventAggregator.currentSearchResult=e.searchResult||e,v.a.communication.ResultDispatcher.dispatchResult(e)}),window.addEventListener("popstate",function(t){if(1==e._globalCommParams.useBrowserHistory&&v.a.common.isOk(t))if(e._globalCommParams.useCache||v.a.common.Logger.log('<ff-communication use-cache="false"> is currently disabled. '),v.a.common.isOk(t.state))if(t.state._typeFlag===v.a.common.HistoryEntry._typeFlag){var n=v.a.common.urlStringToDict(t.state.searchParams);n.type="search",n.topics=function(){return[this.communicationHistoryFallbackTopic]},v.a.communication.FFCommunicationEventAggregator.addFFEvent(n)}else{var i=t.state.searchResult||t.state;v.a.communication.FFCommunicationEventAggregator.currentSearchResult=i,v.a.communication.ResultDispatcher.dispatchResult(i,null)}else{var r={campaigns:[]};v.a.communication.FFCommunicationEventAggregator.currentSearchResult=r,v.a.communication.ResultDispatcher.dispatchResult(r,null)}}),this.searchImmediate&&this.search(!0)}},{key:"search",value:function(e){var t=v.a.common.getParameterString(),n=t?v.a.common.parameterStringToDict(t,!0):{};n.type="search",n.__immediate=e,"true"===this.ignorePage&&delete n.page,this.checkSeo(n),this.checkFilterUrl(n),v.a.communication.FFCommunicationEventAggregator.addFFEvent(n)}},{key:"checkSeo",value:function(e){if(v.a.communication.globalCommunicationParameter.useSeo){var t=window.location.pathname.replace(v.a.communication.globalCommunicationParameter.seoPrefix+"","");e.seoPath=encodeURIComponent(t),delete e.query,e["ff-seo-initial"]=!0}}},{key:"checkFilterUrl",value:function(e){if(v.a.communication.globalCommunicationParameter.useFilterURL){var t=window.location.pathname;"/"==t.substr(0,1)&&(t=t.substr(1));var n=t.replace(v.a.communication.globalCommunicationParameter.filterUrlPrefix,"");"/"==n.substr(0,1)&&(n=n.substr(1));for(var i=n.split("/"),r=[],a=0;a<i.length;a++)if(-1===i[a].indexOf(".")){var o={};if(0==a)o.key="filterCategoryROOT";else{var s=r[a-1];o.key=s.key+"/"+s.value}o.value=i[a],null!=o.value&&""!==o.value&&r.push(o)}0<r.length&&r.forEach(function(t){e[t.key]=v.a.common.fixedDecodeURIComponent(t.value)})}}},{key:"_currencyCountryCodeChanged",value:function(e){v.a.communication.globalCommunicationParameter.currencyCountryCode=e}},{key:"_currencyCodeChanged",value:function(e){v.a.communication.globalCommunicationParameter.currencyCode=e}},{key:"_currencyFieldsChanged",value:function(e){v.a.communication.globalCommunicationParameter.currencyFields=e}},{key:"_currencyMinDigitsChanged",value:function(e){v.a.communication.globalCommunicationParameter.currencyMinDigits=e}},{key:"_currencyMaxDigitsChanged",value:function(e){v.a.communication.globalCommunicationParameter.currencyMaxDigits=e}},{key:"_useCacheChanged",value:function(e){v.a.communication.globalCommunicationParameter.useCache=e}},{key:"_useUrlParameterChanged",value:function(e){v.a.communication.globalCommunicationParameter.useUrlParameter="true"==e}},{key:"_useBrowserHistory",value:function(e){v.a.communication.globalCommunicationParameter.useBrowserHistory="true"==e}},{key:"_ajaxChanged",value:function(e){v.a.communication.globalCommunicationParameter.ajax=e}},{key:"_urlChanged",value:function(e){e&&(v.a.communication.globalSearchParameter.url=e.trim())}},{key:"_searchUrlChanged",value:function(e){v.a.communication.globalCustomUrls.serachUrl=e}},{key:"_suggestUrlChanged",value:function(e){v.a.communication.globalCustomUrls.suggestUrl=e}},{key:"_recommendationUrlChanged",value:function(e){v.a.communication.globalCustomUrls.recommendationUrl=e}},{key:"_tagCloudUrlChanged",value:function(e){v.a.communication.globalCustomUrls.tagCloudUrl=e}},{key:"_trackingUrlChanged",value:function(e){v.a.communication.globalCustomUrls.trackingUrl=e}},{key:"_campaignUrlChanged",value:function(e){v.a.communication.globalCustomUrls.campaignUrl=e}},{key:"_compareUrlChanged",value:function(e){v.a.communication.globalCustomUrls.compareUrl=e}},{key:"_similarRecordsUrlChanged",value:function(e){v.a.communication.globalCustomUrls.similarRecordsUrl=e}},{key:"_getRecordsUrlChanged",value:function(e){v.a.communication.globalCustomUrls.getRecordsUrl=e}},{key:"_channelChanged",value:function(e){v.a.communication.globalSearchParameter.channel=e}},{key:"_versionChanged",value:function(e){v.a.communication.globalSearchParameter.version=e}},{key:"_defaultQueryChanged",value:function(e){v.a.communication.globalSearchParameter.query=encodeURIComponent(e)}},{key:"_sidChanged",value:function(e){v.a.communication.globalCommunicationParameter.sid=e}},{key:"_addParamsChanged",value:function(e){v.a.communication.globalCommunicationParameter.addParams=e}},{key:"_addTrackingParamsChanged",value:function(e){v.a.communication.globalCommunicationParameter.addTrackingParams=e}},{key:"_keepFiltersChanged",value:function(e){v.a.communication.globalCommunicationParameter.keepFilters=e}},{key:"_keepUrlParamsChanged",value:function(e){v.a.communication.globalCommunicationParameter.keepUrlParams=e}},{key:"_useAsnChanged",value:function(e){v.a.communication.globalCommunicationParameter.useAsn="true"===e}},{key:"_useFoundWordsChanged",value:function(e){v.a.communication.globalCommunicationParameter.useFoundWords="true"===e}},{key:"_useCampaignsChanged",value:function(e){v.a.communication.globalCommunicationParameter.useCampaigns="true"===e}},{key:"_generateAdvisorTreeChanged",value:function(e){v.a.communication.globalCommunicationParameter.generateAdvisorTree="true"===e}},{key:"_userIdChanged",value:function(e){(v.a.communication.globalCommunicationParameter.userId=e)&&g.a.run(function(){var t={userId:e};v.a.communication.sessionManager.checkSession(t),v.a.communication.trackingManager.login(t)})}},{key:"_disableCacheChanged",value:function(e){v.a.communication.globalCommunicationParameter.disableCache="true"===e}},{key:"_usePersonalizationChanged",value:function(e){v.a.communication.globalCommunicationParameter.usePersonalization="true"===e}},{key:"_useSemanticEnhancerChanged",value:function(e){v.a.communication.globalCommunicationParameter.useSemanticEnhancer="true"===e}},{key:"_useAsoChanged",value:function(e){v.a.communication.globalCommunicationParameter.useAso="true"===e}},{key:"_useSeoChanged",value:function(e){v.a.communication.globalCommunicationParameter.useSeo="true"===e}},{key:"_seoPrefixChanged",value:function(e){v.a.communication.globalCommunicationParameter.seoPrefix=e}},{key:"_disableSingleHitRedirectChanged",value:function(e){v.a.communication.globalCommunicationParameter.singleHitRedirect=!("true"===e)}},{key:"_enableSortUrlParametersAlphabetically",value:function(e){v.a.communication.globalCommunicationParameter.sortUrlParametersAlphabetically="true"===e}},{key:"_singleHitRedirectBasePathChanged",value:function(e){v.a.communication.globalCommunicationParameter.singleHitRedirectBasePath=e}},{key:"_useFilterUrlChanged",value:function(e){v.a.communication.globalCommunicationParameter.useFilterURL="true"===e}},{key:"_filterUrlPrefixChanged",value:function(e){v.a.communication.globalCommunicationParameter.filterUrlPrefix=e}},{key:"_onlySearchParamsChanged",value:function(e){v.a.communication.globalCommunicationParameter.onlySearchParams=e}},{key:"_parameterWhitelistChanged",value:function(e){v.a.communication.globalCommunicationParameter.parameterWhitelist=e}}]),t}(f.a);window.customElements.define("ff-communication",y)},function(e,t,n){"use strict";n.r(t),n.d(t,"SearchButton",function(){return _});var i=n(3),r=n.n(i),a=n(2),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(4),h=n.n(d),p=n(6),m=n.n(p),f=n(7),g=n(15),v=n(12),y=n(0),_=function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return m()(t,e),o()(t,[{key:"_buttonTapped",value:function(e){try{y.a.communication.FFCommunicationEventAggregator.addFFEvent({type:"search",query:y.a.communication.globalElementValues.currentFFSearchBoxValue||y.a.communication.globalSearchParameter.query})}catch(e){y.a.common.Logger.error("No ff-searchbox found.")}}},{key:"ready",value:function(){h()(u()(t.prototype),"ready",this).call(this),this.resetButton()}},{key:"connectedCallback",value:function(){h()(u()(t.prototype),"connectedCallback",this).call(this),v.addListener(this.button,"tap",this._buttonTapped)}},{key:"disconnectedCallback",value:function(){h()(u()(t.prototype),"disconnectedCallback",this).call(this),v.removeListener(this.button,"tap",this._buttonTapped)}},{key:"resetButton",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"button";this.button=this.querySelector(e)}}],[{key:"is",get:function(){return"ff-searchbutton"}}]),t}(Object(g.a)(f.a));window.customElements.define(_.is,_)},function(e,t,n){"use strict";n.r(t),n.d(t,"CampaignFeedbackText",function(){return S});var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(4),h=n.n(d),p=n(2),m=n.n(p),f=n(6),g=n.n(f),v=n(7),y=n(14),_=n(11),b=n(9),C=n(0);function k(){var e=r()(["<style>:host{display:block}</style><slot></slot>"]);return k=function(){return e},e}var S=function(e){function t(){var e;return o()(this,t),(e=c()(this,u()(t).call(this))).subscribed=!1,e.attributeName="display",e.stateTwoValue="none",e}return g()(t,e),m()(t,[{key:"_recalcTopic",value:function(){return this._recalcSubscriptionTopic("feedbacktext","label")}},{key:"_subscribeElement",value:function(){(!(0<arguments.length&&void 0!==arguments[0])||arguments[0])&&this.topic&&this.subscribtionKey&&(C.a.communication.ResultDispatcher.unsubscribe(this.topic,this.subscribtionKey),this.subscribtionKey=null),this.topic=this._recalcTopic(),this.subscribtionKey=C.a.communication.ResultDispatcher.subscribe(this.topic,this._handleCampaign,this)}}],[{key:"is",get:function(){return"ff-campaign-feedbacktext"}},{key:"properties",get:function(){return{label:{type:String,value:"",observer:"_subscribeElement"},isProductCampaign:{type:Boolean,observer:"_subscribeElement"},isShoppingCartCampaign:{type:Boolean,observer:"_subscribeElement"}}}},{key:"template",get:function(){return Object(v.b)(k())}}]),m()(t,[{key:"ready",value:function(){h()(u()(t.prototype),"ready",this).call(this),this.updateTemplate(),this.activateStateTwo()}},{key:"connectedCallback",value:function(){h()(u()(t.prototype),"connectedCallback",this).call(this),this._subscribeElement()}},{key:"disconnectedCallback",value:function(){h()(u()(t.prototype),"disconnectedCallback",this).call(this),this.subscribtionKey&&(C.a.communication.ResultDispatcher.unsubscribe(this.topic,this.subscribtionKey),this.subscribtionKey=null)}},{key:"_handleCampaign",value:function(e){var t=this;e?(this.model&&e.text===this.model.text||(this.model=e),Object(_.b)(),this.activateStateOne(),Object(y.a)(this,function(){t.dispatchEvent(new CustomEvent("dom-updated",{bubbles:!0,composed:!0}))})):this.activateStateTwo()}}]),t}(Object(b.a)(["LightDOMTemplate","CssAttributeToggle","RemoveUnresolvedAttribute","CampaignHelper"],v.a));window.customElements.define(S.is,S)},function(e,t,n){"use strict";n.r(t),n.d(t,"CampaignLandingPage",function(){return y});var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(2),c=n.n(s),l=n(5),u=n.n(l),d=n(1),h=n.n(d),p=n(6),m=n.n(p),f=n(7),g=n(0);function v(){var e=r()(["<style>:host{display:block}</style><slot></slot>"]);return v=function(){return e},e}var y=function(e){function t(){return o()(this,t),u()(this,h()(t).apply(this,arguments))}return m()(t,e),c()(t,[{key:"_pageIdChanged",value:function(e,t){this.pageId?g.a.communication.FFCommunicationEventAggregator.addFFEvent({type:"pageCampaigns",pageId:this.pageId}):g.a.common.Logger.debug("No page id for page campaign specified.")}}],[{key:"is",get:function(){return"ff-campaign-landing-page"}},{key:"properties",get:function(){return{pageId:{type:"String",observer:"_pageIdChanged"}}}},{key:"template",get:function(){return Object(f.b)(v())}}]),t}(f.a);window.customElements.define(y.is,y)},function(e,t,n){"use strict";n.r(t),n.d(t,"CampaignPushedProducts",function(){return k});var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(4),h=n.n(d),p=n(2),m=n.n(p),f=n(6),g=n.n(f),v=n(7),y=n(0),_=n(9),b=n(22);function C(){var e=r()(["<style>:host{display:block}</style><slot></slot>"]);return C=function(){return e},e}var k=function(e){function t(){var e;return o()(this,t),(e=c()(this,u()(t).call(this))).attributeName="display",e.stateTwoValue="none",e.activateStateTwo(),e.topic="",e}return g()(t,e),m()(t,[{key:"_recalcTopic",value:function(){return this._recalcSubscriptionTopic("pushedProducts","name")}},{key:"_subscribeElement",value:function(){(!(0<arguments.length&&void 0!==arguments[0])||arguments[0])&&this.topic&&this.subscribtionKey&&y.a.communication.ResultDispatcher.unsubscribe(this.topic,this.subscribtionKey),this.topic=this._recalcTopic(),this.subscribtionKey=y.a.communication.ResultDispatcher.subscribe(this.topic,this._pushedProductsChanged,this)}}],[{key:"is",get:function(){return"ff-campaign-pushed-products"}},{key:"properties",get:function(){return{name:{type:"String",observer:"_subscribeElement"},isProductCampaign:{type:Boolean,observer:"_subscribeElement"},isShoppingCartCampaign:{type:Boolean,observer:"_subscribeElement"}}}},{key:"template",get:function(){return Object(v.b)(C())}}]),m()(t,[{key:"connectedCallback",value:function(){h()(u()(t.prototype),"connectedCallback",this).call(this),this._subscribeElement();var e=this.querySelector(b.RecordList.is);if(e){"true"===e.subscribe&&(console.warn("ff-campaign-pushed-products: automatic subscription of ff-record-list child component is turned on and will be turned off. Please, set ff-record-list 'subscribe' property to 'false' in your HTML code."),e.setAttribute("subscribe","false"));var n=e.subscribtionKey;n&&(console.warn("ff-campaign-pushed-products: ff-record-list child component is subscribed to search result and will be unsubscribed."),y.a.communication.ResultDispatcher.unsubscribe("records",n),e.subscribtionKey=null)}}},{key:"disconnectedCallback",value:function(){h()(u()(t.prototype),"disconnectedCallback",this).call(this),this.subscribtionKey&&(y.a.communication.ResultDispatcher.unsubscribe(this.topic,this.subscribtionKey),this.subscribtionKey=null)}},{key:"_pushedProductsChanged",value:function(e){if(e){var t=this.querySelector(b.RecordList.is);t?t.records=e:console.log("No ff-record-list element found for pushed products."),this.activateStateOne()}else this.activateStateTwo()}}]),t}(Object(_.a)(["CssAttributeToggle","RemoveUnresolvedAttribute","CampaignHelper"],v.a));window.customElements.define(k.is,k)},function(e,t,n){"use strict";n.r(t),n.d(t,"CampaignProduct",function(){return g});var i=n(3),r=n.n(i),a=n(2),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(6),h=n.n(d),p=n(7),m=n(9),f=n(0),g=function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return h()(t,e),o()(t,[{key:"_recordIdChanged",value:function(e,t){f.a.communication.FFCommunicationEventAggregator.addFFEvent({type:"productCampaign",productNumber:this.recordId})}}],[{key:"is",get:function(){return"ff-campaign-product"}},{key:"properties",get:function(){return{recordId:{type:"Number",observer:"_recordIdChanged"}}}}]),t}(Object(m.a)(["RemoveUnresolvedAttribute"],p.a));window.customElements.define(g.is,g)},function(e,t,n){"use strict";n.r(t),n.d(t,"CampaignRedirect",function(){return y});var i=n(3),r=n.n(i),a=n(2),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(4),h=n.n(d),p=n(6),m=n.n(p),f=n(7),g=n(9),v=n(0),y=function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return m()(t,e),o()(t,[{key:"connectedCallback",value:function(){h()(u()(t.prototype),"connectedCallback",this).call(this),this.subscribtionKey=v.a.communication.ResultDispatcher.subscribe(["campaign:redirect"],this._handleRedirect,this)}},{key:"disconnectedCallback",value:function(){h()(u()(t.prototype),"disconnectedCallback",this).call(this),this.subscribtionKey&&(v.a.communication.ResultDispatcher.unsubscribe(["campaign:redirect"],this.subscribtionKey),this.subscribtionKey=null)}},{key:"_handleRedirect",value:function(e){if(e){if(!this.relativeToOrigin)return e;var t=e.target.destination.replace(/^\/+/,"");return e.target.destination="".concat(location.protocol,"//").concat(location.host,"/").concat(t),e}}}],[{key:"is",get:function(){return"ff-campaign-redirect"}},{key:"properties",get:function(){return{relativeToOrigin:{type:Boolean,value:!1}}}}]),t}(Object(g.a)(["RemoveUnresolvedAttribute"],f.a));window.customElements.define(y.is,y)},function(e,t,n){"use strict";n.r(t),n.d(t,"CampaignShoppingCart",function(){return _});var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(2),c=n.n(s),l=n(5),u=n.n(l),d=n(1),h=n.n(d),p=n(6),m=n.n(p),f=n(7),g=n(9),v=n(0);function y(){var e=r()(["<style>:host{display:block}</style><slot></slot>"]);return y=function(){return e},e}var _=function(e){function t(){return o()(this,t),u()(this,h()(t).apply(this,arguments))}return m()(t,e),c()(t,[{key:"_recordIdChanged",value:function(e){e&&v.a.communication.FFCommunicationEventAggregator.addFFEvent({type:"shoppingCartCampaign",productNumber:e.split(",")})}}],[{key:"is",get:function(){return"ff-campaign-shopping-cart"}},{key:"properties",get:function(){return{recordId:{type:"String",observer:"_recordIdChanged"}}}},{key:"template",get:function(){return Object(f.b)(y())}}]),t}(Object(g.a)(["RemoveUnresolvedAttribute"],f.a));window.customElements.define(_.is,_)},function(e,t,n){"use strict";n.r(t),n.d(t,"ProductsPerPageItem",function(){return S});var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(2),c=n.n(s),l=n(5),u=n.n(l),d=n(1),h=n.n(d),p=n(4),m=n.n(p),f=n(6),g=n.n(f),v=n(7),y=n(15),_=n(12),b=n(0),C=n(9);function k(){var e=r()(["<style>:host{display:block;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}</style><slot></slot>"]);return k=function(){return e},e}var S=function(e){function t(){return o()(this,t),u()(this,h()(t).apply(this,arguments))}return g()(t,e),c()(t,[{key:"ready",value:function(){m()(h()(t.prototype),"ready",this).call(this),this.attributeName="display",this.stateTwoValue="none",this.activateStateTwo()}},{key:"connectedCallback",value:function(){m()(h()(t.prototype),"connectedCallback",this).call(this),_.addListener(this,"tap",this._tapped.bind(this));try{var e=this.parentNode;e&&"ff-products-per-page-list"==e.localName&&(this.style.display="inline-block",this.stateOneValue="inline-block")}catch(e){console.log("Attach ff-products-per-page-item. Can not find proper parent container. It has to be ether ff-products-per-page-list or ff-products-per-page-dropdown")}}},{key:"disconnectedCallback",value:function(){m()(h()(t.prototype),"disconnectedCallback",this).call(this),_.removeListener(this,"tap",this._tapped.bind(this))}},{key:"_tapped",value:function(e){this.productsPerPageItem.selected||b.a.communication.FFCommunicationEventAggregator.addFFEvent({type:"ppp",value:this.productsPerPageItem.value})}},{key:"_productsPerPageItemChanged",value:function(e){e?(this.model=e,this.model.selected?this.classList.add("selected"):this.classList.remove("selected"),this.model.showSelected?this.classList.add("showSelected"):this.classList.remove("showSelected"),this.activateStateOne()):this.activateStateTwo()}},{key:"clone",value:function(){var e=document.createElement("ff-products-per-page-item");return e.templateString=this.templateString,b.a.common.copyHTMLAttributes(this,e),e}}],[{key:"properties",get:function(){return{productsPerPageItem:{type:Object,observer:"_productsPerPageItemChanged"}}}},{key:"template",get:function(){return Object(v.b)(k())}}]),t}(Object(C.a)(["LightDOMTemplate","CssAttributeToggle","RemoveUnresolvedAttribute"],Object(y.a)(v.a)));window.customElements.define("ff-products-per-page-item",S)},function(e,t,n){"use strict";n.r(t),n.d(t,"ProductsPerPageDropdown",function(){return E});var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(2),c=n.n(s),l=n(5),u=n.n(l),d=n(1),h=n.n(d),p=n(4),m=n.n(p),f=n(6),g=n.n(f),v=n(7),y=n(14),_=n(15),b=n(10),C=n(12),k=(n(23),n(0)),S=n(9),w=n(17);function P(){var e=r()(['<style>:host{display:inline-block;outline:0}.ff-ppp-drowdown-container{position:absolute;background-color:#fff;outline:0;z-index:1001;-webkit-transition:height .4s;-moz-transition:height .4s;-ms-transition:height .4s;-o-transition:height .4s;transition:height .4s;box-sizing:border-box;@apply --dropdown-item-container;}.ff-ppp-drowdown-closed{display:none}</style><slot name="ff-ppp-item_selected"></slot><div class="ff-ppp-drowdown-container ff-ppp-drowdown-closed"><slot name="ff-ppp-item"></slot></div>']);return P=function(){return e},e}var E=function(e){function t(){return o()(this,t),u()(this,h()(t).apply(this,arguments))}return g()(t,e),c()(t,[{key:"connectedCallback",value:function(){m()(h()(t.prototype),"connectedCallback",this).call(this),this.getAttribute("tabindex")||this.setAttribute("tabindex","1"),this.subscribtionKey=k.a.communication.ResultDispatcher.subscribe("ppp",this._itemsChanged,this)}},{key:"disconnectedCallback",value:function(){m()(h()(t.prototype),"disconnectedCallback",this).call(this),k.a.communication.ResultDispatcher.unsubscribe("ppp",this.subscribtionKey)}},{key:"ready",value:function(){m()(h()(t.prototype),"ready",this).call(this);try{this.attributeName="display",this.stateTwoValue="none",this.activateStateTwo(),this._initTemplate(),this._initOpened(),C.addListener(this,"tap",this.toggle.bind(this)),this.addEventListener("blur",this._onblur.bind(this))}catch(e){console.log(e)}}},{key:"_initOpened",value:function(){try{var e=this.getDropdown();if(this.opened)this.opened=!0,e.classList.remove("ff-ppp-drowdown-closed"),this._show(e,!1),this.updateStyles();else{var t=this;this._hide(e,!1,function(){t.opened=!1,e.classList.add("ff-ppp-drowdown-closed"),t.updateStyles()})}}catch(e){console.log(e)}}},{key:"_initTemplate",value:function(){var e=this;try{var t=this.querySelector("ff-products-per-page-item");if(t)this._itemTemplate=t;else{var n=document.createElement("ff-products-per-page-item");n.updateTemplate("{{value}}"),this._itemTemplate=n}this.insertElementsHelper=new w.a(this._itemTemplate,this),this.querySelectorAll("ff-products-per-page-item").forEach(function(t){return e.removeChild(t)})}catch(t){console.log(t)}}},{key:"_itemsChanged",value:function(e){try{if(this.opened&&this.hide(),0<e.length){"true"===this.showSelected&&(e=this.initShowSelected(e));try{var t=this.querySelectorAll("ff-products-per-page-item");this.insertElementsHelper.insertAll(t,e,function(e,t){if(t){var n=t.selected?"ff-ppp-item_selected":"ff-ppp-item";e.setAttribute("slot",n)}e.productsPerPageItem=t},function(){this.activateStateOne(),Object(y.a)(this,function(){this.dispatchEvent(new CustomEvent("dom-updated",{bubbles:!0,composed:!0}))})}.bind(this))}catch(e){console.log("ff-products-per-page-dropdown _itemsChanged: ",e)}}else this.activateStateTwo()}catch(e){console.log(e)}}},{key:"show",value:function(){if(!this.opened){this.opened=!0;var e=this.getDropdown();e.classList.remove("ff-ppp-drowdown-closed"),this._show(e,!0),this.updateStyles()}}},{key:"hide",value:function(){if(this.opened&&!1===this.getDropdown().__transitionActive__){var e=this.getDropdown();e.__transitionActive__=!1;var t=this;this._hide(e,!0,function(){t.opened=!1,e.classList.add("ff-ppp-drowdown-closed"),t.updateStyles()})}}},{key:"toggle",value:function(e){!0===e?this.hide():!1===e?this.show():this.opened?this.hide():this.show()}},{key:"_onblur",value:function(){"true"==this.collapseOnblur&&b.b.run(this.hide.bind(this),150)}},{key:"getDropdown",value:function(){return this.root.querySelector(".ff-ppp-drowdown-container")}},{key:"_showSelectedChanged",value:function(){try{if(this.readyCalled){for(var e=this.querySelectorAll("ff-products-per-page-item"),t=[],n=0;n<e.length;n++){var i=e[n];t.push(i.productsPerPageItem),this.removeChild(i)}this.items=t}else this.readyCalled=!0}catch(e){console.log(e)}}},{key:"initShowSelected",value:function(e){try{for(var t=e.slice(0,e.length),n=0;n<t.length;n++){var i=t[n];if(i.selected){var r=JSON.parse(JSON.stringify(i));r.selected=!1,r.showSelected=!0,t.splice(n+1,0,r);break}}return t}catch(e){console.log(e)}}}],[{key:"properties",get:function(){return{items:{type:Object,observer:"_itemsChanged"},opened:{type:Boolean,value:!1,reflectToAttribute:!0},showSelected:{type:"String",value:"false",observer:"_showSelectedChanged"},collapseOnblur:{type:"String",value:"false"}}}},{key:"template",get:function(){return Object(v.b)(P())}}]),t}(Object(S.a)(["LightDOMTemplate","CssAttributeToggle","CollapseElement","RemoveUnresolvedAttribute"],Object(_.a)(v.a)));window.customElements.define("ff-products-per-page-dropdown",E)},function(e,t,n){"use strict";n.r(t),n.d(t,"ProductsPerPageSelect",function(){return w});var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(4),h=n.n(d),p=n(2),m=n.n(p),f=n(6),g=n.n(f),v=n(7),y=n(11),_=n(14),b=n(0),C=n(9),k=n(17);function S(){var e=r()(["<style>:host{display:inline-block}</style><select><slot></slot></select>"]);return S=function(){return e},e}var w=function(e){function t(){var e;return o()(this,t),(e=c()(this,u()(t).call(this))).attributeName="display",e.stateTwoValue="none",e.activateStateTwo(),e._renderer=new b.a.html.TemplateRenderer,e}return g()(t,e),m()(t,null,[{key:"is",get:function(){return"ff-products-per-page-select"}},{key:"template",get:function(){return Object(v.b)(S())}}]),m()(t,[{key:"connectedCallback",value:function(){h()(u()(t.prototype),"connectedCallback",this).call(this),this.selectContainer=this.root.querySelector("select"),this.selectContainer.addEventListener("change",this.handleSelectChange.bind(this)),this.optionInsertHelper=this._getInsertElementHelper(),this.subscribtionKey=b.a.communication.ResultDispatcher.subscribe("ppp",this.itemsChanged,this)}},{key:"disconnectedCallback",value:function(){h()(u()(t.prototype),"disconnectedCallback",this).call(this),b.a.communication.ResultDispatcher.unsubscribe("ppp",this.subscribtionKey)}},{key:"_getInsertElementHelper",value:function(){var e=this.querySelector("[data-template]");return e?(e=e.cloneNode(!0)).removeAttribute("data-template"):(e=document.createElement("option")).innerHTML="{{value}}",new k.a(e,this.selectContainer)}},{key:"itemsChanged",value:function(e){var t=this;if(0!==e.length)try{var n=this.selectContainer.querySelectorAll("option");this.optionInsertHelper.insertAll(n,e,function(e,n){e.data=n,e.setAttribute("value",n.value),e.innerHTML=t._renderer.render(e.innerHTML,n),n.selected&&(t.selectContainer.value=n.value)},function(){Object(y.b)(),t.activateStateOne(),Object(_.a)(t,function(){return t.dispatchEvent(new CustomEvent("dom-updated",{bubbles:!0,composed:!0}))})})}catch(e){b.a.common.Logger.log("Catch on itemsChanged",e)}else this.activateStateTwo()}},{key:"handleSelectChange",value:function(){var e=this.selectContainer.options[this.selectContainer.selectedIndex].data;e&&b.a.communication.FFCommunicationEventAggregator.addFFEvent({type:"ppp",value:e.value})}}]),t}(Object(C.a)(["CssAttributeToggle","RemoveUnresolvedAttribute"],v.a));window.customElements.define(w.is,w)},function(e,t,n){"use strict";n.r(t),n.d(t,"ProductsPerPageList",function(){return S});var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(2),c=n.n(s),l=n(5),u=n.n(l),d=n(1),h=n.n(d),p=n(4),m=n.n(p),f=n(6),g=n.n(f),v=n(7),y=n(14),_=n(0),b=n(9),C=n(17);function k(){var e=r()(['<style>:host{display:inline-block;outline:0}:host ff-products-per-page-item{display:inline-block}</style><slot name="ff-ppp-item"></slot>']);return k=function(){return e},e}var S=function(e){function t(){return o()(this,t),u()(this,h()(t).apply(this,arguments))}return g()(t,e),c()(t,[{key:"connectedCallback",value:function(){m()(h()(t.prototype),"connectedCallback",this).call(this),this.subscribtionKey=_.a.communication.ResultDispatcher.subscribe("ppp",this._itemsChanged,this)}},{key:"disconnectedCallback",value:function(){m()(h()(t.prototype),"disconnectedCallback",this).call(this),_.a.communication.ResultDispatcher.unsubscribe("ppp",this.subscribtionKey)}},{key:"ready",value:function(){m()(h()(t.prototype),"ready",this).call(this),this.attributeName="display",this.stateTwoValue="none",this.activateStateTwo(),this._initTemplate()}},{key:"_initTemplate",value:function(){var e=this,t=this.querySelector("ff-products-per-page-item");if(t)this._itemTemplate=t;else{var n=document.createElement("ff-products-per-page-item");n.style.display="inline-block",n.innerHTML="{{value}}",n.updateTemplate(),this._itemTemplate=n}this._itemTemplate.style.display="inline-block",this._itemTemplate.setAttribute("slot","ff-ppp-item"),this.insertElementsHelper=new C.a(this._itemTemplate,this),this.querySelectorAll("ff-products-per-page-item").forEach(function(t){return e.removeChild(t)})}},{key:"_itemsChanged",value:function(e){if(0<e.length){try{try{var t=this.querySelectorAll("ff-products-per-page-item");this.insertElementsHelper.insertAll(t,e,function(e,t){e.productsPerPageItem=t},function(){var e=this;this.activateStateOne(),Object(y.a)(this,function(){e.dispatchEvent(new CustomEvent("dom-updated",{bubbles:!0,composed:!0}))})}.bind(this))}catch(e){console.log("Catch on ff-products-per-page-dropdown _itemsChanged",e)}}catch(e){console.log("Catch on _itemsChanged",e)}this.activateStateOne(),this.dispatchEvent(new CustomEvent("dom-updated",{bubbles:!0,composed:!0}))}else this.activateStateTwo()}}],[{key:"template",get:function(){return Object(v.b)(k())}}]),t}(Object(b.a)(["LightDOMTemplate","CssAttributeToggle","RemoveUnresolvedAttribute"],v.a));window.customElements.define("ff-products-per-page-list",S)},function(e,t,n){"use strict";n.r(t),n.d(t,"AsnRemoveAllFilter",function(){return w});var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(4),h=n.n(d),p=n(2),m=n.n(p),f=n(6),g=n.n(f),v=n(13),y=n.n(v),_=n(7),b=n(15),C=n(12),k=n(0);function S(){var e=r()(["<style>:host{display:inline-block}:host(.hidden){display:none}</style><div><slot></slot></div>"]);return S=function(){return e},e}var w=function(e){function t(){var e;return o()(this,t),(e=c()(this,u()(t).call(this)))._removeFilter=e._removeFilter.bind(y()(y()(e))),e}return g()(t,e),m()(t,null,[{key:"is",get:function(){return"ff-asn-remove-all-filter"}},{key:"properties",get:function(){return{showAlways:{type:Boolean,value:!1},removeParams:{type:Boolean,value:!1}}}},{key:"template",get:function(){return Object(_.b)(S())}}]),m()(t,[{key:"connectedCallback",value:function(){h()(u()(t.prototype),"connectedCallback",this).call(this),C.addListener(this,"tap",this._removeFilter),this.subscribtionKey||(this.subscribtionKey=k.a.communication.ResultDispatcher.subscribe("result",this._onResultDispatch,this))}},{key:"disconnectedCallback",value:function(){h()(u()(t.prototype),"disconnectedCallback",this).call(this),this.subscribtionKey&&(k.a.communication.ResultDispatcher.unsubscribe("result",this.subscribtionKey),this.subscribtionKey=null)}},{key:"_onResultDispatch",value:function(e){if(!1===this.showAlways){var t=k.a.common.urlStringToDict(e.searchParams);for(var n in t)if(t.hasOwnProperty(n)&&"filter"===n.substr(0,"filter".length))return void this.classList.remove("hidden");this.classList.add("hidden")}else this.classList.remove("hidden")}},{key:"_removeFilter",value:function(){var e=!0===this.removeParams;k.a.communication.FFCommunicationEventAggregator.addFFEvent({type:"clearFilter",removeParams:e})}}]),t}(Object(b.a)(_.a));window.customElements.define(w.is,w)},function(e,t,n){"use strict";n.r(t),n.d(t,"Recommendation",function(){return k});var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(2),c=n.n(s),l=n(5),u=n.n(l),d=n(1),h=n.n(d),p=n(4),m=n.n(p),f=n(6),g=n.n(f),v=n(7),y=n(10),_=n(0),b=n(9);function C(){var e=r()(["<style>:host{display:block}</style><slot></slot>"]);return C=function(){return e},e}n(22);var k=function(e){function t(){return o()(this,t),u()(this,h()(t).apply(this,arguments))}return g()(t,e),c()(t,[{key:"ready",value:function(){m()(h()(t.prototype),"ready",this).call(this),this.attributeName="display",this.stateTwoValue="none",this.activateStateTwo(),this.key=_.a.common.randomString(10)}},{key:"connectedCallback",value:function(){m()(h()(t.prototype),"connectedCallback",this).call(this),"true"===this.subscribe&&(this.subscribtionKey=_.a.communication.ResultDispatcher.subscribe("recommendation:"+this.key,this._handleRecommendations,this));var e=this.querySelector("ff-record-list");e&&(e.setAttribute("subscribe","false"),e.isRecommendation=!0)}},{key:"disconnectedCallback",value:function(){m()(h()(t.prototype),"disconnectedCallback",this).call(this),"true"===this.subscribe&&_.a.communication.ResultDispatcher.unsubscribe("recommendation:"+this.key,this.subscribtionKey)}},{key:"_handleRecommendations",value:function(e){var t=this;if(e&&0<e.length){var n=this.querySelector("ff-record-list");n&&(n.records=e.slice(0,this.maxResults)),this.activateStateOne(),y.a.run(function(){return t.dispatchEvent(new CustomEvent("gotRecommendations",{bubbles:!0,composed:!0}))})}else this.activateStateTwo()}},{key:"getRecommendations",value:function(){if(this.recordId){var e={type:"recommendation:"+this.key,id:this.recordId.split(","),maxResults:this.maxResults};"true"===this.usePerso&&(e.usePerso="true"),_.a.communication.FFCommunicationEventAggregator.addFFEvent(e)}else _.a.common.Logger.debug("no record id for recommendations specified."),this.activateStateTwo()}}],[{key:"properties",get:function(){return{recordId:{type:"String",observer:"getRecommendations"},maxResults:{type:"Number",value:4},subscribe:{type:"String",value:"true"},usePerso:{type:"String",value:"false"}}}},{key:"template",get:function(){return Object(v.b)(C())}}]),t}(Object(b.a)(["CssAttributeToggle","RemoveUnresolvedAttribute"],v.a));window.customElements.define("ff-recommendation",k)},function(e,t,n){"use strict";n.r(t),n.d(t,"SimilarProducts",function(){return C});var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(2),c=n.n(s),l=n(5),u=n.n(l),d=n(1),h=n.n(d),p=n(4),m=n.n(p),f=n(6),g=n.n(f),v=n(7),y=n(0),_=n(9);function b(){var e=r()(["<style>:host{display:block}</style><slot></slot>"]);return b=function(){return e},e}n(22);var C=function(e){function t(){return o()(this,t),u()(this,h()(t).apply(this,arguments))}return g()(t,e),c()(t,[{key:"ready",value:function(){m()(h()(t.prototype),"ready",this).call(this),this.stateTwoValue="none",this.attributeName="display",this.activateStateTwo();var e=this.querySelector("ff-record-list");e&&e.setAttribute("subscribe","false")}},{key:"connectedCallback",value:function(){m()(h()(t.prototype),"connectedCallback",this).call(this),this.subscribtionKey=y.a.communication.ResultDispatcher.subscribe("similarProducts",this._handleSimilarProducts,this)}},{key:"disconnectedCallback",value:function(){m()(h()(t.prototype),"disconnectedCallback",this).call(this),y.a.communication.ResultDispatcher.unsubscribe("similarProducts",this.subscribtionKey)}},{key:"_handleSimilarProducts",value:function(e){var t=e.records;if(t&&t.length&&0<t.length){var n=this.querySelector("ff-record-list");n&&(n.records=t.slice(0,this.maxResults)),this.activateStateOne()}else this.activateStateTwo()}},{key:"getSimilarProducts",value:function(){this.recordId?y.a.communication.FFCommunicationEventAggregator.addFFEvent({type:"similarProducts",id:this.recordId,maxResults:this.maxResults}):y.a.common.Logger.debug("no record id for similarProducts specified.")}}],[{key:"properties",get:function(){return{recordId:{type:"Number",observer:"getSimilarProducts"},maxResults:{type:"Number",value:4}}}},{key:"template",get:function(){return Object(v.b)(b())}}]),t}(Object(_.a)(["CssAttributeToggle","RemoveUnresolvedAttribute"],v.a));window.customElements.define("ff-similar-products",C)},function(e,t,n){"use strict";n.r(t),n.d(t,"Suggest",function(){return P});var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(2),c=n.n(s),l=n(5),u=n.n(l),d=n(1),h=n.n(d),p=n(4),m=n.n(p),f=n(6),g=n.n(f),v=n(7),y=n(10),_=n(20),b=n(14),C=(n(23),n(0)),k=n(9),S=n(17);function w(){var e=r()(['<style>:host{display:block;z-index:9999}.blockLayout{display:flex;flex-wrap:nowrap;-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-direction:row;-ms-flex-direction:row;-webkit-flex-direction:row}.listLayout{display:block}.containerItem:hover{text-decoration:underline}.listContainerItem:hover{text-decoration:underline}#ffSuggestContainer{position:relative;z-index:9999;background-color:#fff;top:0;left:0;right:0;@apply(--suggest-container);}#ffSuggestContainerWrapper{position:absolute;@apply(--suggest-container-wrapper);}.hideffSuggestContainerWrapper{display:none}#ffSuggestContainer ::content>section.displayNoneImportant{display:none!important}</style><div style="position:relative;width:100%"><div id="ffSuggestContainerWrapper" class="hideffSuggestContainerWrapper"><div id="ffSuggestContainer" class="listLayout"><slot id="ffContentElement"></slot></div></div></div>']);return w=function(){return e},e}n(35);var P=function(e){function t(){return o()(this,t),u()(this,h()(t).apply(this,arguments))}return g()(t,e),c()(t,[{key:"connectedCallback",value:function(){var e=this;m()(h()(t.prototype),"connectedCallback",this).call(this),this.suggestSubscribtionKey=C.a.communication.ResultDispatcher.subscribe(["suggest"],this._suggestItemsChanged,this),this.subscribtionKey=this.suggestSubscribtionKey,this.productDetailSubscriptionKey=C.a.communication.ResultDispatcher.subscribe(["getProductDetailRecord"],this._productDetailRecordChanged,this),this.suggestItemInsertHelper=this.suggestItemInsertHelper||{},y.a.run(function(){return e._initItemTemplates()})}},{key:"disconnectedCallback",value:function(){m()(h()(t.prototype),"disconnectedCallback",this).call(this),C.a.communication.ResultDispatcher.unsubscribe(["suggest"],this.suggestSubscribtionKey),C.a.communication.ResultDispatcher.unsubscribe(["getProductDetailRecord"],this.productDetailSubscriptionKey)}},{key:"_initItemTemplates",value:function(){var e=this;this.$.ffContentElement.assignedNodes().filter(function(e){return e.nodeType===Node.ELEMENT_NODE}).forEach(function(t){var n=t.querySelectorAll("ff-suggest-item");n&&0<n.length?n.forEach(function(n){e.suggestItemInsertHelper[n.type]||"unknown"===n.type||(e.suggestItemInsertHelper[n.type]=e.createSuggestItemInsertHelper(t,n,e))}):(t.style.display="none",console.log("section "+t+" does not contain a ff-suggest-item. Section is ignored."))})}},{key:"createSuggestItemInsertHelper",value:function(e,t,n){var i=t.type;if(i){if(e.querySelector('[data-container="'+i+'"]'))return new S.a(t,this);console.log("no container specified for suggest item with type='"+i+"'. Nest the suggest item in any element with attribute data-container='"+i+"'")}else console.log("no type specified for suggest item")}},{key:"_suggestItemsChanged",value:function(e,t,n){var i=this,r=C.a.communication.globalElementValues.currentFFSearchBoxValue;if(!n||C.a.common.fixedDecodeURIComponent(n.query)===r)if(e&&0<e.length&&r&&2<=r.length){var a=this.getSuggestionsByType(e);for(var o in a)if(!this.suggestItemInsertHelper[o]){var s=this.querySelector("div[data-container='unknown']");if(s){var c=s.cloneNode(!0);c.setAttribute("data-container",o),c.innerHTML=c.innerHTML.replace(/unknown/g,o),s.parentElement.insertBefore(c,s);var l=c.querySelector("ff-suggest-item");l?this.suggestItemInsertHelper[o]=new S.a(l,this):console.log("template has no ff-suggest-item",c)}else a[o]=[]}for(var u in this.suggestItemInsertHelper){var d=this.querySelectorAll("ff-suggest-item[type='"+u+"']"),h=this.suggestItemInsertHelper[u];h&&h.insertAll(d,a[u]||[],function(e,t){e.suggestion=t,e._hasItemClickedListenter||(e._hasItemClickedListenter=!0,e.host=i,e.addEventListener("item-clicked",function(t){e.host.dispatchEvent(new CustomEvent("suggest-item-clicked",{detail:t.detail,bubbles:!0}))}))},function(){i._debounceJob=_.a.debounce(i._debounceJob,y.b.after(16),function(){i.hideOrShowSectionsAndContainer(),Object(b.a)(i,function(){i.$.ffSuggestContainerWrapper.classList.remove("hideffSuggestContainerWrapper"),i.dispatchEvent(new CustomEvent("dom-updated",{bubbles:!0,composed:!0}))})})})}}else this._hideSuggest()}},{key:"_productDetailRecordChanged",value:function(e,t){e&&0<e.length&&this.dispatchEvent(new CustomEvent("suggest-product-record",{detail:e[0],bubbles:!0}))}},{key:"hideOrShowSectionsAndContainer",value:function(){this.$.ffContentElement.assignedNodes().filter(function(e){return e.nodeType===Node.ELEMENT_NODE}).forEach(function(e){var t=!1;e.querySelectorAll("[data-container]").forEach(function(e){0===e.querySelectorAll("ff-suggest-item:not([style*='display: none'])").length?e.setAttribute("hidden",""):(e.removeAttribute("hidden"),t=!0)}),!1===t?e.setAttribute("hidden",""):e.removeAttribute("hidden")})}},{key:"_hideSuggest",value:function(){this.$.ffSuggestContainerWrapper.classList.add("hideffSuggestContainerWrapper")}},{key:"_showSuggest",value:function(){this.$.ffSuggestContainerWrapper.classList.remove("hideffSuggestContainerWrapper")}},{key:"getSuggestionsByType",value:function(e){var t={};return e.forEach(function(e){var n=t[e.type]||[];n.push(e),t[e.type]=n}),t}},{key:"_redrawSections",value:function(){this.$.ffContentElement.assignedNodes().filter(function(e){return e.nodeType===Node.ELEMENT_NODE}).forEach(function(e){var t=!0;e.querySelectorAll("[data-container]").forEach(function(e){t=t&&e.hasAttribute("hidden")}),t?e.classList.add("displayNoneImportant"):e.classList.remove("displayNoneImportant")})}},{key:"_layoutChanged",value:function(e,t){"block"===e?(this.$.ffSuggestContainer.classList.remove("listLayout"),this.$.ffSuggestContainer.classList.add("blockLayout")):(this.$.ffSuggestContainer.classList.remove("blockLayout"),this.$.ffSuggestContainer.classList.add("listLayout"))}}],[{key:"properties",get:function(){return{layout:{type:"String",value:"list",observer:"_layoutChanged"},suggestItems:{type:"Array",observer:"_suggestItemsChanged"}}}},{key:"template",get:function(){return Object(v.b)(w())}}]),t}(Object(k.a)(["RemoveUnresolvedAttribute"],v.a));window.customElements.define("ff-suggest",P)},function(e,t,n){"use strict";n.r(t),n.d(t,"OnfocusSuggest",function(){return T});var i=n(44),r=n.n(i),a=n(8),o=n.n(a),s=n(3),c=n.n(s),l=n(5),u=n.n(l),d=n(1),h=n.n(d),p=n(4),m=n.n(p),f=n(2),g=n.n(f),v=n(6),y=n.n(v),_=n(7),b=n(10),C=n(20),k=n(14),S=(n(23),n(0)),w=n(9),P=n(17);function E(){var e=o()(['<style>:host{display:block;z-index:9999}.blockLayout{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;flex-wrap:nowrap;-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-direction:row;-ms-flex-direction:row;-webkit-flex-direction:row}#ffSuggestContainer{position:relative;z-index:9999;background-color:#fff;top:0;left:0;right:0;@apply(--suggest-container);}#ffSuggestContainerWrapper{position:absolute;@apply(--suggest-container-wrapper);}.hideffSuggestContainerWrapper{display:none}</style><div style="position:relative;width:100%"><div id="ffSuggestContainerWrapper" class="hideffSuggestContainerWrapper"><div id="ffSuggestContainer" class="blockLayout"><slot id="ffContentElement"></slot></div></div></div>']);return E=function(){return e},e}n(35);var T=function(e){function t(){var e;return c()(this,t),(e=u()(this,h()(t).call(this))).insertHelpers={isOnfocus:{},suggestions:{}},e}return y()(t,e),g()(t,null,[{key:"properties",get:function(){return{suggestItems:{type:Array,observer:"_suggestItemsChanged"},disableDebugLog:{type:Boolean}}}},{key:"template",get:function(){return Object(_.b)(E())}}]),g()(t,[{key:"connectedCallback",value:function(){m()(h()(t.prototype),"connectedCallback",this).call(this),this.subscribtionKey=S.a.communication.ResultDispatcher.subscribe("suggest",this._suggestItemsChanged,this),this.subscribtionKey2=S.a.communication.ResultDispatcher.subscribe("onfocus-suggest",this._onfocusSuggestionsChanged,this),this._initOnfocusSectionTemplates(this),this._initSuggestionsSectionTemplates(this)}},{key:"disconnectedCallback",value:function(){m()(h()(t.prototype),"disconnectedCallback",this).call(this),S.a.communication.ResultDispatcher.unsubscribe("suggest",this.subscribtionKey),S.a.communication.ResultDispatcher.unsubscribe("onfocus-suggest",this.subscribtionKey2)}},{key:"_hideSuggest",value:function(){this.$.ffSuggestContainerWrapper.classList.add("hideffSuggestContainerWrapper")}},{key:"_showSuggest",value:function(){this.$.ffSuggestContainerWrapper.classList.remove("hideffSuggestContainerWrapper")}},{key:"_onfocusSuggestionsChanged",value:function(e){this._render(e.suggestions||e,!0)}},{key:"_suggestItemsChanged",value:function(e){this._render(e,!1)}},{key:"_getInsertHelper",value:function(e){return!0===e?this.insertHelpers.isOnfocus:this.insertHelpers.suggestions}},{key:"_render",value:function(e,t){var n=this;if(e){if(t){var i=this.querySelector(".ff-highlight-suggest-item");i=i.suggestion.name.replace(/(<([^>]+)>)/gi,""),this.suggestEntries[i]||(this.suggestEntries[i]=e)}else{var a=S.a.communication.globalElementValues.currentFFSearchBoxValue,o=S.a.communication.globalSearchParameter.channel;e.splice(0,0,{name:a,searchParams:"Search.ff?query="+a+"&channel="+o,type:"searchTerm",attributes:{}}),this.suggestEntries=r()({},a,e)}var s=this.getSuggestionsByType(e),c=function(e){var i=n._getInsertHelper(!t)[e];if(!i&&!n.disableDebugLog)return console.log("ff-onfocus-suggest - no template defined for type ["+e+"]"),"continue";var r=n.querySelector("[data-container='onfocus']");r.style.display="";var a=s[e],o=n.querySelector("[data-container='"+e+"']");if(0===a.length)return o&&(o.style.display="none"),"continue";o&&(o.style.display="");var c=void 0;c=(c=n.isOnfocusSuggestion(i,t)?n.querySelector("[data-container='onfocus']"):n.querySelector("[data-container='suggestions']")).querySelectorAll("ff-suggest-item[type='"+e+"']"),i.helper.insertAll(c,a,function(e,a){return n._renderSingleItem(e,a,i,t,r)},n._afterRender.bind(n),!0)};for(var l in s)c(l)}else this._hideSuggest()}},{key:"_renderSingleItem",value:function(e,t,n,i,r){var a=this;e.suggestion=t,!0!==e._hasItemClickedListenter&&(e.addEventListener("item-clicked",function(e){a.dispatchEvent(new CustomEvent("suggest-item-clicked",{bubbles:!0,composed:!0,detail:e.detail}))}),e._hasItemClickedListenter=!0),this.isOnfocusSuggestion(n,i)&&(e._onfocus=function(){var t={type:"suggest",query:e.suggestion.name.replace(/(<([^>]+)>)/gi,""),topics:function(){return["onfocus-suggest"]}};a.suggestEntries[t.query]?S.a.communication.ResultDispatcher.dispatch(JSON.parse(JSON.stringify(a.suggestEntries[t.query])),t,t.topics()):S.a.communication.FFCommunicationEventAggregator.addFFEvent(t)},e.onmouseenter=function(){for(var t=r.querySelectorAll(".ff-highlight-suggest-item"),n=0;n<t.length;n++)t[n].classList.remove("ff-highlight-suggest-item");S.a.communication.ResultDispatcher.dispatch({element:e},{},"ff_suggestHighlight")})}},{key:"_afterRender",value:function(){var e=this;this._debouncer=C.a.debounce(this._debouncer,b.b.after(16),function(){var t=e.querySelector("[data-container='onfocus']");if(null===t.querySelector(".ff-highlight-suggest-item")){var n=t.querySelector("ff-suggest-item");S.a.communication.ResultDispatcher.dispatch({element:n,selectedIndex:0},{},"ff_suggestHighlight")}e.$.ffSuggestContainerWrapper.classList.remove("hideffSuggestContainerWrapper"),e.showSuggestionsContainer(),Object(k.a)(e,function(){this.dispatchEvent(new CustomEvent("dom-updated",{bubbles:!0,composed:!0}))})})}},{key:"hideSuggestionsContainer",value:function(){this.querySelector("[data-container='suggestions']").style.display="none"}},{key:"showSuggestionsContainer",value:function(){this.querySelector("[data-container='suggestions']").style.display=""}},{key:"isOnfocusSuggestion",value:function(e,t){return!0===e.isOnfocus&&!t}},{key:"getSuggestionsByType",value:function(e,t){var n={};e.forEach(function(e){var t=n[e.type]||[];t.push(e),n[e.type]=t});var i=this._getInsertHelper(t);for(var r in i)n[r]||(n[r]=[]);return n}},{key:"_initOnfocusSectionTemplates",value:function(e){var t=e.querySelector("[data-container='onfocus']");t?this._initSectionTemplates(t,!0):S.a.common.Logger.error("ff-onfocus-suggest - no <section data-container='onfocus'> provided but needed")}},{key:"_initSuggestionsSectionTemplates",value:function(e){var t=this,n=e.querySelector("[data-container='suggestions']");n?n.querySelectorAll("[data-container]").forEach(function(e){return t._initSectionTemplates(e,!1)}):S.a.common.Logger.error("ff-onfocus-suggest - no <section data-container='onfocus'> provided but needed")}},{key:"_initSectionTemplates",value:function(e,t){var n=this,i=e.querySelectorAll("ff-suggest-item");if(i&&0!==i.length){var r=this._getInsertHelper(t);i.forEach(function(i){r[i.getAttribute("type")]={helper:new P.a(i,n),isOnfocus:t,container:e};var a=i.parentNode;a&&a.removeChild(i)})}else S.a.common.Logger.error("ff-suggest-onfocus - section "+e+" does not contain a ff-suggest-item but needs one");e.style.display="none"}}]),t}(Object(w.a)(["RemoveUnresolvedAttribute"],_.a));window.customElements.define("ff-onfocus-suggest",T)},function(e,t,n){"use strict";n.r(t),n.d(t,"SortBoxSelect",function(){return w});var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(4),h=n.n(d),p=n(2),m=n.n(p),f=n(6),g=n.n(f),v=n(7),y=n(11),_=n(14),b=n(0),C=n(9),k=n(17);function S(){var e=r()(["<style>:host{display:inline-block}</style><select><slot></slot></select>"]);return S=function(){return e},e}var w=function(e){function t(){var e;return o()(this,t),(e=c()(this,u()(t).call(this))).attributeName="display",e.stateTwoValue="none",e.activateStateTwo(),e._renderer=new b.a.html.TemplateRenderer,e}return g()(t,e),m()(t,null,[{key:"is",get:function(){return"ff-sortbox-select"}},{key:"template",get:function(){return Object(v.b)(S())}}]),m()(t,[{key:"connectedCallback",value:function(){h()(u()(t.prototype),"connectedCallback",this).call(this),this.selectContainer=this.root.querySelector("select"),this.selectContainer.addEventListener("change",this.handleSelectChange.bind(this)),this.optionInsertHelper=this._getInsertElementHelper(),this.subscribtionKey=b.a.communication.ResultDispatcher.subscribe("sort",this.itemsChanged,this)}},{key:"disconnectedCallback",value:function(){h()(u()(t.prototype),"disconnectedCallback",this).call(this),b.a.communication.ResultDispatcher.unsubscribe("sort",this.subscribtionKey)}},{key:"_getInsertElementHelper",value:function(){var e=this.querySelector("[data-template]");return e?(e=e.cloneNode(!0)).removeAttribute("data-template"):(e=document.createElement("option")).innerHTML="{{description}}",new k.a(e,this.selectContainer)}},{key:"itemsChanged",value:function(e){var t=this;if(0!==e.length)try{var n=this.selectContainer.querySelectorAll("option");this.optionInsertHelper.insertAll(n,e,function(e,n){e.data=n,e.setAttribute("value",n.description),e.innerHTML=t._renderer.render(e.innerHTML,n),n.selected&&(t.selectContainer.value=n.description)},function(){Object(y.b)(),t.activateStateOne(),Object(_.a)(t,function(){return t.dispatchEvent(new CustomEvent("dom-updated",{bubbles:!0,composed:!0}))})})}catch(e){b.a.common.Logger.log("Catch on itemsChanged",e)}else this.activateStateTwo()}},{key:"handleSelectChange",value:function(){var e=this.selectContainer.options[this.selectContainer.selectedIndex].data;e&&b.a.communication.FFCommunicationEventAggregator.addFFEvent({type:"sort",value:e.description})}}]),t}(Object(C.a)(["CssAttributeToggle","RemoveUnresolvedAttribute"],v.a));window.customElements.define(w.is,w)},function(e,t,n){"use strict";n.r(t),n.d(t,"Template",function(){return b});var i=n(3),r=n.n(i),a=n(2),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(4),h=n.n(d),p=n(6),m=n.n(p),f=n(7),g=n(14),v=n(11),y=n(9),_=n(0),b=function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return m()(t,e),o()(t,[{key:"ready",value:function(){h()(u()(t.prototype),"ready",this).call(this),this.attributeName="display",this.stateTwoValue="none",this.activateStateTwo()}},{key:"connectedCallback",value:function(){h()(u()(t.prototype),"connectedCallback",this).call(this),this.subscribtionKey=_.a.communication.ResultDispatcher.subscribe(this.scope,this._dataChanged,this)}},{key:"disconnectedCallback",value:function(){h()(u()(t.prototype),"disconnectedCallback",this).call(this),_.a.communication.ResultDispatcher.unsubscribe(this.scope,this.subscribtionKey)}},{key:"_dataChanged",value:function(e){var t=this;e?(this.model=e,this.activateStateOne(),Object(v.b)(),Object(g.a)(this,function(){return t.dispatchEvent(new CustomEvent("dom-updated",{bubbles:!0,composed:!0}))})):this.activateStateTwo()}},{key:"_scopeChanged",value:function(e,t){_.a.communication.ResultDispatcher.unsubscribe(t,this.subscribtionKey),this.subscribtionKey=_.a.communication.ResultDispatcher.subscribe(e,_dataChanged,this)}}],[{key:"is",get:function(){return"ff-template"}},{key:"properties",get:function(){return{data:{type:Object,observer:"_dataChanged"},scope:{type:String,observer:"_scopeChanged"}}}}]),t}(Object(y.a)(["LightDOMTemplate","CssAttributeToggle","RemoveUnresolvedAttribute"],f.a));window.customElements.define(b.is,b)},function(e,t,n){"use strict";n.r(t);var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(2),c=n.n(s),l=n(5),u=n.n(l),d=n(1),h=n.n(d),p=n(4),m=n.n(p),f=n(6),g=n.n(f),v=n(7),y=n(0),_=n(9);function b(){var e=r()(["<style>:host{display:block}</style>"]);return b=function(){return e},e}var C=function(e){function t(){return o()(this,t),u()(this,h()(t).apply(this,arguments))}return g()(t,e),c()(t,[{key:"connectedCallback",value:function(){m()(h()(t.prototype),"connectedCallback",this).call(this),this.subscribtionKey=y.a.communication.ResultDispatcher.subscribe("productDetail",this._newProductDetail,this)}},{key:"disconnectedCallback",value:function(){m()(h()(t.prototype),"disconnectedCallback",this).call(this),y.a.communication.ResultDispatcher.unsubscribe("productDetail",this.subscribtionKey)}},{key:"_recordIdChanged",value:function(){y.a.communication.FFCommunicationEventAggregator.addFFEvent({type:"productDetail",id:this.recordId})}},{key:"_urlParameterNameChanged",value:function(){if(this.urlParameterName){var e=y.a.common.urlStringToDict()[this.urlParameterName];e&&(this.recordId=e)}}},{key:"_newProductDetail",value:function(e){}}],[{key:"is",get:function(){return"ff-product-detail"}},{key:"properties",get:function(){return{recordId:{type:"Number",observer:"_recordIdChanged"},urlParameterName:{type:"String",observer:"_urlParameterNameChanged"}}}},{key:"template",get:function(){return Object(v.b)(b())}}]),t}(Object(_.a)(["RemoveUnresolvedAttribute"],v.a));window.customElements.define(C.is,C)},function(e,t,n){"use strict";n.r(t),n.d(t,"PagingDropdown",function(){return O});var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(4),h=n.n(d),p=n(2),m=n.n(p),f=n(6),g=n.n(f),v=n(7),y=n(11),_=n(14),b=n(10),C=n(15),k=n(12),S=(n(23),n(27)),w=n(9),P=n(0),E=n(17);function T(){var e=r()(['<style>:host{display:inline-block;outline:0}.ff-paging-dropdown-container{position:absolute;display:flex;flex-direction:column;background-color:#fff;outline:0;z-index:1001;-webkit-transition:height .4s;-moz-transition:height .4s;-ms-transition:height .4s;-o-transition:height .4s;transition:height .4s;box-sizing:border-box;@apply(--dropdown-item-container);}.ff-paging-dropdown-closed{display:none}</style><slot name="ff-paging-item_selected"></slot><div class="ff-paging-dropdown-container ff-paging-dropdown-closed"><slot name="ff-paging-item"></slot></div>']);return T=function(){return e},e}var O=function(e){function t(){var e;return o()(this,t),(e=c()(this,u()(t).call(this)))._itemTemplate=null,e.getAttribute("tabindex")||e.setAttribute("tabindex","999"),e}return g()(t,e),m()(t,null,[{key:"is",get:function(){return"ff-paging-dropdown"}},{key:"properties",get:function(){return{items:{type:Object,observer:"_itemsChanged"},opened:{type:Boolean,value:!1,reflectToAttribute:!0},showSelected:{type:Boolean,observer:"_showSelectedChanged"},collapseOnblur:{type:Boolean}}}},{key:"template",get:function(){return Object(v.b)(T())}}]),m()(t,[{key:"connectedCallback",value:function(){h()(u()(t.prototype),"connectedCallback",this).call(this),this.subscribtionKey=P.a.communication.ResultDispatcher.subscribe("paging",this._itemsChanged,this)}},{key:"disconnectedCallback",value:function(){h()(u()(t.prototype),"disconnectedCallback",this).call(this),P.a.communication.ResultDispatcher.unsubscribe("paging",this.subscribtionKey)}},{key:"ready",value:function(){var e=this;h()(u()(t.prototype),"ready",this).call(this),this.attributeName="display",this.stateTwoValue="none",this.activateStateTwo(),this.toggle(!this.opened),this._initTemplate(),k.addListener(this,"tap",function(){return e.toggle()}),this.addEventListener("blur",function(t){return e._onblur(t)})}},{key:"_initTemplate",value:function(){try{var e=this.querySelector(S.a.is);if(e)this._itemTemplate=e;else{var t=document.createElement(S.a.is);t.updateTemplate("{{value}}"),this.appendChild(t),Object(y.b)(),this._itemTemplate=t}this.insertElementsHelper=new E.a(this._itemTemplate,this)}catch(e){console.log(e)}}},{key:"_itemsChanged",value:function(e){var t=this;this.opened&&this.hide();var n=e.pageLinks;if(0<n.length){!0===this.showSelected&&(n=this.initShowSelected(n));try{var i=this.querySelectorAll(S.a.is);this.insertElementsHelper.insertAll(i,n,function(e,t){if(e.productsPerPageItem=t){e.type=t.currentPage?"currentLink":"pageLink";var n=t.currentPage&&!e.productsPerPageItem.showSelected?"ff-paging-item_selected":"ff-paging-item";e.setAttribute("slot",n)}},function(){Object(y.b)(),t.activateStateOne(),Object(_.a)(t,function(){return t.dispatchEvent(new CustomEvent("dom-updated",{bubbles:!0,composed:!0}))})})}catch(e){console.log("ff-products-per-page-dropdown _itemsChanged: ",e)}}else this.activateStateTwo()}},{key:"show",value:function(){var e=this.getDropdown();e.classList.remove("ff-paging-dropdown-closed"),this.opened=!0,this._show(e,!0),this.updateStyles()}},{key:"hide",value:function(){var e=this,t=this.getDropdown();this._hide(t,!0,function(){t.classList.add("ff-paging-dropdown-closed"),e.opened=!1,e.updateStyles()})}},{key:"toggle",value:function(e){null==e&&(e=this.opened),e?this.hide():this.show()}},{key:"_onblur",value:function(){var e=this;!0===this.collapseOnblur&&b.b.run(function(){return e.hide()},150)}},{key:"getDropdown",value:function(){return this.root.querySelector(".ff-paging-dropdown-container")}},{key:"_showSelectedChanged",value:function(){var e=this;try{if(this.readyCalled){var t,n=[];this.querySelectorAll(S.a.is).forEach(function(t){n.push(t.productsPerPageItem),e.removeChild(t)}),this.items=n}else this.readyCalled=!0}catch(t){console.log(t)}}},{key:"initShowSelected",value:function(e){try{for(var t=e.slice(),n=0;n<t.length;n++){var i=t[n];if(i.currentPage){var r=JSON.parse(JSON.stringify(i));r.showSelected=!0,t.splice(n+1,0,r);break}}return t}catch(e){console.log(e)}}}]),t}(Object(w.a)(["LightDOMTemplate","RemoveUnresolvedAttribute","CssAttributeToggle","CollapseElement"],Object(C.a)(v.a)));window.customElements.define(O.is,O)},function(e,t,n){"use strict";n.r(t),n.d(t,"Paging",function(){return P});var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(4),h=n.n(d),p=n(2),m=n.n(p),f=n(6),g=n.n(f),v=n(7),y=n(11),_=n(14),b=n(45),C=n(27),k=n(9),S=n(0);function w(){var e=r()(["<style>:host{display:inline-block}</style><slot></slot>"]);return w=function(){return e},e}var P=function(e){function t(){var e;return o()(this,t),(e=c()(this,u()(t).call(this))).digitRegex=/(-\d)|(\d)/,e.attributeName="display",e.stateTwoValue="none",e.activateStateTwo(),e}return g()(t,e),m()(t,null,[{key:"is",get:function(){return"ff-paging"}},{key:"properties",get:function(){return{paging:{type:Object,observer:"_pagingChanged"},showOnly:{type:"String",value:"false",reflectToAttribute:!0}}}},{key:"template",get:function(){return Object(v.b)(w())}}]),m()(t,[{key:"connectedCallback",value:function(){h()(u()(t.prototype),"connectedCallback",this).call(this),this.subscribtionKey=S.a.communication.ResultDispatcher.subscribe("paging",this._pagingChanged,this)}},{key:"disconnectedCallback",value:function(){h()(u()(t.prototype),"disconnectedCallback",this).call(this),S.a.communication.ResultDispatcher.unsubscribe("paging",this.subscribtionKey)}},{key:"_pagingChanged",value:function(e){var t=this;if(0===e.pageLinks.length)this.activateStateTwo();else{var n=this.querySelectorAll(b.a.is);0<n.length?n.forEach(function(n){n.paging=e,n.isActive&&t._processPagingSet(e,n)}):this._processPagingSet(e,this),this.activateStateOne()}Object(y.b)(),Object(_.a)(this,function(){return t.dispatchEvent(new CustomEvent("dom-updated",{bubbles:!0,composed:!0}))})}},{key:"_processPagingSet",value:function(e,t){var n=t.querySelector("".concat(C.a.is,'[type="firstLink"]'));n&&(this.setShowOnly(n),n.productsPerPageItem=e.firstLink);var i=t.querySelector("".concat(C.a.is,'[type="lastLink"]'));i&&(this.setShowOnly(i),i.productsPerPageItem=e.lastLink),this._processCurrentLinks(e,t);var r=t.querySelector("".concat(C.a.is,'[type="nextLink"]'));r&&(this.setShowOnly(r),r.productsPerPageItem=e.nextLink);var a=t.querySelector("".concat(C.a.is,'[type="previousLink"]'));a&&(this.setShowOnly(a),a.productsPerPageItem=e.previousLink)}},{key:"getCurrentLinkIndex",value:function(e){for(var t=0;t<e.length;t++)if(!0===e[t].currentPage)return t}},{key:"_processCurrentLinks",value:function(e,t){var n=this,i=this.getCurrentLinkIndex(e.pageLinks);t.querySelectorAll("".concat(C.a.is,'[type~="currentLink"]')).forEach(function(t){n.setShowOnly(t);var r=n.digitRegex.exec(t.type);r&&(r=parseInt(r[0]),r=isNaN(r)?0:r),t.productsPerPageItem=e.pageLinks[i+r]})}},{key:"setShowOnly",value:function(e){e.showOnly||(e.showOnly=this.showOnly)}}]),t}(Object(k.a)(["RemoveUnresolvedAttribute","CssAttributeToggle"],v.a));window.customElements.define(P.is,P)},function(e,t,n){"use strict";n.r(t),n.d(t,"Compare",function(){return C});var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(2),c=n.n(s),l=n(5),u=n.n(l),d=n(1),h=n.n(d),p=n(4),m=n.n(p),f=n(6),g=n.n(f),v=n(7),y=n(0),_=n(9);function b(){var e=r()(["<style>:host{display:block}</style><slot></slot>"]);return b=function(){return e},e}var C=function(e){function t(){return o()(this,t),u()(this,h()(t).apply(this,arguments))}return g()(t,e),c()(t,[{key:"ready",value:function(){m()(h()(t.prototype),"ready",this).call(this),this.attributeName="display",this.stateTwoValue="none",this.activateStateTwo(),this.key=y.a.common.randomString(10)}},{key:"connectedCallback",value:function(){m()(h()(t.prototype),"connectedCallback",this).call(this);var e=this.querySelector("ff-record-list");e&&(e.setAttribute("subscribe","false"),e.isCompare=!0),"true"===this.subscribe&&(this.subscribtionKey=y.a.communication.ResultDispatcher.subscribe("compare:".concat(this.key),this.handleCompareResults,this))}},{key:"disconnectedCallback",value:function(){m()(h()(t.prototype),"disconnectedCallback",this).call(this),"true"===this.subscribe&&y.a.communication.ResultDispatcher.unsubscribe("compare:".concat(this.key),this.subscribtionKey)}},{key:"handleCompareResults",value:function(e){var t=this,n=e.records||[],i=e.attributes.reduce(function(e,t){return e[t.attributeName]=t.different,e},{});if(2<=n.length){n.forEach(function(e){return e.diff=i});var r=this.querySelector("ff-record-list");r&&(r.records=n.slice(0,this.maxResults),r.addEventListener("dom-updated",function(){var e=Array.from(r.querySelectorAll("[data-attribute]"));t._updateCssClasses(e,i),t.activateStateOne()},{once:!0}))}else this.activateStateTwo()}},{key:"compareRecords",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];2<=e.length?y.a.communication.FFCommunicationEventAggregator.addFFEvent({type:"compare:".concat(this.key),ids:e,maxResults:this.maxResults}):(y.a.common.Logger.debug("No record id for compare specified."),this.activateStateTwo())}},{key:"_recordIdChanged",value:function(e,t){"true"===this.autoCompare&&this.compareRecords(e)}},{key:"_updateCssClasses",value:function(e,t){e.forEach(function(e){var n=e.getAttribute("data-attribute");!0===t[n]?(e.classList.add("ff-compare-diff"),e.classList.remove("ff-compare-equal")):!1===t[n]?(e.classList.remove("ff-compare-diff"),e.classList.add("ff-compare-equal")):(e.classList.remove("ff-compare-diff"),e.classList.remove("ff-compare-equal"))})}}],[{key:"is",get:function(){return"ff-compare"}},{key:"properties",get:function(){return{recordId:{type:Array,observer:"_recordIdChanged"},maxResults:{type:Number,value:4},subscribe:{type:String,value:"true"},autoCompare:{type:String,value:"false"}}}},{key:"template",get:function(){return Object(v.b)(b())}}]),t}(Object(_.a)(["CssAttributeToggle","RemoveUnresolvedAttribute"],v.a));window.customElements.define(C.is,C)},function(e,t,n){"use strict";n.r(t),n.d(t,"TagCloud",function(){return T});var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(4),h=n.n(d),p=n(2),m=n.n(p),f=n(6),g=n.n(f),v=n(13),y=n.n(v),_=n(7),b=n(15),C=n(12),k=n(14),S=n(20),w=n(10),P=(n(23),n(0));function E(){var e=r()(['<style>:host{display:block;max-width:600px}#tagCloudContainer{display:flex;justify-content:space-around;flex-wrap:wrap;@apply(--tag-cloud-container);}.tagCloudLink{padding:2px;@apply(--tag-cloud-link);}</style><div id="tagCloudContainer"></div>']);return E=function(){return e},e}var T=function(e){function t(){var e;return o()(this,t),(e=c()(this,u()(t).call(this)))._handleTap=e._handleTap.bind(y()(y()(e))),e.watchPropertyChanges=!1,e}return g()(t,e),m()(t,null,[{key:"is",get:function(){return"ff-tag-cloud"}},{key:"properties",get:function(){return{minFontSize:{type:Number,value:10},maxFontSize:{type:Number,value:20},unit:{type:String,value:"px"},gradientColorStart:{type:String,value:"#294884"},gradientColorEnd:{type:String,value:"#20b6e8"},wordCount:{type:Number,value:30},disableAuto:{type:Boolean}}}},{key:"template",get:function(){return Object(_.b)(E())}},{key:"observers",get:function(){return["_propertyChanged(minFontSize, maxFontSize, unit, gradientColorStart, gradientColorEnd, wordCount)"]}}]),m()(t,[{key:"connectedCallback",value:function(){h()(u()(t.prototype),"connectedCallback",this).call(this),this.subscriptionKey=P.a.communication.ResultDispatcher.subscribe("tagCloud",this._resultChanged,this),this.watchPropertyChanges=!0,this.disableAuto||this.getTagCloud()}},{key:"disconnectedCallback",value:function(){var e=this;h()(u()(t.prototype),"disconnectedCallback",this).call(this),this.$.tagCloudContainer.childNodes.forEach(function(t){return C.removeListener(t,"tap",e._handleTap)}),P.a.communication.ResultDispatcher.unsubscribe("tagCloud",this.subscriptionKey)}},{key:"_propertyChanged",value:function(e,t,n,i,r,a){var o=this;this.watchPropertyChanges&&!this.disableAuto&&(this._debounceJob=S.a.debounce(this._debounceJob,w.b.after(100),function(){return o.getTagCloud()}))}},{key:"getTagCloud",value:function(){P.a.communication.FFCommunicationEventAggregator.addFFEvent({type:"tagCloud",wordCount:this.wordCount})}},{key:"_resultChanged",value:function(e){var t=this,n=this.$.tagCloudContainer;n.childNodes.forEach(function(e){return C.removeListener(e,"tap",t._handleTap)}),P.a.common.removeChildNodes(n),e.forEach(function(e){var i=t.minFontSize+Math.round((t.maxFontSize-t.minFontSize)*e.weight),r=document.createElement("a");r.setAttribute("href","#"),r.classList.add("tagCloudLink"),r.tagCloudEntry={query:e.query,count:e.searchCount,params:P.a.common.decodeUrl(e.params)},r.style.fontSize=i+t.unit,r.style.color=t._tagColor(t._colorIncrement(1),e.weight),r.innerHTML=e.query,C.addListener(r,"tap",t._handleTap),n.appendChild(r)}),Object(k.a)(this,function(){return t.dispatchEvent(new CustomEvent("dom-updated",{bubbles:!0,composed:!0}))})}},{key:"_colorIncrement",value:function(e){var t=this;return this._toRGB(this.gradientColorEnd).map(function(n,i){return(n-t._toRGB(t.gradientColorStart)[i])/e})}},{key:"_toRGB",value:function(e){4===e.length&&(e=e.replace(/(\w)(\w)(\w)/gi,"$1$1$2$2$3$3"));var t=/(\w{2})(\w{2})(\w{2})/.exec(e);return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{key:"_tagColor",value:function(e,t){var n=this._toRGB(this.gradientColorStart).map(function(n,i){var r=Math.round(n+e[i]*t);return Math.min(Math.max(r,0),255)});return this._toHex(n)}},{key:"_toHex",value:function(e){return e.reduce(function(e,t){return e+"0".concat(t.toString(16)).slice(-2)},"#")}},{key:"_handleTap",value:function(e){e.preventDefault();var t={entry:e.target.tagCloudEntry,element:this};if(this.dispatchEvent(new CustomEvent("entry-clicked",{bubbles:!0,composed:!0,detail:t})),!0!==this.ffPreventDefault){var n=P.a.common.urlStringToDict(e.target.tagCloudEntry.params);n.type="search",this.dispatchEvent(new CustomEvent("before-search",{bubbles:!0,composed:!0,detail:n})),P.a.communication.FFCommunicationEventAggregator.addFFEvent(n)}else delete this.ffPreventDefault}}]),t}(Object(b.a)(_.a));window.customElements.define(T.is,T)},function(e,t,n){"use strict";n.r(t),n.d(t,"Carousel",function(){return A});var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(4),h=n.n(d),p=n(2),m=n.n(p),f=n(6),g=n.n(f),v=n(13),y=n.n(v),_=n(7),b=n(15),C=n(12),k=n(20),S=n(10),w=(n(23),n(0)),P=n(9),E=n(30),T=n(22);function O(){var e=r()(['<style>:host{display:block}.ff-carousel-container{overflow:hidden;@apply(--ff-carousel-container);}.ff-carousel-plane{transition:.5s;transform:translate3d(0,0,0);display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-around;@apply(--ff-carousel-plane);}#bullets{text-align:center;@apply(--ff-carousel-bullets);}.ff-carousel-bullet-button{background-color:#d3d3d3;width:10px;height:10px;margin:0 5px;padding:0;cursor:pointer;outline:0;border-radius:10px;border:none;@apply(--ff-carousel-bullet-button);}.ff-carousel-bullet-button:hover{background-color:grey;@apply(--ff-carousel-bullet-button-hover);}.selected{background-color:grey;@apply(--ff-carousel-bullet-button-selected);}</style><slot name="buttons"></slot><div class="ff-carousel-container" id="container"><div class="ff-carousel-plane" id="plane"><slot name="items"></slot></div></div><div id="bullets"></div>']);return O=function(){return e},e}var A=function(e){function t(){var e;return o()(this,t),(e=c()(this,u()(t).call(this)))._bulletTap=e._bulletTap.bind(y()(y()(e))),e}return g()(t,e),m()(t,null,[{key:"is",get:function(){return"ff-carousel"}},{key:"properties",get:function(){return{infinite:{type:String,value:"true"},auto:{type:String,value:"false"},delay:{type:Number,value:2e3},perSlide:{type:Number,value:3,observer:"calculateSizes"},showBullets:{type:String,value:"false",observer:"observeBullets"}}}},{key:"template",get:function(){return Object(_.b)(O())}}]),m()(t,[{key:"connectedCallback",value:function(){var e=this;h()(u()(t.prototype),"connectedCallback",this).call(this),this.currentSlide=0;var n=w.a.common.getParentElementByName(this,T.RecordList.is);n?this.parentListener=n.addEventListener("dom-updated",function(){e.toStart(),e.calculateSizes()}):this.warn("Component is not nested in ".concat(T.RecordList.is,", unable to install dom-updated listener.")),this.resizeListener=window.addEventListener("resize",function(){return e.debounceResize()})}},{key:"disconnectedCallback",value:function(){h()(u()(t.prototype),"disconnectedCallback",this).call(this),window.removeEventListener("resize",this.resizeListener);var e=w.a.common.getParentElementByName(this,T.RecordList.is);e&&this.parentListener&&e.removeEventListener("dom-updated",this.parentListener)}},{key:"ready",value:function(){var e=this;h()(u()(t.prototype),"ready",this).call(this);var n=this.querySelector("[data-next]");n&&n.addEventListener("click",function(){return e.nextSlide()});var i=this.querySelector("[data-prev]");i&&i.addEventListener("click",function(){return e.previousSlide()});var r=this.querySelector("[data-start]");r&&r.addEventListener("click",function(){return e.toStart()});var a=this.querySelector("[data-end]");a&&a.addEventListener("click",function(){return e.toEnd()}),this.addEventListener("mouseover",function(){return e.stopAutoPlay()}),this.addEventListener("mouseout",function(){return e.initAutoPlay()}),this.initAutoPlay()}},{key:"debounceResize",value:function(){var e=this;this._debounceResizeJob=k.a.debounce(this._debounceResizeJob,S.b.after(200),function(){return e.calculateSizes()})}},{key:"calculateSizes",value:function(){var e=this.$.container.getBoundingClientRect().width/this.perSlide,t=this.root.querySelectorAll(E.Record.is),n=this.querySelectorAll(E.Record.is),i=Math.max(t.length,n.length);this.maxSlides=Math.ceil(i/this.perSlide),this.updateBullets(),this.$.plane.style.width=e*i+"px",this.setSlide(this.currentSlide)}},{key:"setSlide",value:function(e){var t=this;if("true"===this.infinite||!(e<0||e>=this.maxSlides)){this.currentSlide=e,"true"===this.showBullets&&Array.from(this.$.bullets.children).forEach(function(e,n){return e.classList.toggle("selected",n===t.currentSlide)});var n=this.$.container.getBoundingClientRect().width*this.currentSlide*-1;this.$.plane.style.transform="translate3d(".concat(n,"px, 0px, 0px)"),this.initAutoPlay()}}},{key:"initAutoPlay",value:function(){var e=this;"true"===this.auto&&(this._debounceAutoPlayJob=k.a.debounce(this._debounceAutoPlayJob,S.b.after(this.delay),function(){return e.nextSlide()}))}},{key:"stopAutoPlay",value:function(){"true"===this.auto&&this._debounceAutoPlayJob.cancel()}},{key:"nextSlide",value:function(){var e=this.currentSlide+1;this.maxSlides>e?this.setSlide(e):"true"===this.infinite&&this.toStart()}},{key:"previousSlide",value:function(){var e=this.currentSlide-1;0<=e?this.setSlide(e):"true"===this.infinite&&this.toEnd()}},{key:"toStart",value:function(){this.setSlide(0)}},{key:"toEnd",value:function(){this.setSlide(this.maxSlides-1)}},{key:"updateBullets",value:function(){var e=this;if("true"===this.showBullets){var t=this.maxSlides,n=this.$.bullets;if(n.children.length!==t){Array.from(n.children).forEach(function(t){C.removeListener(t,"tap",e._bulletTap),n.removeChild(t)});for(var i=0;i<t;i++){var r=document.createElement("button");r.setAttribute("id","slide-".concat(i)),r.classList.add("ff-carousel-bullet-button"),r.classList.toggle("selected",this.currentSlide===i),C.addListener(r,"tap",this._bulletTap),n.appendChild(r)}}}}},{key:"observeBullets",value:function(){"true"===this.showBullets?(this.$.bullets.style.display="block",this.updateBullets()):this.$.bullets.style.display="none"}},{key:"_bulletTap",value:function(e){var t=e.currentTarget.getAttribute("id").replace("slide-","");this.setSlide(parseInt(t))}}]),t}(Object(P.a)(["ElementLog","RemoveUnresolvedAttribute"],Object(b.a)(_.a)));window.customElements.define(A.is,A)},function(e,t,n){"use strict";n.r(t),n.d(t,"SearchFeedback",function(){return S});var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(2),c=n.n(s),l=n(5),u=n.n(l),d=n(1),h=n.n(d),p=n(4),m=n.n(p),f=n(6),g=n.n(f),v=n(7),y=n(15),_=n(12),b=(n(23),n(0)),C=n(9);function k(){var e=r()(['<style>:host{position:absolute;top:20px}:host([hidden]){display:none}:host([unresolved]){opacity:0}:host([align=left]){left:0}:host([align=right]){right:0}:host([align=left]) #content{transform:translate(0,0)}:host([align=left]) #caption{transform:translate(100%,0)}.noTransition{transition:0s!important}#caption{position:absolute;right:0;transition:transform .3s;cursor:pointer;@apply(--caption-mixin);}#content{position:absolute;transition:transform .3s;transform:translate(100%,0);right:0;text-align:left;@apply(--content-mixin);}.transformZero{transform:translate(0,0)!important}.transformX{transform:translate(100%,0)!important}</style><div id="caption" on-tap="_handleTap" class="noTransition"><slot name="caption"></slot></div><div id="content" class="noTransition"><slot name="content"></slot></div>']);return k=function(){return e},e}var S=function(e){function t(){return o()(this,t),u()(this,h()(t).apply(this,arguments))}return g()(t,e),c()(t,[{key:"ready",value:function(){var e=this;m()(h()(t.prototype),"ready",this).call(this),setTimeout(function(){e.$.caption.classList.remove("noTransition"),e.$.content.classList.remove("noTransition")},500)}},{key:"connectedCallback",value:function(){var e=this;m()(h()(t.prototype),"connectedCallback",this).call(this),this.subscriptionKey=b.a.communication.ResultDispatcher.subscribe("result",this._resultChanged,this);var n=function(t,n){var i=e.querySelector(t);i&&_.addListener(i,"tap",n.bind(e))};n("[data-toggle]",this._handleTap),n("[data-send]",this._handleSend),n("[data-positive]",this._setPositive),n("[data-negative]",this._setNegative)}},{key:"disconnectedCallback",value:function(){m()(h()(t.prototype),"disconnectedCallback",this).call(this),b.a.communication.ResultDispatcher.unsubscribe("result",this.subscriptionKey)}},{key:"_openChanged",value:function(e,t){if(this.hidden)this._removeTransitions();else{var n="right"===this.align;this.$.content.classList.toggle(n?"transformZero":"transformX"),this.$.caption.classList.toggle(n?"transformX":"transformZero")}}},{key:"_removeTransitions",value:function(){this.$.content.classList.remove("transformZero"),this.$.content.classList.remove("transformX"),this.$.caption.classList.remove("transformZero"),this.$.caption.classList.remove("transformX")}},{key:"_resultChanged",value:function(e){!0!==this.dontShowOnResultChanged&&e&&this.hidden&&this._setHidden(!1),this.opened=!1,this._removeTransitions(),this.reset()}},{key:"_handleTap",value:function(){this.opened=!this.opened,this._checkAndReset()}},{key:"_checkAndReset",value:function(){!this.opened&&this.resetOnToggle&&this.reset()}},{key:"_handleSend",value:function(){var e=this,t={query:b.a.communication.Util.getQueryFromSearchParams(),id:"none",positive:this.positive,success:function(){console.log(e._setHidden),e.resetOnSend&&e._resetAfterSend(),e.dispatchEvent(new CustomEvent("successful",{bubbles:!0,composed:!0}))},fail:function(){return e.dispatchEvent(new CustomEvent("failed",{bubbles:!0,composed:!0}))}},n=this.querySelector("[data-message]");n&&"string"==typeof n.value&&(t.message=n.value),b.a.communication.trackingManager.searchFeedback(t)}},{key:"_resetAfterSend",value:function(){this.reset(),this.hide()}},{key:"_setPositive",value:function(){this.positive="true"}},{key:"_setNegative",value:function(){this.positive="false"}},{key:"hide",value:function(){this._setHidden(!0),this.opened=!1}},{key:"show",value:function(){this._setHidden(!1)}},{key:"reset",value:function(){this._setPositive();var e=this.querySelector("[data-message]");e&&"string"==typeof e.value&&(e.value="")}}],[{key:"is",get:function(){return"ff-search-feedback"}},{key:"properties",get:function(){return{opened:{type:Boolean,notify:!0,reflectToAttribute:!0,observer:"_openChanged"},align:{type:String,value:"left"},hidden:{type:Boolean,value:!0,readOnly:!0,reflectToAttribute:!0},positive:{type:String,value:"true",notify:!0},resetOnToggle:{type:Boolean},resetOnSend:{type:Boolean},dontShowOnResultChanged:{type:Boolean}}}},{key:"template",get:function(){return Object(v.b)(k())}}]),t}(Object(C.a)(["RemoveUnresolvedAttribute"],Object(y.a)(v.a)));window.customElements.define(S.is,S)},function(e,t,n){"use strict";n.r(t),n.d(t,"Middleware",function(){return g});var i=n(3),r=n.n(i),a=n(2),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(4),h=n.n(d),p=n(6),m=n.n(p),f=n(7),g=(n(0),function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return m()(t,e),o()(t,[{key:"connectedCallback",value:function(){h()(u()(t.prototype),"connectedCallback",this).call(this);var e="ff-communication";if(e!==this.parentElement.nodeName.toLowerCase())throw new Error("".concat(t.is," must be a direct child of ").concat(e))}},{key:"disconnectedCallback",value:function(){h()(u()(t.prototype),"disconnectedCallback",this).call(this)}}],[{key:"is",get:function(){return"ff-middleware"}}]),t}(f.a));window.customElements.define(g.is,g)},function(e,t,n){"use strict";n.r(t),n.d(t,"MultiAttributeParsing",function(){return v});var i=n(3),r=n.n(i),a=n(2),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(4),h=n.n(d),p=n(6),m=n.n(p),f=n(7),g=n(0),v=function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return m()(t,e),o()(t,[{key:"ready",value:function(){h()(u()(t.prototype),"ready",this).call(this);var e="ff-middleware";if(e!==this.parentElement.nodeName.toLowerCase())throw new Error("".concat(t.is," must be a direct child of ").concat(e));g.a.middleware.response.use(g.a.middleware.response.MultiAttributeParsing({srcProperty:this.srcProperty,storeInProperty:this.storeInProperty,keepOriginalInProperty:this.keepOriginalInProperty,entrySeparator:this.entrySeparator,keyValueSeparator:this.keyValueSeparator}))}}],[{key:"is",get:function(){return"ff-multi-attribute-parsing"}},{key:"properties",get:function(){return{srcProperty:String,storeInProperty:String,keepOriginalInProperty:String,entrySeparator:String,keyValueSeparator:String}}}]),t}(f.a);window.customElements.define(v.is,v)},function(e,t,n){"use strict";n.r(t);var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(4),h=n.n(d),p=n(2),m=n.n(p),f=n(6),g=n.n(f),v=n(7),y=n(11),_=n(14),b=n(9),C=n(0),k=n(15),S=n(10),w=(n(23),n(12));function P(){var e=r()(['<style>:host{display:block;outline:0}#selected,#unselected{display:inline-block}</style><div id="selected" style="display:none"><slot name="selected"></slot></div><div id="unselected"><slot name="unselected"></slot></div>']);return P=function(){return e},e}var E=function(e){function t(){var e;return o()(this,t),(e=c()(this,u()(t).call(this)))._renderer=new C.a.html.AsnRenderer,e._ffCommunication=C.a.communication.FFCommunicationEventAggregator,e.attributeName="display",e.stateTwoValue="none",e._selectedElement=null,e._unselectedElement=null,e._selectedTemplate=null,e._unselectedTemplate=null,e._selectedTemplateREF=null,e._unselectedTemplateREF=null,e._isReady=!1,e}return g()(t,e),m()(t,null,[{key:"is",get:function(){return"ff-asn-group-element"}},{key:"properties",get:function(){return{selected:{type:String,reflectToAttribute:!0,notify:!0},element:{type:Object,observer:"_asnElementDataChanged"},group:{type:Object}}}},{key:"template",get:function(){return Object(v.b)(P())}}]),m()(t,[{key:"ready",value:function(){var e=this;!0!==this._isReady&&(h()(u()(t.prototype),"ready",this).call(this),this.element||this.activateStateTwo(),this.__init(),w.addListener(this,"tap",function(t){return e._taped(t)}),""===this.getAttribute("selected")&&(this.selected=!0),this._isReady=!0)}},{key:"_asnElementDataChanged",value:function(e){e?(this.__processTemplates(),this.selected=e.selected,this.classList.remove("clusterLevel0"),this.classList.remove("clusterLevel1"),this.classList.remove("clusterLevel2"),this.classList.remove("clusterLevel3"),this.classList.remove("clusterLevel4"),e.clusterLevel&&this.classList.add("clusterLevel".concat(e.clusterLevel)),this.bindImage(),this.activateStateOne()):this.activateStateTwo()}},{key:"_taped",value:function(e){this.selected=!this.selected,this._ffCommunication.addFFEvent({type:"filter",groupName:this.group.name,filterName:this.element.name,clusterLevel:this.element.clusterLevel})}},{key:"__initTemplates",value:function(){try{this._selectedTemplate&&this._unselectedTemplate||(this._selectedTemplateREF=this._selectedTemplateREF||this.querySelector("[slot='selected']"),this._unselectedTemplateREF=this._unselectedTemplateREF||this.querySelector("[slot='unselected']"),this._selectedTemplate=this._selectedTemplateREF.cloneNode(!0),this._unselectedTemplate=this._unselectedTemplateREF.cloneNode(!0),this._selectedTemplateREF.parentNode&&this._selectedTemplateREF.parentNode.removeChild(this._selectedTemplateREF),this._unselectedTemplateREF.parentNode&&this._unselectedTemplateREF.parentNode.removeChild(this._unselectedTemplateREF))}catch(e){console.log(e)}}},{key:"__initElements",value:function(){this._selectedElement||(this._selectedElement=this.shadowRoot.querySelector("#selected"),this._unselectedElement=this.shadowRoot.querySelector("#unselected"))}},{key:"__init",value:function(){this.addEventListener("selected-changed",this._selectedStateChanged.bind(this)),this.__initElements(),this.__initTemplates()}},{key:"__processTemplates",value:function(){var e=this._renderer.processAsnElement(this._selectedTemplate,this.element,this.group,null,{returnAsString:!1}),t=this._renderer.processAsnElement(this._unselectedTemplate,this.element,this.group,null,{returnAsString:!1});this.appendChild(e),this.appendChild(t)}},{key:"_selectedStateChanged",value:function(e){var t=e.detail.value;!0===t||""===t?(this._unselectedElement.style.display="none",this._selectedElement.style.display=""):!1===t&&(this._selectedElement.style.display="none",this._unselectedElement.style.display="")}},{key:"clone",value:function(){var e=document.createElement(t.is);return C.a.common.copyHTMLAttributes(this,e),e.innerHTML=this.innerHTML,e._selectedTemplateREF=(this._selectedTemplateREF||this.querySelector("[slot='selected']")).cloneNode(!0),e._unselectedTemplateREF=(this._unselectedTemplateREF||this.querySelector("[slot='unselected']")).cloneNode(!0),e.ready(),e}}]),t}(Object(b.a)(["CssAttributeToggle","RemoveUnresolvedAttribute","ImageTest"],Object(k.a)(v.a)));function T(){var e=r()(['<style>:host{opacity:0;transition:opacity .4s;outline:0;display:block;min-width:180px;max-width:220px}:host-context([align=horizontal]) #wrapper{position:absolute;width:100%}.ff-asn-group-container{position:relative;@apply(--ff-asn-group-container);}#wrapper{position:relative;transition-duration:350ms;@apply(--all-links-container);}</style>\x3c!--group caption--\x3e<slot name="groupCaption"></slot>\x3c!--filter links--\x3e<div class="ff-asn-group-container"><div opened id="wrapper"><slot></slot></div></div>']);return T=function(){return e},e}window.customElements.define(E.is,E);var O=function(e){function t(){var e;return o()(this,t),(e=c()(this,u()(t).call(this))).selectorDetailLinksContent='[data-content="detailedLinks"]',e.selectorHiddenLinksContent='[data-content="hiddenLinks"]',e.selectorDetailLinksContainer='[data-container="detailedLinks"]',e.selectorHiddenLinksContainer='[data-container="hiddenLinks"]',e.selectorWrapper="#wrapper",e.selectorShowMoreContainer='[data-container="showMore"]',e.selectorShowLessContainer='[data-container="showLess"]',e.selectorGroupCaptionContainer='[slot="groupCaption"]',e.selectRemoveFilterContainer='[data-container="removeFilter"]',e._renderer=new C.a.html.TemplateRenderer,e._ffCommunication=C.a.communication.FFCommunicationEventAggregator,e._asnGroupElementTemplate=null,e._isReady=!1,e}return g()(t,e),m()(t,null,[{key:"is",get:function(){return"ff-asn-group"}},{key:"properties",get:function(){return{collapsible:{type:"String",value:"true"},opened:{type:Boolean,reflectToAttribute:!0},forGroup:{type:String,reflectToAttribute:!0},filterStyle:{type:String,reflectToAttribute:!0},disableAutoExpand:{type:Boolean,reflectToAttribute:!0},group:{type:Object,observer:"_asnGroupChanged"},laszyLoad:{type:String,value:"true"},selectBox:{type:String,value:"false"}}}},{key:"template",get:function(){return Object(v.b)(T())}}]),m()(t,[{key:"ready",value:function(){if(!0!==this._isReady){if(h()(u()(t.prototype),"ready",this).call(this),this.style.display="none",this.style.offsetHeight,this.hidenLinksProcessed=!1,this.detaildLinksProcessed=!1,!this._asnGroupElementTemplate){var e=this.querySelector(E.is);if(e){var n=(this._asnGroupElementTemplate=e).parentNode;n&&n.removeChild(e)}}if(!this._asnGroupElementTemplate){var i=document.createElement("div");i.innerHTML="<ff-asn-group-element>\n                                <div slot='selected'>\n                                    <span>{{element.name}}</span>\n                                </div>\n                                <div slot='unselected'>\n                                    <span>{{element.name}}</span>\n                                </div>\n                            </ff-asn-group-element>",this._asnGroupElementTemplate=i.firstElementChild,i.removeChild(this._asnGroupElementTemplate)}this._wrapper=this.shadowRoot.querySelector(this.selectorWrapper),this._initSelectBoxTemplate(),this._initHiddenLinksContainer(),this._initDetailedLinksContainer(),this._initGroupCaption(),this._initRemoveFilter(),this._initShowMore(),this._initShowLess(),this.opened?this.show(!1):this.hide(!1),this._isReady=!0}}},{key:"_initSelectBoxTemplate",value:function(){this._selectBoxTemplate=this.querySelector("[data-template]"),this._selectBoxTemplate&&(this._selectBoxTemplate.parentNode.removeChild(this._selectBoxTemplate),Object(y.b)())}},{key:"_asnGroupChanged",value:function(e){var t=this;if(e){var n=function(){t.hidenLinksProcessed=!1,t.detaildLinksProcessed=!1,t.forGroup&&"all"!==t.forGroup||(t.forGroup=e.name),t.filterStyle||(t.filterStyle=e.filterStyle),t._processGroupCaption(),"false"===t.laszyLoad?(t._processDetailedLinksContainer(e),t._processHiddenLinksContainer(e)):(t.opened||"true"===t.opened)&&t._processDetailedLinksContainer(e),(t._hiddenLinksContainer.hasAttribute("opened")||"true"===t.selectBox)&&t._processHiddenLinksContainer(e),t._processShowLess(),t._processShowMore(),t._processRemoveFilter(e),Object(y.b)(),t.style.display="",t.offsetHeight,e.selectedElements&&0<e.selectedElements.length&&!t.disableAutoExpand&&t.show(),t.style.opacity="1"};!0===C.a.communication.globalCommunicationParameter.asyncFacets?Object(_.a)(this,n):n()}else this.style.display="none",this.offsetHeight,this.style.opacity=0}},{key:"_addAndProcessAsnElements",value:function(e,t,n,i){var r,a=this,o=t.querySelector(e);if(o){for(var s=o.parentElement,c=s.querySelectorAll(E.is),l=0;l<c.length&&n[l];l++)(r=c[l]).group=i,r.element=n[l];n.forEach(function(e){if(a._asnGroupElementTemplate){var t=a._asnGroupElementTemplate.clone();t.group=i,t.element=e,s.insertBefore(t,o)}else"SLIDER"!==a.group.filterStyle&&console.log("No asn-group-element template to clone.")}),c.forEach(function(e){(r=e).element=null}),Object(y.b)()}else console.warn("No [data-content] available. Filter elements are not processed. Please add a [data-content='detailedLinks'] and [data-content='hiddenLinks'] element.")}},{key:"_processHiddenLinksContainer",value:function(e){var t=this;if(!this.hidenLinksProcessed){var n=e.selectedElements.concat(e.elements);if(0!==e.detailedLinks&&(n=n.splice(e.detailedLinks,n.length-1)),"true"===this.selectBox){var i=this._hiddenLinksContainer;i.querySelectorAll("option").forEach(function(e){e.data&&i.removeChild(e)}),0<n.length?(n.forEach(function(e){var n,i=document.createElement("option");n=t._selectBoxTemplate?t._renderer.render(t._selectBoxTemplate.innerHTML,{group:t.group,element:e}):"".concat(e.name," ").concat(t.group.unit," (").concat(e.recordCount,")"),i.innerHTML=n,i.value=e.name,i.data=e,t._hiddenLinksContainer.appendChild(i)}),this._showChecked(this._hiddenLinksContainer),this._hiddenLinksContainer.style.display=""):(this._hiddenLinksContainer.style.display="none",this._hideChecked(this._hiddenLinksContainer))}else this._addAndProcessAsnElements(this.selectorHiddenLinksContent,this,n,e);this.hidenLinksProcessed=!0}}},{key:"_processDetailedLinksContainer",value:function(e){if(!this.detaildLinksProcessed&&e){var t=e.selectedElements.concat(e.elements);t=t.splice(0,e.detailedLinks),this._addAndProcessAsnElements(this.selectorDetailLinksContent,this,t,e),this.detaildLinksProcessed=!0}}},{key:"_processGroupCaption",value:function(){this._groupCaptionContainer.innerHTML=this._renderer.render(this._groupCaptionTemplate,{group:this.group})}},{key:"_processShowMore",value:function(){var e=this._showMoreContainer;e&&(this.group.detailedLinks<this.group.selectedElements.length+this.group.elements.length?(e.innerHTML=this._renderer.render(e.innerHTML,{group:this.group}),e.style.display=""):e.style.display="none")}},{key:"_processShowLess",value:function(){var e=this._showLessContainer;e&&(this.group.detailedLinks<this.group.selectedElements.length+this.group.elements.length?(e.innerHTML=this._renderer.render(e.innerHTML,this.group),e.style.display=""):e.style.display="none")}},{key:"_initGroupCaption",value:function(){var e=this;if(this._groupCaptionContainer=this.querySelector(this.selectorGroupCaptionContainer),!this._groupCaptionContainer){var t=document.createElement("div");t.innerHTML="<div data-container='groupCaption' class='cursor'>\n                                <div class='groupCaption'> {{group.name}}</div>\n                              </div>",this._groupCaptionContainer=t.firstElementChild,this.appendChild(this._groupCaptionContainer),Object(y.b)()}"true"===this.collapsible&&this.bind(this.selectorGroupCaptionContainer,function(){e.toggle()}),this._groupCaptionTemplate=this._groupCaptionContainer.innerHTML}},{key:"_initRemoveFilter",value:function(){var e=this;this._removeFilterContainer=this.querySelector(this.selectRemoveFilterContainer),this._removeFilterContainer&&this.bind(this.selectRemoveFilterContainer,function(){e._ffCommunication.addFFEvent({type:"filter",groupName:e.group.name,removeAll:!0})})}},{key:"_processRemoveFilter",value:function(e){this._removeFilterContainer&&(this._removeFilterContainer.style.display=0<e.selectedElements.length?"inline":"none")}},{key:"_initShowMore",value:function(){var e=this;this._showMoreContainer=this.querySelector(this.selectorShowMoreContainer),this._showChecked(this._showMoreContainer),"true"===this.selectBox&&this._hideChecked(this._showMoreContainer),this.bind(this.selectorShowMoreContainer,function(){S.a.run(function(){return e.showHiddenLinksContainer()})})}},{key:"_initShowLess",value:function(){var e=this;this._showLessContainer=this.querySelector(this.selectorShowLessContainer),this._hideChecked(this._showLessContainer),"true"===this.selectBox&&this._hideChecked(this._showMoreContainer),this.bind(this.selectorShowLessContainer,function(){S.a.run(function(){return e.hideHiddenLinksContainer()})})}},{key:"_initHiddenLinksContainer",value:function(){if(this._hiddenLinksContainer=this.querySelector(this.selectorHiddenLinksContainer),"true"===this.selectBox){if(!this._hiddenLinksContainer){var e=document.createElement("select");this._hiddenLinksContainer=e,this._hiddenLinksContainer.opened="true",this.appendChild(this._hiddenLinksContainer),Object(y.b)()}this._hiddenLinksContainer.addEventListener("change",this.onSelectChanged.bind(this)),this._show(this._hiddenLinksContainer)}else{if(!this._hiddenLinksContainer){var t=document.createElement("div");t.innerHTML="<div opened data-container='hiddenLinks'>\n                                    <div data-content='hiddenLinks'></div>\n                                    <div class='marginBottom'></div>\n                                  </div>",this._hiddenLinksContainer=t.firstElementChild,this.appendChild(this._hiddenLinksContainer),Object(y.b)()}this._hiddenLinksContainer.hasAttribute("opened")||this._hide(this._hiddenLinksContainer)}}},{key:"onSelectChanged",value:function(){var e=this._hiddenLinksContainer.options[this._hiddenLinksContainer.selectedIndex].data;e&&C.a.communication.FFCommunicationEventAggregator.addFFEvent({type:"filter",groupName:this.group.name,filterName:e.__ORIG_NAME__||e.name,clusterLevel:e.clusterLevel})}},{key:"_initDetailedLinksContainer",value:function(){if(this._detailedLinksContainer=this.querySelector(this.selectorDetailLinksContainer),!this._detailedLinksContainer){var e=document.createElement("div");e.innerHTML="<div opened data-container='detailedLinks'>\n                                <div data-content='detailedLinks'></div>\n                                <div class='marginBottom'></div>\n                              </div>",this._detailedLinksContainer=e.firstElementChild,this.appendChild(this._detailedLinksContainer),Object(y.b)()}}},{key:"toggle",value:function(e){this._wrapper&&this._wrapper.hasAttribute("opened")?this.hide(e):this.show(e)}},{key:"show",value:function(e){var t=this;this._processDetailedLinksContainer(this.group),this._show(this._wrapper,e),Object(_.a)(this,function(){return t.opened=!0})}},{key:"hide",value:function(e){var t=this;"false"!==this.collapsible&&!1!==this.opened&&this._hide(this._wrapper,e,function(){return t.opened=!1})}},{key:"toggleDetailedLinksContainer",value:function(e){"true"===this.laszyLoad&&!1===this.detaildLinksProcessed&&this._toggle(this._detailedLinksContainer,e)}},{key:"showDetailedLinksContainer",value:function(e){"true"===this.laszyLoad&&!1===this.detaildLinksProcessed&&this._show(this._detailedLinksContainer,e)}},{key:"hideDetailedLinksContainer",value:function(e){this._hide(this._detailedLinksContainer,e)}},{key:"toggleHiddenLinksContainer",value:function(e){"true"===this.laszyLoad&&!1===this.hidenLinksProcessed&&this._processHiddenLinksContainer(this.group),this._toggleChecked(this._hiddenLinksContainer,e),this._toggleChecked(this._showMoreContainer),this._toggleChecked(this._showLessContainer)}},{key:"showHiddenLinksContainer",value:function(e){"true"===this.laszyLoad&&!1===this.hidenLinksProcessed&&this._processHiddenLinksContainer(this.group),this._hideChecked(this._showMoreContainer),this._showChecked(this._showLessContainer),this._showChecked(this._hiddenLinksContainer,e)}},{key:"hideHiddenLinksContainer",value:function(e){this._showChecked(this._showMoreContainer),this._hideChecked(this._showLessContainer),this._hideChecked(this._hiddenLinksContainer,e)}},{key:"clone",value:function(){var e=document.createElement(t.is);C.a.common.copyHTMLAttributes(this,e);var n=e;return this._asnGroupElementTemplate&&(n._asnGroupElementTemplate=this._asnGroupElementTemplate.clone()),e.innerHTML=this.innerHTML,Object(y.b)(),e.ready(),e}}]),t}(Object(b.a)(["BindAction","CollapseElement","RemoveUnresolvedAttribute"],Object(k.a)(v.a)));window.customElements.define(O.is,O);var A,L,x,R=((A={}).Event=((L=A.Event||{}).add=document.addEventListener?function(e,t,n,i){i=i||!1,e.addEventListener(t,n,i)}:function(e,t,n){e.attachEvent("on"+t,n)},L.remove=document.removeEventListener?function(e,t,n,i){i=i||!1,e.removeEventListener(t,n,i)}:function(e,t,n){e.detachEvent("on"+t,n)},L.DOMit=function(e){return function(e){if(!e.clientX)try{e.clientX=e.touches[0].clientX}catch(e){}if(!e.clientY)try{e.clientY=e.touches[0].clientY}catch(e){}}(e),(e=e||window.event).target||(e.target=e.srcElement),e.preventDefault||(e.preventDefault=function(){return e.returnValue=!1}),e.stopPropagation||(e.stopPropagation=function(){e.cancelBubble=!0}),e},L.getTarget=function(e){var t=(e=L.DOMit(e)).target;return 1!==t.nodeType&&(t=t.parentNode),t},L.domReady=function(){var e=[],t=!1;function n(n){if(!t&&("readystatechange"!==n.type||"complete"===document.readyState)){for(var i=0,r=e.length;i<r;i++)e[i].call(document);t=!0,e=[]}}return document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),document.addEventListener("readystatechange",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",n),window.attachEvent("onload",n)),function(n){t?n.call(document):e.push(n)}}(),L),A.Viewport={_docEl:null,getDocEl:function(){var e="",t=document;return this._docEl||(e=t.compatMode,this._docEl="CSS1Compat"===e?t.documentElement:t.body),this._docEl},getWidth:function(){var e=this.getDocEl().clientWidth;return window.innerWidth&&e>window.innerWidth&&(e=window.innerWidth),e},getHeight:function(){var e=this.getDocEl().clientHeight;return window.innerHeight&&e>window.innerHeight&&(e=window.innerHeight),e},getScrollX:function(){return"number"==typeof window.pageXOffset?window.pageXOffset:this.getDocEl().scrollLeft},getScrollY:function(){return"number"==typeof window.pageYOffset?window.pageYOffset:this.getDocEl().scrollTop},getAll:function(){return{width:this.getWidth(),height:this.getHeight(),scrollX:this.getScrollX(),scrollY:this.getScrollY()}}},A.Util=((x=A.Util||{}).$=function(e,t){return t?t.root?t.shadowRoot.querySelector(e):t.querySelector(e):e.nodeType?e:""!==e?window.ShadowDOMPolyfill||Element.prototype.createShadowRoot?document.querySelector("body /deep/ #"+e):document.getElementById(e):void 0},x.intersectContainer=function(e,t){var n=parseInt(e.style.left.replace("px",""),10),i=parseInt(e.style.left.replace("px",""))+e.offsetWidth,r=parseInt(t.style.left.replace("px",""),10),a=parseInt(t.style.left.replace("px",""),10)+t.offsetWidth;return x.intersectValues(n,i,r,a)},x.intersectValues=function(e,t,n,i){return e<=i&&n<=t||i<=e&&t<=n},x.getCurrentStyle=function(e,t){var n,i,r="";return window.getComputedStyle?r=window.getComputedStyle(e,null)[t]:e.currentStyle&&(r=e.currentStyle[t],!/^\d+(px)?$/i.test(r)&&/^\d/.test(r)&&(n=e.style.left,i=e.runtimeStyle.left,e.runtimeStyle.left=e.currentStyle.left,e.style.left=r||0,r=e.style.pixelLeft+"px",e.style.left=n,e.runtimeStyle.left=i)),r},x.contained=function(e,t){if(!e)return!1;for(;e=e.parentNode;)if(e===t)return!0;return!1},x.hash=function(){return Math.floor(65536*(1+Math.random())).toString(32).substring(1)},x),A.Draggable=function(){var e=A.Util,t=A.Event,n=A.Viewport;function i(n,r,a,o){var s,c;if("string"==typeof n?s=e.$(n):"nodeType"in n?s=n:console.log("Cant process identifierer "+n),!s)throw new Error("new DYN_WEB.Draggable: No element with the specified id found.");this.id=n;var l=parseInt(e.getCurrentStyle(s,"left"),10),u=parseInt(e.getCurrentStyle(s,"top"),10);if(a&&(this.minX="number"==typeof a.minX?a.minX:void 0,this.maxX="number"==typeof a.maxX?a.maxX:void 0,this.minY="number"==typeof a.minY?a.minY:void 0,this.maxY="number"==typeof a.maxY?a.maxY:void 0,this.on_drag_start="function"==typeof a.on_drag_start?a.on_drag_start:this.on_drag_start,this.on_drag="function"==typeof a.on_drag?a.on_drag:this.on_drag,this.on_drag_end="function"==typeof a.on_drag_end?a.on_drag_end:this.on_drag_end),o?(l=this.maxX,this.slider2=e.$(n)):(l=isNaN(l)?0:l,this.slider1=e.$(n)),u=isNaN(u)?0:u,i.shiftTo(s,l,u),r){if(!(c=r.nodeType?r:e.$(r)))throw new Error("new DYN_WEB.Draggable: No element with the specified handleId found.");if(!e.contained(c,s))throw new Error("new DYN_WEB.Draggable: No element with id "+r+" found inside "+n+".")}else c=s;t.add(c,"mousedown",i.start.bind(this)),t.add(c,"touchstart",i.start.bind(this))}return i.prototype={on_drag_start:function(){},on_drag:function(){},on_drag_end:function(){}},i.zOrder=1e3,i.start=function(e){var r,a,o,s,c,l=0;e=t.DOMit(e);var u=t.getTarget(e);do{if(u.id===this.slider1.id){r=this.slider1;break}if(u.id===this.slider2.id){r=this.slider2;break}l++}while(l<10&&(u=u.parentNode));if(!r)throw new Error("Unable to find Draggable element onmousedown.");r.style.zIndex=i.zOrder++,a=e.clientX+n.getScrollX(),o=e.clientY+n.getScrollY(),s=parseInt(r.style.left,10)||0,c=parseInt(r.style.top,10)||0,this.dx=a-s,this.dy=o-c,this.downX=a,this.downY=o,this.on_drag_start(s,c),this.drag=i.drag.bind(this),this.end=i.end.bind(this),t.add(document,"mousemove",this.drag),t.add(document,"touchmove",this.drag),t.add(document,"mouseup",this.end),t.add(document,"touchend",this.end),e.preventDefault(),e.stopPropagation()},i.drag=function(e){e=t.DOMit(e);var r=this,a=this.id,o=e.clientX+n.getScrollX()-r.dx,s=e.clientY+n.getScrollY()-r.dy;o=void 0!==r.minX?Math.max(r.minX,o):o,o=void 0!==r.maxX?Math.min(r.maxX,o):o,s=void 0!==r.minY?Math.max(r.minY,s):s,s=void 0!==r.maxY?Math.min(r.maxY,s):s,("string"==typeof r.id?r.id===this.slider1.id:r.id.id===this.slider1.id)?(r.maxX=parseInt(this.slider2.style.left.replace("px",""),10),r.minX=0):("string"==typeof r.id?r.id===this.slider2.id:r.id.id===this.slider2.id)&&(r.minX=parseInt(this.slider1.style.left.replace("px",""),10),r.maxX=r.origMaxX),i.shiftTo(a,o,s),r.on_drag(o,s),e.preventDefault()},i.end=function(){var e,n,i=this.id;t.remove(document,"mousemove",this.drag),t.remove(document,"touchmove",this.drag),t.remove(document,"mouseup",this.end),t.remove(document,"touchend",this.end),i&&(e=parseInt(i.style.left,10),n=parseInt(i.style.top,10),this.on_drag_end(e,n))},i.setup=function(){for(var e,t=0,n=arguments.length;t<n;t++)"string"==typeof(e=arguments[t])?new i(e):new i(e.id,e.handleId,e)},i.shiftTo=function(e,t,n){e.style.left=parseInt(t,10)+"px",e.style.top=parseInt(n,10)+"px"},i}(),A.Slider=function(){var e=A.Util,t=A.Event,n=A.Draggable;function i(e,t,n,r,a){this.id=e,this.trackId=t,this.axis=n,"string"!=typeof this.id?i.col[this.id.id]=this:i.col[this.id]=this,this.init(r)}return i.col={},i.prototype={slideDur:50,init:function(i){var r,a=e.$(this.id),o=e.$(this.trackId),s=parseInt(e.getCurrentStyle(a,"left"),10),c=parseInt(e.getCurrentStyle(a,"top"),10),l=this;s=isNaN(s)?0:s,c=isNaN(c)?0:c,r="v"===this.axis?{minX:s,maxX:s,minY:0,maxY:o.offsetHeight-a.offsetHeight-2*o.clientTop}:{minX:0,maxX:o.offsetWidth-a.offsetWidth-2*o.clientLeft,minY:c,maxY:c},this.barWd=a.offsetWidth,this.barHt=a.offsetHeight,this.Dragbar=i?new n(this.id,"",r,!0):new n(this.id,"",r),this.minX=this.Dragbar.minX,this.maxX=this.Dragbar.maxX,this.origMaxX=this.maxX,this.Dragbar.origMaxX=this.origMaxX,this.minY=this.Dragbar.minY,this.maxY=this.Dragbar.maxY,this.Dragbar.on_drag_start=function(e,t){l.on_move_start(e,t)},this.Dragbar.on_drag=function(e,t){l.on_move(e,t)},this.Dragbar.on_drag_end=function(e,t){l.on_move_end(e,t)},t.add(o,"mousedown",function(e){l.prepSlide(e,l.id)}),t.add(o,"touchstart",function(e){l.prepSlide(e,l.id)})},prepSlide:function(n,r){var a;n=t.DOMit(n);var o=(a="string"!=typeof r?i.col[r.id]:i.col[r]).bar=e.$(r);a.clearTimer(),n.offX="number"==typeof n.offsetX?n.offsetX:n.layerX,n.offY="number"==typeof n.offsetY?n.offsetY:n.layerY,a.startX=parseInt(o.style.left,10),a.startY=parseInt(o.style.top,10),"v"===a.axis?(a.destX=a.startX,a.destY=n.offY<a.startY?n.offY:n.offY-a.barHt,a.destY=Math.min(Math.max(a.destY,a.minY),a.maxY)):(a.destX=n.offX<a.startX?n.offX:n.offX-a.barWd,a.destX=Math.min(Math.max(a.destX,a.minX),a.maxX),a.destY=a.startY),a.distX=a.destX-a.startX,a.distY=a.destY-a.startY,a.per=Math.PI/(2*a.slideDur),a.slideStartTime=(new Date).getTime(),a.on_move_start(a.startX,a.startY),a.timerId=setInterval(function(){a.doSlide()},10)},doSlide:function(){},shiftTo:function(e,t){!this.bar||isNaN(e)||isNaN(t)||(this.bar.style.left=Math.round(e)+"px",this.bar.style.top=Math.round(t)+"px")},clearTimer:function(){clearInterval(this.timerId),this.timerId=0},on_move_start:function(e,t){},on_move:function(e,t){},on_move_end:function(e,t){}},i}(),A);function I(){var e=r()(['<style>:host{height:5px;background-color:#336;margin:5px auto;display:block;opacity:0;transition:opacity .8s}.sliderWrapper{min-width:1px;@apply(--slider-wrapper);}.ff_slidebar{@apply(--slidebar-mixin);}</style><div id="ffSliderBar" style="position:relative;width:100%;height:100%" class="ff_slidebar">\x3c!-- currently the id of slider in light and shadow dom need to have identical id to function. need to change dw_slider.js to get rid for polyfill duplicate id correctness. --\x3e<div id="slider1" class="sliderWrapper" style="position:absolute!important"><slot name="slider1"></slot></div><div id="slider2" class="sliderWrapper" style="position:absolute!important"><slot name="slider2"></slot></div></div>']);return I=function(){return e},e}var F=function(e){function t(){var e;return o()(this,t),(e=c()(this,u()(t).call(this)))._slider1=null,e._slider2=null,e}return g()(t,e),m()(t,null,[{key:"is",get:function(){return"ff-slider"}},{key:"properties",get:function(){return{stepSize:{type:Number,value:1},selectedMinValue:{type:Number,observer:"_selectedMinChanged"},selectedMaxValue:{type:Number,observer:"_selectedMaxChanged"},submitOnRelease:{type:Boolean,value:!0},absoluteMaxValue:{type:Number},absoluteMinValue:{type:Number},unit:{type:String}}}},{key:"template",get:function(){return Object(v.b)(I())}}]),m()(t,[{key:"ready",value:function(){h()(u()(t.prototype),"ready",this).call(this),this.isInitialzied=!1,this.dragging=!1}},{key:"connectedCallback",value:function(){var e=this;h()(u()(t.prototype),"connectedCallback",this).call(this),this.resizeHandler=window.addEventListener("resize",function(){return e.renderSlider()}),this.renderSliderKey||(this.renderSliderKey=setInterval(function(){return e.renderSlider()},250))}},{key:"disconnectedCallback",value:function(){h()(u()(t.prototype),"disconnectedCallback",this).call(this),window.removeEventListener("resize",this.resizeHandler),this.renderSliderKey&&clearInterval(this.renderSliderKey)}},{key:"getSliderData",value:function(){return{absoluteMaxValue:this.absoluteMaxValue,absoluteMinValue:this.absoluteMinValue,selectedMinValue:this.selectedMinValue,selectedMaxValue:this.selectedMaxValue}}},{key:"init",value:function(e){var t=this;this._slider1=new R.Slider(this.$.slider1,this,"h"),this._slider1.on_move=this._moveSlider1.bind(this),this._slider1.on_move_end=this._onMoveEnded1.bind(this),this._slider2=new R.Slider(this.$.slider2,this,"h",!0),this._slider2.on_move=this._moveSlider2.bind(this),this._slider2.on_move_end=this._onMoveEnded2.bind(this),this._slider1.Dragbar.slider2=this._slider2.Dragbar.id,this._slider2.Dragbar.slider1=this._slider1.Dragbar.id,this.style.opacity="1",this.offsetHeight,S.a.run(function(){var e=C.a.common.getParentElementByName(t,"FF-Slider-CONTROL");e&&(e.unit=t.unit,e.init())}),this.isInitialized=!0}},{key:"update",value:function(e){this.selectedMaxValue===e.selectedMaxValue&&this.selectedMinValue===e.selectedMinValue&&!0!==this._forceUpdate||(this._forceUpdate=!1,this.absoluteMaxValue=e.absoluteMaxValue,this.absoluteMinValue=e.absoluteMinValue,this.isInitialized||this.init(e),this.selectedMinValue=Math.floor(isNaN(e.selectedMinValue)?e.absoluteMinValue:e.selectedMinValue),this.selectedMaxValue=Math.ceil(isNaN(e.selectedMaxValue)?e.absoluteMaxValue:e.selectedMaxValue),this.renderSlider())}},{key:"renderSlider",value:function(){if(!0===this.isInitialized&&!1===this.dragging){var e=this.$.ffSliderBar.clientWidth,t=this._slider1.barWd||this.$.slider1.clientWidth,n=this._slider2.barWd||this.$.slider2.clientWidth,i=Math.max(e-t,0),r=Math.max(e-n,0);this._slider1.Dragbar.maxX=i,this._slider1.Dragbar.origMaxX=i,this._slider1.maxX=i,this._slider2.Dragbar.maxX=r,this._slider2.Dragbar.origMaxX=r,this._slider2.maxX=r;var a=Math.max(Math.floor(i*Math.max(this.selectedMinValue-this.absoluteMinValue,0)/this.absoluteMaxValue)-1,0),o=Math.floor(r*Math.max(this.selectedMaxValue-this.absoluteMinValue,0)/(this.absoluteMaxValue-this.absoluteMinValue));this.$.slider1.style.left="".concat(a,"px"),this.$.slider2.style.left="".concat(o,"px")}}},{key:"_getCurrentValue",value:function(e){e<=0&&(e=1e-10);var t=this._slider2.barWd||this.$.slider2.clientWidth,n=Math.max(this.$.ffSliderBar.clientWidth-t,0);if(n<=e)return Math.ceil(this.absoluteMaxValue);var i=e/n,r=this.absoluteMaxValue-this.absoluteMinValue;return Math.floor(r*i)+Math.floor(this.absoluteMinValue)}},{key:"_moveSlider1",value:function(e,t){this.dragging=!0;var n={selectedMinValue:Math.floor(this._getCurrentValue(e)),selectedMaxValue:this.selectedMaxValue,slider:1};this.dispatchEvent(new CustomEvent("slider-moved",{detail:n}))}},{key:"_onMoveEnded1",value:function(e,t){this.dragging=!1,this.selectedMinValue=Math.floor(this._getCurrentValue(e)),"false"!==this.getAttribute("submit-on-release")&&this.submit()}},{key:"_selectedMinChanged",value:function(e,t){e<Math.floor(this.absoluteMinValue)?this.selectedMinValue=Math.floor(this.absoluteMinValue)||t:e>=this.selectedMaxValue&&(this.selectedMinValue=Math.floor(this.selectedMaxValue)),this.update(this.getSliderData());var n={selectedMinValue:this.selectedMinValue,selectedMaxValue:this.selectedMaxValue,slider:1};this.dispatchEvent(new CustomEvent("value-changed",{detail:n}))}},{key:"_moveSlider2",value:function(e,t){this.dragging=!0;var n={selectedMinValue:this.selectedMinValue,selectedMaxValue:this.selectedMaxValue,slider:2};this.dispatchEvent(new CustomEvent("slider-moved",{detail:n}))}},{key:"_onMoveEnded2",value:function(e,t){this.dragging=!1,this.selectedMaxValue=this._getCurrentValue(e),"false"!==this.getAttribute("submit-on-release")&&this.submit()}},{key:"_selectedMaxChanged",value:function(e,t){e<=this.selectedMinValue?this.selectedMaxValue=Math.ceil(this.selectedMinValue):e>Math.ceil(this.absoluteMaxValue)&&(this.selectedMaxValue=Math.ceil(this.absoluteMaxValue)||t),this.update(this.getSliderData());var n={selectedMinValue:this.selectedMinValue,selectedMaxValue:this.selectedMaxValue,slider:2};this.dispatchEvent(new CustomEvent("value-changed",{detail:n}))}},{key:"submit",value:function(){var e=C.a.communication.FFCommunicationEventAggregator.currentSearchResult;if(e){var t=e.searchParams;t=t.split("?")[1];var n=C.a.common.getParentElementByName(this,U.is);if(n){var i=n.group.elements[0].associatedFieldName,r=C.a.common.parameterStringToDict(t,!1);this.selectedMinValue<=this.absoluteMinValue&&this.selectedMaxValue>=this.absoluteMaxValue?C.a.communication.FFCommunicationEventAggregator.addFFEvent({type:"filter",groupName:n.group.name,removeAll:!0}):(r["filter".concat(i)]&&delete r["filter".concat(i)],r["filter".concat(C.a.common.fixedEncodeURIComponent(i))]="".concat(this.selectedMinValue,"-").concat(this.selectedMaxValue),r.type="search",C.a.communication.FFCommunicationEventAggregator.addFFEvent(C.a.common.decodeDict(r)))}else C.a.common.Logger.debug("ff-slider: no asn-group available, search is not exectued")}else C.a.common.Logger.debug("ff-slider: no search result available, cant submit slider filter data")}}]),t}(Object(b.a)(["RemoveUnresolvedAttribute"],v.a));function M(){var e=r()(['<style>:host{display:block;opacity:0;transition:opacity .8s;padding:10px 0 10px 0}#ffSliderSection{margin-top:10px;@apply(--ff-slider-section);}</style><div id="ffSliderSection"><slot></slot><slot name="sliderControls"></slot></div>']);return M=function(){return e},e}window.customElements.define(F.is,F);var D=function(e){function t(){var e;return o()(this,t),(e=c()(this,u()(t).call(this))).inputMin=null,e.inputMax=null,e.slider=null,e._renderer=null,e}return g()(t,e),m()(t,null,[{key:"is",get:function(){return"ff-slider-control"}},{key:"properties",get:function(){return{submitOnInput:{type:String,value:"false"},unit:{type:String},group:{type:Object,observer:"_groupChanged"}}}},{key:"template",get:function(){return Object(v.b)(M())}}]),m()(t,[{key:"getInputMin",value:function(){return this.inputMin=this.querySelector("[data-control='1']")||this.root.querySelector("[data-control='1']"),this.inputMin||console.log("<ff-slider-control>: could not retrieve <input data-control='1'>, make sure you don't remove it from the DOM"),this.inputMin}},{key:"getInputMax",value:function(){return this.inputMax=this.querySelector("[data-control='2']")||this.root.querySelector("[data-control='2']"),this.inputMax||console.log("<ff-slider-control>: could not retrieve <input data-control='2'>, make sure you don't remove it from the DOM"),this.inputMax}},{key:"init",value:function(){var e=this;this._renderer=new C.a.html.TemplateRenderer,this.inputMin=this.getInputMin(),this.inputMax=this.getInputMax(),this.slider=this.querySelector(F.is),this.slider||(this.slider=this.root.querySelector(F.is)),this.slider.addEventListener("slider-moved",this._valueChanged.bind(this)),this.slider.addEventListener("value-changed",this._valueChanged.bind(this)),this.inputMin.value=this.addUnit(Math.round(this.slider.selectedMinValue)),this.inputMax.value=this.addUnit(Math.round(this.slider.selectedMaxValue)),"true"===this.submitOnInput?this._initInputSubmit():this._disableFocusInput(),S.a.run(function(){return e.style.opacity="1"})}},{key:"_groupChanged",value:function(e){var t=this;e&&S.b.run(function(){if(t.inputMax){t.slider&&void 0!==t.slider.selectedMaxValue&&(t.inputMax.value=t.addUnit(Math.round(t.slider.selectedMaxValue)));for(var e=t.inputMax.attributes,n=0;n<e.length;n++){var i=e[n];i.value=t._renderer.render(i.value,{group:t.group})}}if(t.inputMin){t.slider&&void 0!==t.slider.selectedMinValue&&(t.inputMin.value=t.addUnit(Math.round(t.slider.selectedMinValue)));for(var r=t.inputMin.attributes,a=0;a<r.length;a++){var o=r[a];o.value=t._renderer.render(o.value,{group:t.group})}}},1)}},{key:"_disableFocusInput",value:function(){var e=this.inputMax;e.onfocus=C.a.common.concatFunctions(e.onfocus,function(){return e.blur()});var t=this.inputMin;t.onfocus=C.a.common.concatFunctions(t.onfocus,function(){return t.blur()})}},{key:"_submitInputMin",value:function(){var e=this.removeUnit(this.inputMin.value);isNaN(e)&&(e=this.slider.selectedMinValue);var t=e%this.slider.stepSize;e-=t,.5<=t/this.slider.stepSize&&(e+=this.slider.stepSize),e=Math.max(this.slider.absoluteMinValue,e),e=Math.min(this.slider.selectedMaxValue,e),this.slider.selectedMinValue=e,this.slider._forceUpdate=!0,this.inputMin.value=this.addUnit(Math.round(e)),this.inputMin.blur(),"true"===this.submitOnInput&&this.slider.submit()}},{key:"_submitInputMax",value:function(){var e=this.removeUnit(this.inputMax.value);isNaN(e)&&(e=this.slider.selectedMaxValue);var t=e%this.slider.stepSize;e-=t,.5<=t/this.slider.stepSize&&(e+=this.slider.stepSize),e=Math.min(this.slider.absoluteMaxValue,e),e=Math.max(this.slider.selectedMinValue,e),this.slider.selectedMaxValue=e,this.slider._forceUpdate=!0,this.inputMax.value=this.addUnit(Math.round(e)),this.inputMax.blur(),"true"===this.submitOnInput&&this.slider.submit()}},{key:"_initInputSubmit",value:function(){var e=this;this.inputMin.onkeypress=function(t){if(13===((t=window.event||t).keyCode||t.which))return e._submitInputMin(),!1},this.inputMax.onkeypress=function(t){if(13===((t=window.event||t).keyCode||t.which))return e._submitInputMax(),!1}}},{key:"addUnit",value:function(e){var t=C.a.communication.globalCommunicationParameter,n=this.group.elements.concat(this.group.selectedElements),i=n[0]&&C.a.communication.fieldRoles&&n[0].associatedFieldName===C.a.communication.fieldRoles.price,r=t.currencyCode&&t.currencyCountryCode;return i&&r?e.toLocaleString(t.currencyCountryCode,{style:"currency",currency:t.currencyCode}):(this.group.unit&&(e+=" ".concat(this.group.unit)),e)}},{key:"removeUnit",value:function(e){var t=e.replace(this.unit,"").replace(",","."),n=t.lastIndexOf("."),i=t.indexOf(".");if(n===i)return parseFloat(t);var r=t.slice(0,i)+t.slice(i+1);return this.removeUnit(r)}},{key:"_valueChanged",value:function(e){var t=e.detail;if(1===t.slider)this.inputMin.value=this.addUnit(Math.round(t.selectedMinValue));else{if(2!==t.slider)throw"Unexpected slider: ".concat(t.slider);this.inputMax.value=this.addUnit(Math.round(t.selectedMaxValue))}}}]),t}(Object(b.a)(["RemoveUnresolvedAttribute"],v.a));function N(){var e=r()(['<style>:host{opacity:0;transition:opacity .4s;outline:0;display:block;min-width:180px;max-width:220px}:host-context([align=horizontal]) #wrapper{position:absolute;width:100%}.container{position:relative}.ff-asn-group-container{@apply(--ff-asn-group-container);}#wrapper{position:relative;transition-duration:.4s;@apply(--all-links-container);}</style>\x3c!--group caption--\x3e<slot name="groupCaption"></slot>\x3c!--filter links--\x3e<div class="container ff-asn-group-container"><div opened id="wrapper"><slot></slot></div></div>']);return N=function(){return e},e}window.customElements.define(D.is,D);var U=function(e){function t(){var e;return o()(this,t),(e=c()(this,u()(t).call(this)))._ffCommunication=C.a.communication.FFCommunicationEventAggregator,e.selectorWrapper="#wrapper",e.selectorGroupCaptionContainer='[slot="groupCaption"]',e.selectRemoveFilterContainer='[data-container="removeFilter"]',e._renderer=new C.a.html.TemplateRenderer,e}return g()(t,e),m()(t,null,[{key:"is",get:function(){return"ff-asn-group-slider"}},{key:"properties",get:function(){return{collapsible:{type:"String",value:!0},opened:{type:Boolean,reflectToAttribute:!0},forGroup:{type:String,reflectToAttribute:!0},filterStyle:{type:"String",readOnly:!0,value:"SLIDER",reflectToAttribute:!0},disableAutoExpand:{type:Boolean,reflectToAttribute:!0},group:{type:Object,observer:"_asnGroupChanged"}}}},{key:"template",get:function(){return Object(v.b)(N())}}]),m()(t,[{key:"_isGroupSelected",value:function(e){if(e&&e.elements[0]){var t=e.elements[0];return!(t.selectedMaxValue===t.absoluteMaxValue&&t.selectedMinValue===t.absoluteMinValue)}return!1}},{key:"connectedCallback",value:function(){h()(u()(t.prototype),"connectedCallback",this).call(this),this._init()}},{key:"_init",value:function(){!0!==this.__isInitialized__&&(this._wrapper=this.shadowRoot.querySelector(this.selectorWrapper),this._initGroupCaption(),this._initRemoveFilter(),this._updateSliderControls(),this.opened?this.show():this.hide(!1),this.__isInitialized__=!0)}},{key:"_updateSliderControls",value:function(){var e=this;this.querySelectorAll(D.is).forEach(function(t){return t.group=e.group})}},{key:"_hideGroup",value:function(){this.style.display="none",this.offsetHeight,this.style.opacity="0"}},{key:"_processAndRenderGroup",value:function(e){this.forGroup=e.name;var n=e.elements[0];if("number"!=typeof n.absoluteMinValue||"number"!=typeof n.absoluteMaxValue)return C.a.common.Logger.warn("[".concat(t.is,"]: absoluteMinValue and absoluteMaxValue must be numbers but are:"),n.absoluteMinValue,n.absoluteMaxValue),void this._hideGroup();if(n.absoluteMinValue!==n.absoluteMaxValue){var i;n.selectedMinValue<n.absoluteMinValue&&(n.absoluteMinValue=n.selectedMinValue),n.selectedMaxValue>n.absoluteMaxValue&&(n.absoluteMaxValue=n.selectedMaxValue),this._updateSliderControls();try{this._processGroupCaption(),this._processRemoveFilter(e),i=e.elements[0];var r=this.querySelector(F.is);r=r||this.shadowRoot.querySelector(F.is),S.a.run(function(){r&&(r.unit=e.unit,r.update(i))}),this.style.display="",this.offsetHeight,this._isGroupSelected(e)&&!0!==this.opened&&!this.disableAutoExpand&&this.show(),this.dispatchEvent(new CustomEvent("records-updated",{bubbles:!0,composed:!0})),this.style.opacity="1",this.offsetHeight}catch(e){C.a.common.Logger.error("Unexpected error in slider group: ".concat(e))}}else this._hideGroup()}},{key:"_asnGroupChanged",value:function(e){var t=this;e?!0===C.a.communication.globalCommunicationParameter.asyncFacets?Object(_.a)(this,function(){return t._processAndRenderGroup(e)}):this._processAndRenderGroup(e):(e=C.a.communication.AsnGroup,this._hideGroup())}},{key:"_processGroupCaption",value:function(){this._groupCaptionContainer.innerHTML=this._renderer.render(this._groupCaptionTemplate,{group:this.group})}},{key:"_processShowMore",value:function(){var e=this._showMoreContainer;e&&(this.group.detailedLinks<this.group.selectedElements.length+this.group.elements.length?(e.innerHTML=this._renderer.render(e.innerHTML,{group:this.group}),e.style.display=""):e.style.display="none")}},{key:"_processShowLess",value:function(){var e=this._showLessContainer;e&&(this.group.detailedLinks<this.group.selectedElements.length+this.group.elements.length?(e.innerHTML=this._renderer.render(e.innerHTML,this.group),e.style.display=""):e.style.display="none")}},{key:"_initGroupCaption",value:function(){var e=this;if(this._groupCaptionContainer=this.querySelector(this.selectorGroupCaptionContainer),!this._groupCaptionContainer){var t=document.createElement("div");t.innerHTML="<div data-container='groupCaption' class='cursor'>\n                                <div class='groupCaption'> {{group.name}}</div>\n                              </div>",this._groupCaptionContainer=t.firstElementChild,this.appendChild(this._groupCaptionContainer),Object(y.b)()}"true"===String(this.collapsible)&&this.bind(this.selectorGroupCaptionContainer,function(){return e.toggle()}),this._groupCaptionTemplate=this._groupCaptionContainer.innerHTML}},{key:"_initRemoveFilter",value:function(){var e=this;this._removeFilterContainer=this.querySelector(this.selectRemoveFilterContainer),this._removeFilterContainer&&this.bind(this.selectRemoveFilterContainer,function(){e._ffCommunication.addFFEvent({type:"filter",groupName:e.group.name,removeAll:!0})})}},{key:"_processRemoveFilter",value:function(e){if(this._removeFilterContainer){var t=e.elements[0];this._removeFilterContainer.style.display=t.selected?"inline":"none"}}},{key:"toggle",value:function(e){var t=this;"false"!==this.collapsible&&(this._wrapper&&this._wrapper.hasAttribute("opened")?this._toggle(this._wrapper,e,function(){return t.opened=!1}):(this._toggle(this._wrapper,e),this.opened=!0))}},{key:"show",value:function(e){"false"!==this.collapsible&&(this._show(this._wrapper,e),this.opened=!0)}},{key:"hide",value:function(e){var t=this;"false"!==this.collapsible&&!1!==this.opened&&(!0!==e?(this._hide(this._wrapper,e),this.opened=!1):this._hide(this._wrapper,e,function(){return t.opened=!1}))}},{key:"clone",value:function(){var e=document.createElement(t.is);return C.a.common.copyHTMLAttributes(this,e),e.innerHTML=this.innerHTML,Object(y.b)(),e.ready(),e}}]),t}(Object(b.a)(["BindAction","CollapseElement"],v.a));function j(){var e=r()(["<style>:host{outline:0;transition:opacity .6s;display:block}:host([align=horizontal]){display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex}</style><slot></slot>"]);return j=function(){return e},e}window.customElements.define(U.is,U),n.d(t,"Asn",function(){return H});var H=function(e){function t(){var e;return o()(this,t),(e=c()(this,u()(t).call(this)))._asnGroupHTMLTags={},e.attributeName="display",e.stateTwoValue="none",e.activateStateTwo(),e}return g()(t,e),m()(t,null,[{key:"is",get:function(){return"ff-asn"}},{key:"properties",get:function(){return{align:{type:String,value:"vertical",reflectToAttribute:!0},asnGroups:{value:[],notify:!0}}}},{key:"template",get:function(){return Object(v.b)(j())}}]),m()(t,[{key:"ready",value:function(){var e=this;h()(u()(t.prototype),"ready",this).call(this);try{if(this.querySelectorAll("".concat(O.is,",").concat(U.is)).forEach(function(t){try{var n=t.parentNode,i=t.getAttribute("for-group"),r=t.getAttribute("filter-style");i&&"all"!==i.toLowerCase()?e._asnGroupHTMLTags[i]=t:r?e._asnGroupHTMLTags[r]=t:"FF-ASN-GROUP-SLIDER"===t.tagName?e._asnGroupHTMLTags.SLIDER=t:e._asnGroupHTMLTags.all||(e._asnGroupHTMLTags.all=t),t._init&&t._init(),n.removeChild(t),Object(y.b)()}catch(t){C.a.common.Logger.error("Unexpected error: "+t)}}),Object(y.b)(),!this._asnGroupHTMLTags.all){var n=document.createElement("div");n.innerHTML="<ff-asn-group>\n                                    <ff-asn-group-element>\n                                        <div slot='selected'>\n                                            <span>{{element.name}}</span>\n                                        </div>\n                                        <div slot='unselected'>\n                                            <span>{{element.name}}</span>\n                                        </div>\n                                    </ff-asn-group-element>\n                                </ff-asn-group>",this._asnGroupHTMLTags.all=n.firstElementChild,n.removeChild(this._asnGroupHTMLTags.all)}if(!this._asnGroupHTMLTags.SLIDER){var i=document.createElement(U.is);i.innerHTML="<div slot='groupCaption' class='groupCaption'>{{group.name}}\n                                    <span class='filterArrowDown'>&nbsp</span>\n                                </div>\n                                <ff-slider-control submit-on-input='true'>\n                                    <div style='display: flex;justify-content: space-between'>\n                                        <input data-control='1' style='width: 60px;left: 15px;'>\n                                        <input data-control='2' style='width: 60px;right: 15px;'></div>\n                                    <ff-slider step-size='1' current-min-value='0' style='width: 150px;'>\n                                    </ff-slider>\n                                </ff-slider-control>",Object(y.b)(),i.setAttribute("filter-style","SLIDER"),i.connectedCallback(),this._asnGroupHTMLTags.SLIDER=i}}catch(n){console.log(n)}}},{key:"connectedCallback",value:function(){h()(u()(t.prototype),"connectedCallback",this).call(this),this.subscribtionKey||(this.subscribtionKey=C.a.communication.ResultDispatcher.subscribe("asn",this._groupsChanged,this))}},{key:"disconnectedCallback",value:function(){h()(u()(t.prototype),"disconnectedCallback",this).call(this),this.subscribtionKey&&(C.a.communication.ResultDispatcher.unsubscribe("asn",this.subscribtionKey),this.subscribtionKey=null)}},{key:"_groupsChanged",value:function(e,t){var n=this;if(e&&0<e.length){var i={};this.querySelectorAll("".concat(O.is,",").concat(U.is)).forEach(function(e){e.parentNode.removeChild(e)}),Object(y.b)(),e.forEach(function(e){i[e.name]=!0;var t=n._asnGroupHTMLTags[e.name];if(!t){var r=e.filterStyle?e.filterStyle.toUpperCase():"";n._asnGroupHTMLTags[r]&&(t=n._asnGroupHTMLTags[r].clone()),t&&(n._asnGroupHTMLTags[e.name]=t)}t||(t=n._asnGroupHTMLTags.all.clone(),n._asnGroupHTMLTags[e.name]=t),t.parentNode||(n.appendChild(t),Object(y.b)()),t.group=e});for(var r=this.querySelectorAll("".concat(O.is,",").concat(U.is)),a=0;a<r.length;a++){var o=r[a],s=!1;if(o.group){var c=o.group.name;for(var l in i)if(l===c){s=!0;break}}!1===s&&o.delete("group")}Object(y.b)(),this.activateStateOne(),Object(_.a)(this,function(){this.dispatchEvent(new CustomEvent("dom-updated",{bubbles:!0,composed:!0}))})}else this.activateStateTwo()}}]),t}(Object(b.a)(["CssAttributeToggle","RemoveUnresolvedAttribute"],v.a));window.customElements.define(H.is,H)},function(e,t,n){"use strict";n.r(t);var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(4),h=n.n(d),p=n(2),m=n.n(p),f=n(6),g=n.n(f),v=n(13),y=n.n(v),_=n(7),b=n(14),C=n(10),k=(n(18),n(33)),S=n(19),w=n.n(S),P=n(21);function E(e,t,n,i,r){var a;r&&(a="object"===w()(n)&&null!==n)&&(i=e.__dataTemp[t]);var o=i!==n&&(i==i||n==n);return a&&o&&(e.__dataTemp[t]=n),o}var T=Object(P.a)(function(e){return function(e){function t(){return o()(this,t),c()(this,u()(t).apply(this,arguments))}return g()(t,e),m()(t,[{key:"_shouldPropertyChange",value:function(e,t,n){return E(this,e,t,n,!0)}}]),t}(e)}),O=Object(P.a)(function(e){return function(e){function t(){return o()(this,t),c()(this,u()(t).apply(this,arguments))}return g()(t,e),m()(t,[{key:"_shouldPropertyChange",value:function(e,t,n){return E(this,e,t,n,this.mutableData)}}],[{key:"properties",get:function(){return{mutableData:Boolean}}}]),t}(e)});T._mutablePropertyChange=E;var A=null;function L(){return A}L.prototype=Object.create(HTMLTemplateElement.prototype,{constructor:{value:L,writable:!0}});var x=Object(k.a)(L),R=T(x),I=function(e){function t(e){var n;o()(this,t),(n=c()(this,u()(t).call(this)))._configureProperties(e),n.root=n._stampTemplate(n.__dataHost);for(var i=n.children=[],r=n.root.firstChild;r;r=r.nextSibling)i.push(r),r.__templatizeInstance=y()(y()(n));n.__templatizeOwner&&n.__templatizeOwner.__hideTemplateChildren__&&n._showHideChildren(!0);var a=n.__templatizeOptions;return(e&&a.instanceProps||!a.instanceProps)&&n._enableProperties(),n}return g()(t,e),m()(t,[{key:"_configureProperties",value:function(e){if(this.__templatizeOptions.forwardHostProp)for(var t in this.__hostProps)this._setPendingProperty(t,this.__dataHost["_host_"+t]);for(var n in e)this._setPendingProperty(n,e[n])}},{key:"forwardHostProp",value:function(e,t){this._setPendingPropertyOrPath(e,t,!1,!0)&&this.__dataHost._enqueueClient(this)}},{key:"_addEventListenerToNode",value:function(e,t,n){var i=this;if(this._methodHost&&this.__templatizeOptions.parentModel)this._methodHost._addEventListenerToNode(e,t,function(e){e.model=i,n(e)});else{var r=this.__dataHost.__dataHost;r&&r._addEventListenerToNode(e,t,n)}}},{key:"_showHideChildren",value:function(e){for(var t=this.children,n=0;n<t.length;n++){var i=t[n];if(Boolean(e)!=Boolean(i.__hideTemplateChildren__))if(i.nodeType===Node.TEXT_NODE)i.textContent=e?(i.__polymerTextContent__=i.textContent,""):i.__polymerTextContent__;else if("slot"===i.localName)if(e)i.__polymerReplaced__=document.createComment("hidden-slot"),i.parentNode.replaceChild(i.__polymerReplaced__,i);else{var r=i.__polymerReplaced__;r&&r.parentNode.replaceChild(i,r)}else i.style&&(i.style.display=e?(i.__polymerDisplay__=i.style.display,"none"):i.__polymerDisplay__);i.__hideTemplateChildren__=e,i._showHideChildren&&i._showHideChildren(e)}}},{key:"_setUnmanagedPropertyToNode",value:function(e,n,i){e.__hideTemplateChildren__&&e.nodeType==Node.TEXT_NODE&&"textContent"==n?e.__polymerTextContent__=i:h()(u()(t.prototype),"_setUnmanagedPropertyToNode",this).call(this,e,n,i)}},{key:"dispatchEvent",value:function(e){return!0}},{key:"parentModel",get:function(){var e=this.__parentModel;if(!e){var t;for(e=this;(t=(e=e.__dataHost.__dataHost).__templatizeOptions)&&!t.parentModel;);this.__parentModel=e}return e}}]),t}(Object(k.a)(function e(){o()(this,e)}));I.prototype.__dataHost,I.prototype.__templatizeOptions,I.prototype._methodHost,I.prototype.__templatizeOwner,I.prototype.__hostProps;var F=T(I);function M(e,t){return function(e,n,i){t.call(e.__templatizeOwner,n.substring("_host_".length),i[n])}}function D(e,t){return function(e,n,i){t.call(e.__templatizeOwner,e,n,i[n])}}var N=n(20),U=n(11),j=n(16),H=function(e){function t(){var e;return o()(this,t),(e=c()(this,u()(t).call(this))).__instances=[],e.__limit=1/0,e.__pool=[],e.__renderDebouncer=null,e.__itemsIdxToInstIdx={},e.__chunkCount=null,e.__lastChunkTime=null,e.__sortFn=null,e.__filterFn=null,e.__observePaths=null,e.__ctor=null,e.__isDetached=!0,e.template=null,e}return g()(t,e),m()(t,null,[{key:"is",get:function(){return"dom-repeat"}},{key:"template",get:function(){return null}},{key:"properties",get:function(){return{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},itemsIndexAs:{type:String,value:"itemsIndex"},sort:{type:Function,observer:"__sortChanged"},filter:{type:Function,observer:"__filterChanged"},observe:{type:String,observer:"__observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!0,readOnly:!0},initialCount:{type:Number,observer:"__initializeChunking"},targetFramerate:{type:Number,value:20},_targetFrameTime:{type:Number,computed:"__computeFrameTime(targetFramerate)"}}}},{key:"observers",get:function(){return["__itemsChanged(items.*)"]}}]),m()(t,[{key:"disconnectedCallback",value:function(){h()(u()(t.prototype),"disconnectedCallback",this).call(this),this.__isDetached=!0;for(var e=0;e<this.__instances.length;e++)this.__detachInstance(e)}},{key:"connectedCallback",value:function(){if(h()(u()(t.prototype),"connectedCallback",this).call(this),this.style.display="none",this.__isDetached){this.__isDetached=!1;for(var e=this.parentNode,n=0;n<this.__instances.length;n++)this.__attachInstance(n,e)}}},{key:"__ensureTemplatized",value:function(){var e=this;if(!this.__ctor){var t=this.template=this.querySelector("template");if(!t){var n=new MutationObserver(function(){if(!e.querySelector("template"))throw new Error("dom-repeat requires a <template> child");n.disconnect(),e.__render()});return n.observe(this,{childList:!0}),!1}var i={};i[this.as]=!0,i[this.indexAs]=!0,i[this.itemsIndexAs]=!0,this.__ctor=function(e,t,n){if(n=n||{},e.__templatizeOwner)throw new Error("A <template> can only be templatized once");var i=((e.__templatizeOwner=t)?t.constructor:I)._parseTemplate(e),r=i.templatizeInstanceClass;r||(r=function(e,t,n){var i=function(e){function t(){return o()(this,t),c()(this,u()(t).apply(this,arguments))}return g()(t,e),t}(n.mutableData?F:I);return i.prototype.__templatizeOptions=n,i.prototype._bindTemplate(e),function(e,t,n,i){var r=n.hostProps||{};for(var a in i.instanceProps){delete r[a];var o=i.notifyInstanceProp;o&&e.prototype._addPropertyEffect(a,e.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:D(0,o)})}if(i.forwardHostProp&&t.__dataHost)for(var s in r)e.prototype._addPropertyEffect(s,e.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:function(e,t,n){e.__dataHost._setPendingPropertyOrPath("_host_"+t,n[t],!0,!0)}})}(i,e,t,n),i}(e,i,n),i.templatizeInstanceClass=r),function(e,t,n){var i,r,a=n.forwardHostProp;if(a){var s=t.templatizeTemplateClass;if(!s){var l=n.mutableData?R:x;s=t.templatizeTemplateClass=function(e){function t(){return o()(this,t),c()(this,u()(t).apply(this,arguments))}return g()(t,e),t}(l);var d=t.hostProps;for(var h in d)s.prototype._addPropertyEffect("_host_"+h,s.prototype.PROPERTY_EFFECT_TYPES.PROPAGATE,{fn:M(0,a)}),s.prototype._createNotifyingProperty("_host_"+h)}r=s,A=i=e,Object.setPrototypeOf(i,r.prototype),new r,A=null,e.__dataProto&&Object.assign(e.__data,e.__dataProto),e.__dataTemp={},e.__dataPending=null,e.__dataOld=null,e._enableProperties()}}(e,i,n);var a,s=function(e){function t(){return o()(this,t),c()(this,u()(t).apply(this,arguments))}return g()(t,e),t}(r);return s.prototype._methodHost=(a=e.__dataHost)&&a._methodHost||a,s.prototype.__dataHost=e,s.prototype.__templatizeOwner=t,s.prototype.__hostProps=i.hostProps,s}(t,this,{mutableData:this.mutableData,parentModel:!0,instanceProps:i,forwardHostProp:function(e,t){for(var n,i=this.__instances,r=0;r<i.length&&(n=i[r]);r++)n.forwardHostProp(e,t)},notifyInstanceProp:function(e,t,n){if(Object(j.e)(this.as,t)){var i=e[this.itemsIndexAs];t==this.as&&(this.items[i]=n);var r=Object(j.i)(this.as,"items."+i,t);this.notifyPath(r,n)}}})}return!0}},{key:"__getMethodHost",value:function(){return this.__dataHost._methodHost||this.__dataHost}},{key:"__functionFromPropertyValue",value:function(e){if("string"!=typeof e)return e;var t=e,n=this.__getMethodHost();return function(){return n[t].apply(n,arguments)}}},{key:"__sortChanged",value:function(e){this.__sortFn=this.__functionFromPropertyValue(e),this.items&&this.__debounceRender(this.__render)}},{key:"__filterChanged",value:function(e){this.__filterFn=this.__functionFromPropertyValue(e),this.items&&this.__debounceRender(this.__render)}},{key:"__computeFrameTime",value:function(e){return Math.ceil(1e3/e)}},{key:"__initializeChunking",value:function(){this.initialCount&&(this.__limit=this.initialCount,this.__chunkCount=this.initialCount,this.__lastChunkTime=performance.now())}},{key:"__tryRenderChunk",value:function(){this.items&&this.__limit<this.items.length&&this.__debounceRender(this.__requestRenderChunk)}},{key:"__requestRenderChunk",value:function(){var e=this;requestAnimationFrame(function(){return e.__renderChunk()})}},{key:"__renderChunk",value:function(){var e=performance.now(),t=this._targetFrameTime/(e-this.__lastChunkTime);this.__chunkCount=Math.round(this.__chunkCount*t)||1,this.__limit+=this.__chunkCount,this.__lastChunkTime=e,this.__debounceRender(this.__render)}},{key:"__observeChanged",value:function(){this.__observePaths=this.observe&&this.observe.replace(".*",".").split(" ")}},{key:"__itemsChanged",value:function(e){this.items&&!Array.isArray(this.items)&&console.warn("dom-repeat expected array for `items`, found",this.items),this.__handleItemPath(e.path,e.value)||(this.__initializeChunking(),this.__debounceRender(this.__render))}},{key:"__handleObservedPaths",value:function(e){if(this.__sortFn||this.__filterFn)if(e){if(this.__observePaths)for(var t=this.__observePaths,n=0;n<t.length;n++)0===e.indexOf(t[n])&&this.__debounceRender(this.__render,this.delay)}else this.__debounceRender(this.__render,this.delay)}},{key:"__debounceRender",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;this.__renderDebouncer=N.a.debounce(this.__renderDebouncer,0<t?C.b.after(t):C.a,e.bind(this)),Object(U.a)(this.__renderDebouncer)}},{key:"render",value:function(){this.__debounceRender(this.__render),Object(U.b)()}},{key:"__render",value:function(){this.__ensureTemplatized()&&(this.__applyFullRefresh(),this.__pool.length=0,this._setRenderedItemCount(this.__instances.length),this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0})),this.__tryRenderChunk())}},{key:"__applyFullRefresh",value:function(){for(var e=this,t=this.items||[],n=new Array(t.length),i=0;i<t.length;i++)n[i]=i;this.__filterFn&&(n=n.filter(function(n,i,r){return e.__filterFn(t[n],i,r)})),this.__sortFn&&n.sort(function(n,i){return e.__sortFn(t[n],t[i])});for(var r=this.__itemsIdxToInstIdx={},a=0,o=Math.min(n.length,this.__limit);a<o;a++){var s=this.__instances[a],c=n[a],l=t[c];r[c]=a,s?(s._setPendingProperty(this.as,l),s._setPendingProperty(this.indexAs,a),s._setPendingProperty(this.itemsIndexAs,c),s._flushProperties()):this.__insertInstance(l,a,c)}for(var u=this.__instances.length-1;a<=u;u--)this.__detachAndRemoveInstance(u)}},{key:"__detachInstance",value:function(e){for(var t=this.__instances[e],n=0;n<t.children.length;n++){var i=t.children[n];t.root.appendChild(i)}return t}},{key:"__attachInstance",value:function(e,t){var n=this.__instances[e];t.insertBefore(n.root,this)}},{key:"__detachAndRemoveInstance",value:function(e){var t=this.__detachInstance(e);t&&this.__pool.push(t),this.__instances.splice(e,1)}},{key:"__stampInstance",value:function(e,t,n){var i={};return i[this.as]=e,i[this.indexAs]=t,i[this.itemsIndexAs]=n,new this.__ctor(i)}},{key:"__insertInstance",value:function(e,t,n){var i=this.__pool.pop();i?(i._setPendingProperty(this.as,e),i._setPendingProperty(this.indexAs,t),i._setPendingProperty(this.itemsIndexAs,n),i._flushProperties()):i=this.__stampInstance(e,t,n);var r=this.__instances[t+1],a=r?r.children[0]:this;return this.parentNode.insertBefore(i.root,a),this.__instances[t]=i}},{key:"_showHideChildren",value:function(e){for(var t=0;t<this.__instances.length;t++)this.__instances[t]._showHideChildren(e)}},{key:"__handleItemPath",value:function(e,t){var n=e.slice(6),i=n.indexOf("."),r=i<0?n:n.substring(0,i);if(r==parseInt(r,10)){var a=i<0?"":n.substring(i+1);this.__handleObservedPaths(a);var o=this.__itemsIdxToInstIdx[r],s=this.__instances[o];if(s){var c=this.as+(a?"."+a:"");s._setPendingPropertyOrPath(c,t,!1,!0),s._flushProperties()}return!0}}},{key:"itemForElement",value:function(e){var t=this.modelForElement(e);return t&&t[this.as]}},{key:"indexForElement",value:function(e){var t=this.modelForElement(e);return t&&t[this.indexAs]}},{key:"modelForElement",value:function(e){return function(e,t){for(var n;t;)if(n=t.__templatizeInstance){if(n.__dataHost==e)return n;t=n.__dataHost}else t=t.parentNode;return null}(this.template,e)}}]),t}(O(_.a));customElements.define(H.is,H),n(23);var B=n(0),q=n(9),V=n(15),z=n(12);function K(){var e=r()(['<a href="[[element.__TARGET_URL__.url]]">{{element.name}}</a>']);return K=function(){return e},e}var W=function(e){function t(){return o()(this,t),c()(this,u()(t).apply(this,arguments))}return g()(t,e),m()(t,[{key:"connectedCallback",value:function(){h()(u()(t.prototype),"connectedCallback",this).call(this),z.addListener(this,"tap",this.search.bind(this))}},{key:"disconnectedCallback",value:function(){h()(u()(t.prototype),"disconnectedCallback",this).call(this),z.removeListener(this,"tap",this.search.bind(this))}},{key:"search",value:function(e){e.preventDefault();var t=this.element;t.__TARGET_URL__&&t.__TARGET_URL__.isCustomized?window.location.href=t.__TARGET_URL__.url:this.dispatchEvent(new CustomEvent("nav-search",{bubbles:!0,composed:!0,detail:t}))}}],[{key:"properties",get:function(){return{element:{type:Object}}}},{key:"template",get:function(){return Object(_.b)(K())}}]),t}(Object(V.a)(_.a));function G(){var e=r()(['<style>#wrapper{@apply(--wrapper);position:relative}#header{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;@apply(--header);}#header:hover{@apply(--header-hover);}.hidden{display:none!important}.nav-item{-webkit-box-flex:1;-ms-flex:1;flex:1;@apply(--nav-item);}.nav-item:hover{@apply(--nav-item-hover);}.nav-item-seperator{@apply(--nav-item-seperator);}#container{display:-webkit-box;display:-ms-flexbox;display:flex;flex-direction:column;position:absolute;z-index:1;width:inherit;left:0;right:0;background-color:#fff;@apply(--container);}#container-top{@apply(--container-top);}#container-middle{flex-direction:row;@apply(--container-middle);}#container-left{@apply(--container-left);}#container-center{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;@apply(--container-center);}#container-right{@apply(--container-right);}#container-bottom{@apply(--container-bottom);}.nav-group{-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;-ms-flex-negative:0;flex-shrink:0;-ms-flex-preferred-size:300px;flex-basis:300px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;@apply(--nav-group);}.nav-group:hover{@apply(--nav-group-hover);}.nav-group-caption{@apply(--nav-group-caption);}.nav-group-caption:hover{@apply(--nav-group-caption-hover);}.nav-link{@apply(--nav-link);}.nav-link:hover{@apply(--nav-link-hover);}</style><div id="wrapper" on-mouseleave="onHoverEnd" on-mouseenter="onHoverAll"><div id="header"><div class="nav-item-seperator"></div><template is="dom-repeat" items="{{elements}}" as="header"><ff-nav-element element="{{header}}" class="nav-item" on-mouseenter="onHovered"></ff-nav-element><div class="nav-item-seperator"></div></template></div><div id="container" class="hidden"><div id="container-top"><slot name$="container-top-{{selectedElement.name}}"></slot></div><div id="container-middle"><div id="container-left"><slot name$="container-left-{{selectedElement.name}}"></slot></div><div id="container-center"><template id="grouploop" is="dom-repeat" items="{{getGroups(selectedElement.groups)}}" as="group"><div class="nav-group"><ff-nav-element class="nav-group-caption" element="{{group}}"></ff-nav-element><template is="dom-repeat" items="{{getLinks(group.links)}}" as="link"><ff-nav-element class="nav-link" element="{{link}}"></ff-nav-element></template><slot name$="{{group.name}}"></slot></div></template></div><div id="container-right"><slot name$="container-right-{{selectedElement.name}}"></slot></div></div><div id="container-bottom"><slot name$="container-bottom-{{selectedElement.name}}"></slot></div></div></div>']);return G=function(){return e},e}window.customElements.define("ff-nav-element",W),n.d(t,"HeaderNavigation",function(){return Y});var Y=function(e){function t(){var e;return o()(this,t),(e=c()(this,u()(t).call(this)))._ffCommunication=B.a.communication.FFCommunicationEventAggregator,e.addEventListener("nav-search",e.catchSearchEvent.bind(y()(y()(e)))),e.subscribtionKey=B.a.communication.ResultDispatcher.subscribe("navigation",e._navigationChanged,y()(y()(e))),e}return g()(t,e),m()(t,null,[{key:"is",get:function(){return"ff-header-navigation"}},{key:"template",get:function(){return Object(_.b)(G())}}]),m()(t,[{key:"connectedCallback",value:function(){h()(u()(t.prototype),"connectedCallback",this).call(this),"false"!==this.fetchInitial&&this.fetch()}},{key:"disconnectedCallback",value:function(){h()(u()(t.prototype),"disconnectedCallback",this).call(this),B.a.communication.ResultDispatcher.unsubscribe(["navigation"],this.subscribtionKey)}},{key:"fetch",value:function(){var e=this,t={type:"navigation",firstFetch:3,fetchSize:1,maxFetch:3,fetchTime:10};setTimeout(function(){return e._ffCommunication.addFFEvent(t)})}},{key:"_navigationChanged",value:function(e){var t=this,n=e[0];n.forEach(function(e){var n=e.associatedFieldName+"/"+e.name,i=t._ffCommunication.navigationResult[n];e.groups=i.subelements,e.groups.forEach(function(e){var n=e.associatedFieldName+"/"+e.name,i=t._ffCommunication.navigationResult[n];e.links=i.subelements})}),this.elements=n,Object(b.a)(this,function(){t.dispatchEvent(new CustomEvent("dom-updated",{bubbles:!0,composed:!0}))})}},{key:"onHoverAll",value:function(){var e=this;this._setActive=!0,setTimeout(function(){!0===e._setActive&&e.$.container.classList.remove("hidden")},this.mouseenterDelay)}},{key:"onHovered",value:function(e){this.selectedElement=e.target.element}},{key:"onHoverEnd",value:function(){var e=this;this._setActive=!1,setTimeout(function(){!1===e._setActive&&e.$.container.classList.add("hidden")},this.mouseleaveDelay)}},{key:"getGroups",value:function(e){return"true"===this.hideEmptyGroups?e.filter(function(e){var n=0===e.links.length;return n&&B.a.common.Logger.log("[".concat(t.is,"]: The group '").concat(e.name,"' has no 3rd layer children and will not be shown. If you wish to display it nevertheless, set 'hide-empty-groups=\"false\"'")),!n}):e.slice(0,this.groupCount)}},{key:"getLinks",value:function(e){return e.slice(0,this.groupSize)}},{key:"catchSearchEvent",value:function(e){var t=this,n=e.detail;this.$.container.classList.add("hidden");var i=n.searchParams.split("?")[1],r=B.a.common.parameterStringToDict(i);r.type="navigation-search",C.a.run(function(){return t._ffCommunication.addFFEvent(r)})}}],[{key:"properties",get:function(){return{groupCount:{type:Number,value:10},groupSize:{type:Number,value:4},hideEmptyGroups:{type:String,value:"true"},fetchInitial:{type:String,value:"true"},mouseenterDelay:{type:Number,value:600},mouseleaveDelay:{type:Number,value:200}}}}]),t}(Object(q.a)(["RemoveUnresolvedAttribute"],_.a));window.customElements.define(Y.is,Y)},function(e,t,n){"use strict";n.r(t);var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(2),c=n.n(s),l=n(5),u=n.n(l),d=n(1),h=n.n(d),p=n(4),m=n.n(p),f=n(6),g=n.n(f),v=n(7),y=n(14);function _(e,t,n){return{index:e,removed:t,addedCount:n}}n(18);var b=0,C=1,k=2,S=3;function w(e,t){return e===t}var P=n(10);function E(e){return"slot"===e.localName}var T=function(){function e(t,n){var i=this;o()(this,e),this._shadyChildrenObserver=null,this._nativeChildrenObserver=null,this._connected=!1,this._target=t,this.callback=n,this._effectiveNodes=[],this._observer=null,this._scheduled=!1,this._boundSchedule=function(){i._schedule()},this.connect(),this._schedule()}return c()(e,null,[{key:"getFlattenedNodes",value:function(e){return E(e)?(e=e).assignedNodes({flatten:!0}):Array.from(e.childNodes).map(function(e){return E(e)?(e=e).assignedNodes({flatten:!0}):[e]}).reduce(function(e,t){return e.concat(t)},[])}}]),c()(e,[{key:"connect",value:function(){var e=this;E(this._target)?this._listenSlots([this._target]):this._target.children&&(this._listenSlots(this._target.children),window.ShadyDOM?this._shadyChildrenObserver=ShadyDOM.observeChildren(this._target,function(t){e._processMutations(t)}):(this._nativeChildrenObserver=new MutationObserver(function(t){e._processMutations(t)}),this._nativeChildrenObserver.observe(this._target,{childList:!0}))),this._connected=!0}},{key:"disconnect",value:function(){E(this._target)?this._unlistenSlots([this._target]):this._target.children&&(this._unlistenSlots(this._target.children),window.ShadyDOM&&this._shadyChildrenObserver?(ShadyDOM.unobserveChildren(this._shadyChildrenObserver),this._shadyChildrenObserver=null):this._nativeChildrenObserver&&(this._nativeChildrenObserver.disconnect(),this._nativeChildrenObserver=null)),this._connected=!1}},{key:"_schedule",value:function(){var e=this;this._scheduled||(this._scheduled=!0,P.a.run(function(){return e.flush()}))}},{key:"_processMutations",value:function(e){this._processSlotMutations(e),this.flush()}},{key:"_processSlotMutations",value:function(e){if(e)for(var t=0;t<e.length;t++){var n=e[t];n.addedNodes&&this._listenSlots(n.addedNodes),n.removedNodes&&this._unlistenSlots(n.removedNodes)}}},{key:"flush",value:function(){if(!this._connected)return!1;window.ShadyDOM&&ShadyDOM.flush(),this._nativeChildrenObserver?this._processSlotMutations(this._nativeChildrenObserver.takeRecords()):this._shadyChildrenObserver&&this._processSlotMutations(this._shadyChildrenObserver.takeRecords()),this._scheduled=!1;for(var e,t,n,i={target:this._target,addedNodes:[],removedNodes:[]},r=this.constructor.getFlattenedNodes(this._target),a=(e=r,t=this._effectiveNodes,function(e,t,n,i,r,a){var o,s=0,c=0,l=Math.min(n-t,a-r);if(0==t&&0==r&&(s=function(e,t,n){for(var i=0;i<n;i++)if(!w(e[i],t[i]))return i;return n}(e,i,l)),n==e.length&&a==i.length&&(c=function(e,t,n){for(var i=e.length,r=t.length,a=0;a<n&&w(e[--i],t[--r]);)a++;return a}(e,i,l-s)),r+=s,a-=c,(n-=c)-(t+=s)==0&&a-r==0)return[];if(t==n){for(o=_(t,[],0);r<a;)o.removed.push(i[r++]);return[o]}if(r==a)return[_(t,[],n-t)];var u=function(e){for(var t=e.length-1,n=e[0].length-1,i=e[t][n],r=[];0<t||0<n;)if(0!=t)if(0!=n){var a,o=e[t-1][n-1],s=e[t-1][n],c=e[t][n-1];(a=s<c?s<o?s:o:c<o?c:o)==o?(o==i?r.push(b):(r.push(C),i=o),t--,n--):i=a==s?(r.push(S),t--,s):(r.push(k),n--,c)}else r.push(S),t--;else r.push(k),n--;return r.reverse(),r}(function(e,t,n,i,r,a){for(var o=a-r+1,s=n-t+1,c=new Array(o),l=0;l<o;l++)c[l]=new Array(s),c[l][0]=l;for(var u=0;u<s;u++)c[0][u]=u;for(var d=1;d<o;d++)for(var h=1;h<s;h++)if(w(e[t+h-1],i[r+d-1]))c[d][h]=c[d-1][h-1];else{var p=c[d-1][h]+1,m=c[d][h-1]+1;c[d][h]=p<m?p:m}return c}(e,t,n,i,r,a));o=void 0;for(var d=[],h=t,p=r,m=0;m<u.length;m++)switch(u[m]){case b:o&&(d.push(o),o=void 0),h++,p++;break;case C:o||(o=_(h,[],0)),o.addedCount++,h++,o.removed.push(i[p]),p++;break;case k:o||(o=_(h,[],0)),o.addedCount++,h++;break;case S:o||(o=_(h,[],0)),o.removed.push(i[p]),p++}return o&&d.push(o),d}(e,0,e.length,t,0,t.length)),o=0;o<a.length&&(n=a[o]);o++)for(var s,c=0;c<n.removed.length&&(s=n.removed[c]);c++)i.removedNodes.push(s);for(var l,u=0;u<a.length&&(l=a[u]);u++)for(var d=l.index;d<l.index+l.addedCount;d++)i.addedNodes.push(r[d]);this._effectiveNodes=r;var h=!1;return(i.addedNodes.length||i.removedNodes.length)&&(h=!0,this.callback.call(this._target,i)),h}},{key:"_listenSlots",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];E(n)&&n.addEventListener("slotchange",this._boundSchedule)}}},{key:"_unlistenSlots",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];E(n)&&n.removeEventListener("slotchange",this._boundSchedule)}}}]),e}(),O=n(0),A=n(9),L=n(13),x=n.n(L),R=n(15),I=n(12);function F(){var e=r()(["<style>:host{transition:opacity .8s;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}</style><slot></slot>"]);return F=function(){return e},e}var M=function(e){function t(){var e;return o()(this,t),e=u()(this,h()(t).call(this)),I.addListener(x()(x()(e)),"tap",e._itemTaped.bind(x()(x()(e)))),e}return g()(t,e),c()(t,null,[{key:"properties",get:function(){return{type:{type:String,reflectToAttribute:!0},breadCrumbTrailItem:{type:Object,observer:"_breadCrumbTrailItemChanged"}}}},{key:"template",get:function(){return Object(v.b)(F())}}]),c()(t,[{key:"disconnectedCallback",value:function(){m()(h()(t.prototype),"disconnectedCallback",this).call(this),I.removeListener(this,"tap",this._itemTaped.bind(this))}},{key:"_itemTaped",value:function(){O.a.communication.FFCommunicationEventAggregator.addFFEvent({type:"bct",value:this.breadCrumbTrailItem.value})}},{key:"_breadCrumbTrailItemChanged",value:function(e,t){e&&(this.type=e.type),this.model=e}},{key:"clone",value:function(){this.updateTemplate();var e=document.createElement("ff-breadcrumb-trail-item");return O.a.common.copyHTMLAttributes(this,e),e.templateString=this.templateString,e}}]),t}(Object(A.a)(["LightDOMTemplate","RemoveUnresolvedAttribute"],Object(R.a)(v.a)));function D(){var e=r()(["<style>:host{display:inline}</style><slot></slot>"]);return D=function(){return e},e}window.customElements.define("ff-breadcrumb-trail-item",M),n.d(t,"BreadcrumbTrail",function(){return N});var N=function(e){function t(){return o()(this,t),u()(this,h()(t).apply(this,arguments))}return g()(t,e),c()(t,[{key:"connectedCallback",value:function(){m()(h()(t.prototype),"connectedCallback",this).call(this),this.subscribtionKey=O.a.communication.ResultDispatcher.subscribe("bct",this._breadCrumbTrailItemsChanged,this)}},{key:"disconnectedCallback",value:function(){m()(h()(t.prototype),"disconnectedCallback",this).call(this),O.a.communication.ResultDispatcher.unsubscribe("bct",this.subscribtionKey)}},{key:"ready",value:function(){this.attributeName="display",this.stateTwoValue="none",this.activateStateTwo(),this._nodesObserver=new T(this,this._initTemplates.bind(this))}},{key:"_initTemplates",value:function(){if(this._separatorTemplate=this.querySelector("[data-separator]"),this._searchItemTemplate=this.querySelector("ff-breadcrumb-trail-item[type='search']"),this._filterItemTemplate=this.querySelector("ff-breadcrumb-trail-item[type='filter']"),this._advisorItemTemplate=this.querySelector("ff-breadcrumb-trail-item[type='advisor']"),this._separatorTemplate||(this._separatorTemplate=document.createTextNode(" > ")),!this._searchItemTemplate){var e=document.createElement("ff-breadcrumb-trail-item");e.appendChild(document.createTextNode("{{text}}")),e.updateTemplate(),this._searchItemTemplate=e}if(!this._filterItemTemplate){var t=document.createElement("ff-breadcrumb-trail-item");t.appendChild(document.createTextNode("{{text}}")),t.updateTemplate(),this._filterItemTemplate=t}if(!this._advisorItemTemplate){var n=document.createElement("ff-breadcrumb-trail-item");n.appendChild(document.createTextNode("{{text}}")),n.updateTemplate(),this._advisorItemTemplate=n}}},{key:"_breadCrumbTrailItemsChanged",value:function(e,t){this._nodesObserver.disconnect();for(var n=this.childNodes.length,i=0;i<n;i++)this.removeChild(this.childNodes[0]);if(e&&0<e.length){for(var r=0;r<e.length;r++){var a=e[r];if(a.type){var o=void 0;switch(a.type){case"search":o=this._searchItemTemplate.clone();break;case"filter":o=this._filterItemTemplate.clone();break;case"advisor":o=this._advisorItemTemplate.clone();break;default:O.a.common.Logger.log("ff-breadcrumb-trail: No handle specified for item with type["+a.type+"] default to search template"),o=this._searchItemTemplate.clone()}o.breadCrumbTrailItem=a,this.appendChild(o),r!==e.length-1&&this.appendChild(this._separatorTemplate.cloneNode(!0))}else console.warn("No type for current breadcrumb item",a)}this.activateStateOne(),Object(y.a)(this,function(){this.dispatchEvent(new CustomEvent("dom-updated",{bubbles:!0,composed:!0}))})}else this.activateStateTwo()}}],[{key:"properties",get:function(){return{breadCrumbTrailItems:{type:Object,observer:"_breadCrumbTrailItemsChanged"}}}},{key:"template",get:function(){return Object(v.b)(D())}}]),t}(Object(A.a)(["CssAttributeToggle","RemoveUnresolvedAttribute"],v.a));window.customElements.define("ff-breadcrumb-trail",N)},function(e,t,n){"use strict";n.r(t);var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(4),h=n.n(d),p=n(2),m=n.n(p),f=n(6),g=n.n(f),v=n(7),y=n(11),_=n(14),b=n(10),C=n(9),k=n(17),S=n(0),w=n(13),P=n.n(w),E=n(15),T=n(12);function O(){var e=r()(["<style>:host{display:block}button{background:#06507f;color:#fff}button:hover{background:#03a9f4}</style><slot><button><span>{{model.text}}</span></button></slot>"]);return O=function(){return e},e}var A=function(e){function t(){var e;return o()(this,t),(e=c()(this,u()(t).call(this))).attributeName="display",e.stateTwoValue="none",e._handleClick=e._handleClick.bind(P()(P()(e))),e}return g()(t,e),m()(t,null,[{key:"is",get:function(){return"ff-campaign-advisor-answer"}},{key:"properties",get:function(){return{answer:{type:Object,observer:"_answerChanged"}}}},{key:"template",get:function(){return Object(v.b)(O())}}]),m()(t,[{key:"ready",value:function(){h()(u()(t.prototype),"ready",this).call(this),this.activateStateTwo()}},{key:"connectedCallback",value:function(){h()(u()(t.prototype),"connectedCallback",this).call(this),T.addListener(this,"tap",this._handleClick)}},{key:"disconnectedCallback",value:function(){h()(u()(t.prototype),"disconnectedCallback",this).call(this),T.removeListener(this,"tap",this._handleClick)}},{key:"_answerChanged",value:function(e,t){e?(this.model=e,this.activateStateOne()):this.activateStateTwo()}},{key:"_handleClick",value:function(e){S.a.communication.FFCommunicationEventAggregator.addFFEvent({type:"advisor",answer:this.answer})}},{key:"clone",value:function(){var e=document.createElement(t.is);return e.templateString=this.templateString,e}}]),t}(Object(C.a)(["LightDOMTemplate","CssAttributeToggle","RemoveUnresolvedAttribute"],Object(E.a)(v.a)));function L(){var e=r()(["<style>:host{display:block}</style><slot></slot>"]);return L=function(){return e},e}window.customElements.define(A.is,A);var x=function(e){function t(){var e;return o()(this,t),(e=c()(this,u()(t).call(this)))._renderer=new S.a.html.TemplateRenderer,e.captionSelector="[data-question]",e.attributeName="display",e.stateTwoValue="none",e}return g()(t,e),m()(t,null,[{key:"is",get:function(){return"ff-campaign-advisor-question"}},{key:"properties",get:function(){return{question:{type:Object,observer:"_questionChanged"}}}},{key:"template",get:function(){return Object(v.b)(L())}}]),m()(t,[{key:"ready",value:function(){h()(u()(t.prototype),"ready",this).call(this),this.activateStateTwo()}},{key:"connectedCallback",value:function(){h()(u()(t.prototype),"connectedCallback",this).call(this),this.cloneInnerHTML=this.innerHTML;var e=this.querySelector(this.captionSelector);e&&(this.captionTemplate=e.innerHTML),this.templateAnswer=this.querySelector(A.is),this.templateAnswer||(this.templateAnswer=document.createElement(A.is)),this.insertAnswerHelper=new k.a(this.templateAnswer,this)}},{key:"_questionChanged",value:function(e,t){var n=this;e?b.a.run(function(){n._renderCaption(e),n.insertAnswerHelper.insertAll(n.querySelectorAll(A.is),e.answers,function(e,t){e.answer=t},function(){Object(y.b)(),n.activateStateOne()})}):this.activateStateTwo()}},{key:"_renderCaption",value:function(e){this.querySelector(this.captionSelector).innerHTML=this._renderer.render(this.captionTemplate,e)}},{key:"clone",value:function(){var e=document.createElement(t.is);return e.innerHTML=this.cloneInnerHTML,Object(y.b)(),e}}]),t}(Object(C.a)(["CssAttributeToggle","RemoveUnresolvedAttribute"],v.a));function R(){var e=r()(["<style>:host{display:block}</style><slot></slot>"]);return R=function(){return e},e}window.customElements.define(x.is,x),n.d(t,"CampaignAdvisor",function(){return I});var I=function(e){function t(){var e;return o()(this,t),(e=c()(this,u()(t).call(this))).campaignKey="campaign:advisor",e}return g()(t,e),m()(t,null,[{key:"is",get:function(){return"ff-campaign-advisor"}},{key:"properties",get:function(){return{name:{type:String,value:"",observer:"_nameChanged",reflectToAttribute:!0},not:{type:String}}}},{key:"template",get:function(){return Object(v.b)(R())}}]),m()(t,[{key:"ready",value:function(){h()(u()(t.prototype),"ready",this).call(this),this.attributeName="display",this.stateTwoValue="none",this.activateStateTwo()}},{key:"connectedCallback",value:function(){h()(u()(t.prototype),"connectedCallback",this).call(this),this.subscribtionKey||(this.subscribtionKey=S.a.communication.ResultDispatcher.subscribe(this.getCampaignKey(this.name),this._handleAdvisor,this)),this.advisorQuestionTemplate=this.querySelector(x.is),this.insertQuestionHelper=new k.a(this.advisorQuestionTemplate,this)}},{key:"disconnectedCallback",value:function(){h()(u()(t.prototype),"disconnectedCallback",this).call(this),this.subscribtionKey&&(S.a.communication.ResultDispatcher.unsubscribe(this.getCampaignKey(this.name),this.subscribtionKey),this.subscribtionKey=null)}},{key:"_nameChanged",value:function(e,t){e&&t&&(S.a.communication.ResultDispatcher.unsubscribe(this.getCampaignKey(t),this.subscribtionKey),this.subscribtionKey=S.a.communication.ResultDispatcher.subscribe(this.getCampaignKey(e),this._handleAdvisor,this))}},{key:"getCampaignKey",value:function(e){return 0!==e.length&&e.trim()?["".concat(this.campaignKey,":").concat(e)]:(S.a.common.Logger.debug("No label property defined, will handle all campaigns where only the last feedbacktext will be displayed."),[this.campaignKey])}},{key:"_handleAdvisor",value:function(e){var t=this;if(e){var n=!1;(this.not?this.not.split(","):[]).forEach(function(t){e.name===t.trim()&&(n=!0)}),0<e.activeQuestions.length&&!1===n?b.a.run(function(){var n=t.querySelectorAll(x.is);t.insertQuestionHelper.insertAll(n,e.activeQuestions,function(e,t){e.question=t},function(){Object(y.b)(),t.activateStateOne(),Object(_.a)(t,function(){t.dispatchEvent(new CustomEvent("dom-updated",{bubbles:!0,composed:!0}))})})}):this.activateStateTwo()}else this.activateStateTwo()}}]),t}(Object(C.a)(["CssAttributeToggle","RemoveUnresolvedAttribute"],v.a));window.customElements.define(I.is,I)},function(e,t,n){"use strict";n.r(t);var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(4),h=n.n(d),p=n(2),m=n.n(p),f=n(6),g=n.n(f),v=n(7),y=n(11),_=n(14),b=n(9),C=n(0),k=n(13),S=n.n(k),w=n(15),P=n(12),E=n(22);function T(){var e=r()(["<style>:host{display:block}</style><slot></slot>"]);return T=function(){return e},e}var O=function(e){function t(){var e;return o()(this,t),(e=c()(this,u()(t).call(this))).attributeName="display",e.stateTwoValue="none",e._searchForSingleWordSelector="[data-search='singleWord']",e._renderer=new C.a.html.TemplateRenderer,e._handleSingleSearchTap=e._handleSingleSearchTap.bind(S()(S()(e))),e}return g()(t,e),m()(t,null,[{key:"is",get:function(){return"ff-single-word-search-record"}},{key:"properties",get:function(){return{word:{type:"Object",observer:"_wordChanged"}}}},{key:"template",get:function(){return Object(v.b)(T())}}]),m()(t,[{key:"connectedCallback",value:function(){h()(u()(t.prototype),"connectedCallback",this).call(this);var e=this.querySelector(this._searchForSingleWordSelector);if(e){this.captionTemplate||(this.captionTemplate=e.innerHTML);var n=this.querySelector(E.RecordList.is);n&&n.setAttribute("subscribe","false")}else console.log("No caption tag with css selector ".concat(this._searchForSingleWordSelector," provided."))}},{key:"disconnectedCallback",value:function(){h()(u()(t.prototype),"disconnectedCallback",this).call(this),this._removeSigleWordSearchListener()}},{key:"_wordChanged",value:function(e,n){if(e){this.activateStateTwo(),this.querySelector(this._searchForSingleWordSelector).innerHTML=this._renderer.render(this.captionTemplate,e);var i=this.querySelector(E.RecordList.is);i?i.records=e.previewRecords:C.a.common.Logger.log("[".concat(t.is,"]: No ").concat(E.RecordList.is," element found. Cannot display product data.")),this._removeSigleWordSearchListener(),this._addSingleWordSearchListener(),this.activateStateOne()}else this.activateStateTwo()}},{key:"_removeSigleWordSearchListener",value:function(){var e=this;this.querySelectorAll(this._searchForSingleWordSelector).forEach(function(t){return P.removeListener(t,"tap",e._handleSingleSearchTap)})}},{key:"_addSingleWordSearchListener",value:function(){var e=this;this.querySelectorAll(this._searchForSingleWordSelector).forEach(function(t){return P.addListener(t,"tap",e._handleSingleSearchTap)})}},{key:"_handleSingleSearchTap",value:function(e){try{var t=C.a.common.getParameterString(this.word.searchParams),n=C.a.common.parameterStringToDict(t);n.type="search",C.a.communication.FFCommunicationEventAggregator.addFFEvent(n)}catch(e){console.log(e)}}},{key:"clone",value:function(){var e=this.cloneNode();e.innerHTML=this.innerHTML,Object(y.b)();var t=e.querySelector(E.RecordList.is),n=this.querySelector(E.RecordList.is);return t&&n&&(t._templateRecord=n._templateRecord),e.captionTemplate=this.captionTemplate,Object(y.b)(),e}}]),t}(Object(b.a)(["CssAttributeToggle","RemoveUnresolvedAttribute"],Object(w.a)(v.a)));window.customElements.define(O.is,O);var A=n(17);function L(){var e=r()(["<style>:host{display:block}</style><slot></slot>"]);return L=function(){return e},e}n.d(t,"SingleWordSearch",function(){return x});var x=function(e){function t(){var e;return o()(this,t),(e=c()(this,u()(t).call(this))).attributeName="display",e.stateTwoValue="none",e}return g()(t,e),m()(t,null,[{key:"is",get:function(){return"ff-single-word-search"}},{key:"template",get:function(){return Object(v.b)(L())}}]),m()(t,[{key:"connectedCallback",value:function(){h()(u()(t.prototype),"connectedCallback",this).call(this),this.activateStateTwo(),this.subscribtionKey=C.a.communication.ResultDispatcher.subscribe("singleWordSearch",this._handleSingleWordSearch,this),this._singleWordTemplate=this.querySelector(O.is),this.removeChild(this._singleWordTemplate),this.insertSWSRecordHelper=new A.a(this._singleWordTemplate,this)}},{key:"disconnectedCallback",value:function(){h()(u()(t.prototype),"disconnectedCallback",this).call(this),C.a.communication.ResultDispatcher.unsubscribe("singleWordSearch",this.subscribtionKey)}},{key:"_handleSingleWordSearch",value:function(e){var t=this;e&&0<e.length?(this.activateStateTwo(),requestAnimationFrame(function(){var n=t.querySelectorAll(O.is);t.insertSWSRecordHelper.insertAll(n,e,function(e,t){e.word=t},function(){Object(y.b)(),t.activateStateOne(),Object(_.a)(t,function(){return t.dispatchEvent(new CustomEvent("dom-updated",{bubbles:!0,composed:!0}))})})})):this.activateStateTwo()}}]),t}(Object(b.a)(["CssAttributeToggle","RemoveUnresolvedAttribute"],v.a));window.customElements.define(x.is,x)},function(e,t,n){"use strict";n.r(t);var i=n(3),r=n.n(i),a=n(2),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(6),h=n.n(d),p=n(13),m=n.n(p),f=n(36),g=n.n(f),v=n(41),y=n(29),_=n(26),b=new v.a;window.ShadyCSS||(window.ShadyCSS={prepareTemplate:function(e,t,n){},prepareTemplateDom:function(e,t){},prepareTemplateStyles:function(e,t,n){},styleSubtree:function(e,t){b.processStyles(),Object(y.c)(e,t)},styleElement:function(e){b.processStyles()},styleDocument:function(e){b.processStyles(),Object(y.c)(document.body,e)},getComputedStyleValue:function(e,t){return Object(y.b)(e,t)},flushCustomStyles:function(){},nativeCss:_.a,nativeShadow:_.b}),window.ShadyCSS.CustomStyleInterface=b;var C=n(32);n.d(t,"CustomStyle",function(){return S});var k=window.ShadyCSS.CustomStyleInterface,S=function(e){function t(){var e;return r()(this,t),(e=c()(this,u()(t).call(this)))._style=null,k.addCustomStyle(m()(m()(e))),e}return h()(t,e),o()(t,[{key:"getStyle",value:function(){if(this._style)return this._style;var e=this.querySelector("style");if(!e)return null;var t=(this._style=e).getAttribute("include");return t&&(e.removeAttribute("include"),e.textContent=Object(C.a)(t)+e.textContent),this.ownerDocument!==window.document&&window.document.head.appendChild(this),this._style}}]),t}(g()(HTMLElement));window.customElements.define("custom-style",S)},function(e,t,n){"use strict";n.r(t);var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(4),h=n.n(d),p=n(2),m=n.n(p),f=n(6),g=n.n(f),v=n(7),y=n(15),_=n(12),b=n(10),C=n(11),k=(n(23),n(9)),S=n(0);function w(){var e=r()(["<style>:host{display:none;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}</style><slot></slot>"]);return w=function(){return e},e}var P=function(e){function t(){return o()(this,t),c()(this,u()(t).apply(this,arguments))}return g()(t,e),m()(t,[{key:"ready",value:function(){h()(u()(t.prototype),"ready",this).call(this),_.addListener(this,"tap",this._tapedListener.bind(this))}},{key:"_sortItemChanged",value:function(e,t){this.style.display=e?((this.model=e).selected?(this.classList.add("selected"),this.setAttribute("slot","selected")):(this.classList.remove("selected"),this.hasAttribute("slot")&&this.removeAttribute("slot")),e.showSelected?this.classList.add("showSelected"):this.classList.remove("showSelected"),"block"):"none"}},{key:"_tapedListener",value:function(e){"selected"!==this.slot&&S.a.communication.FFCommunicationEventAggregator.addFFEvent({type:"sort",value:this.sortItem.description})}}],[{key:"is",get:function(){return"ff-sortbox-item"}},{key:"properties",get:function(){return{sortItem:{type:Object,observer:"_sortItemChanged"},key:{type:String}}}},{key:"template",get:function(){return Object(v.b)(w())}}]),t}(Object(k.a)(["LightDOMTemplate"],Object(y.a)(v.a)));function E(){var e=r()(['<style>:host{display:inline-block;outline:0}.ff-sort-closed{display:none}.ff-sort-dropdown-container{position:absolute;background-color:#fff;z-index:1001;-webkit-transition:height .4s;-moz-transition:height .4s;-ms-transition:height .4s;-o-transition:height .4s;transition:height .4s;box-sizing:border-box;@apply(--sort-item-container);}</style><slot name="selected"></slot><div class="ff-sort-dropdown-container ff-sort-closed"><slot></slot></div>']);return E=function(){return e},e}window.customElements.define(P.is,P),n.d(t,"SortBox",function(){return T});var T=function(e){function t(){var e;return o()(this,t),(e=c()(this,u()(t).call(this)))._sortItemTemplate=null,e._keys={},e.TEMPLATE_CSS_SELECTOR="ff-sortbox-item[key='default.template']",e.tabindex=e.getAttribute("tabindex"),e.tabindex||e.setAttribute("tabindex","1"),e}return g()(t,e),m()(t,null,[{key:"is",get:function(){return"ff-sortbox"}},{key:"properties",get:function(){return{items:{type:Array,observer:"_itemsChanged"},opened:{type:Boolean,reflectToAttribute:!0},showSelected:{type:"String",value:"false",observer:"_showSelectedChanged"},showSelectedFirst:{type:"String",value:"false"},collapseOnblur:{type:"String",value:"false"}}}},{key:"template",get:function(){return Object(v.b)(E())}}]),m()(t,[{key:"connectedCallback",value:function(){h()(u()(t.prototype),"connectedCallback",this).call(this);var e=this.querySelector(this.TEMPLATE_CSS_SELECTOR);e?(this._sortItemTemplate=e,this.removeChild(e)):(this._sortItemTemplate=document.createElement("ff-sortbox-item"),this._sortItemTemplate.innerHTML="{{description}}"),this.subscribtionKey=S.a.communication.ResultDispatcher.subscribe("sort",this._itemsChanged,this)}},{key:"disconnectedCallback",value:function(){h()(u()(t.prototype),"disconnectedCallback",this).call(this),S.a.communication.ResultDispatcher.unsubscribe("sort",this.subscribtionKey)}},{key:"ready",value:function(){h()(u()(t.prototype),"ready",this).call(this),this.attributeName="display",this.stateTwoValue="none",this.activateStateTwo(),_.addListener(this,"tap",this.toggle.bind(this)),this.addEventListener("blur",this._onblur.bind(this)),this._initItems(),this._initOpened()}},{key:"_initItems",value:function(){var e=this;this.querySelectorAll("ff-sortbox-item").forEach(function(t){var n=t.getAttribute("key");n&&""!==n&&(e._keys[n]=t)})}},{key:"_initOpened",value:function(){var e=this,t=this.getDropDown();this.opened?(this.opened=!0,t.classList.remove("ff-sort-closed"),this._show(t,!1),this.updateStyles()):this._hide(t,!1,function(){e.opened=!1,t.classList.add("ff-sort-closed"),e.updateStyles()})}},{key:"_itemsChanged",value:function(e,t){var n=this;if(this.opened&&this.hide(),0<e.length){var i=[];"true"===this.showSelected&&(e=this.initShowSelected(e));var r=this.querySelectorAll("ff-sortbox-item");r.forEach(function(e){return e.parentNode.removeChild(e)}),Object(C.b)(),e.forEach(function(e){var t=n.getKey(e),r=n._keys[t];r?r.parentNode||n.appendChild(r):((r=n._sortItemTemplate.cloneNode(!0)).setAttribute("key",t),n._keys[t]=r,n.appendChild(r)),i[t]=!0,r.sortItem=e}),Object(C.b)(),(r=this.querySelectorAll("ff-sortbox-item")).forEach(function(e){var t=n.getKey(e.sortItem);i[t]||n.removeChild(e)}),Object(C.b)(),this.activateStateOne(),this.dispatchEvent(new CustomEvent("dom-updated",{bubbles:!0,composed:!0}))}else this.activateStateTwo()}},{key:"getKey",value:function(e){return e.name+"."+e.order+(e.selected&&"true"===this.showSelected?".selected":"")}},{key:"show",value:function(){if(!this.opened){var e=this.getDropDown();this.opened=!0,e.classList.remove("ff-sort-closed"),this._show(e,!0),this.updateStyles()}}},{key:"hide",value:function(){var e=this;if(this.opened){var t=this.getDropDown();t.__transitionActive__=!1,this._hide(t,!0,function(){e.opened=!1,t.classList.add("ff-sort-closed"),e.updateStyles()})}}},{key:"toggle",value:function(e){!0===e?this.hide():!1===e?this.show():this.opened?this.hide():this.show()}},{key:"_onblur",value:function(){var e=this;"true"==this.collapseOnblur&&b.b.run(function(){return e.hide()},150)}},{key:"getDropDown",value:function(){return this.root.querySelector(".ff-sort-dropdown-container")}},{key:"_showSelectedChanged",value:function(e,t){var n=this;if(!0===this.readyCalled){var i=[];this.querySelectorAll(P.is).forEach(function(e){i.push(e.productsPerPageItem),n.removeChild(e)}),this.items=i}else this.readyCalled=!0}},{key:"initShowSelected",value:function(e){for(var t=e.slice(),n=0;n<t.length;n++){var i=t[n];if(i.selected){var r=JSON.parse(JSON.stringify(i));r.selected=!1,r.showSelected=!0,"true"===this.showSelectedFirst?t.splice(0,0,r):t.splice(n+1,0,r);break}}return t}}]),t}(Object(k.a)(["CssAttributeToggle","CollapseElement","RemoveUnresolvedAttribute"],Object(y.a)(v.a)));window.customElements.define(T.is,T)},function(e,t,n){"use strict";n.r(t);var i=n(8),r=n.n(i),a=n(3),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(4),h=n.n(d),p=n(2),m=n.n(p),f=n(6),g=n.n(f),v=n(7),y=n(14),_=n(15),b=n(12),C=n(10),k=(n(23),n(0)),S=n(9);function w(){var e=r()(['<style>:host{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;cursor:pointer}.item-caption{width:100%}.container-hidden{display:none!important}.item-container{display:none;-webkit-transition:.1s all linear;transition:.1s all linear;-webkit-transition-delay:.3s;transition-delay:.3s;position:absolute;z-index:1;background-color:#fff;@apply(--container-mixin);}:host([direction=down][flyout=true])>.item-container{top:100%}:host[direction=down]>.item-container{top:100%;left:0}</style><style id="mobile-mode">:host([flyout=false][selected])>.item-container{top:0;z-index:0;position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}:host([flyout=false])>.item-container{display:none}:host([flyout=false][direction=down][selected])>.item-container{top:0}:host([flyout=false]){-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}:host([flyout=false][selected]) .ff-navigation-link{display:none!important;top:0}:host([flyout=false]) ::content .ff-navigation-link{display:none!important}</style><style id="desktop-mode">:host([flyout=true][direction=right])>.item-container{top:0;left:100%}:host([flyout=true][direction=left])>.item-container{top:0;right:100%}:host([flyout=true]:hover)>.item-container{display:inline-block}</style><div id="itemCaption" class="item-caption"><slot name="content"></slot></div><div id="itemContainer" class="item-container container-hidden"><slot name$="cluster-level-{{nextClusterLevel}}"></slot></div>']);return w=function(){return e},e}var P=function(e){function t(){var e;return o()(this,t),(e=c()(this,u()(t).call(this)))._ffCommunication=k.a.communication.FFCommunicationEventAggregator,e}return g()(t,e),m()(t,null,[{key:"is",get:function(){return"ff-navigation-item"}},{key:"properties",get:function(){return{element:{type:Object,observer:"_elementChanged"},direction:{type:String,value:"right",reflectToAttribute:!0},clusterLevel:{type:"Number",value:0,observer:"_clusterLevelChanged"},type:{type:String,value:"default"},hasSubelements:{type:Boolean,value:!1,reflectToAttribute:!0},alwaysSearchOntap:{type:Boolean},flyout:{type:String,value:"true",observer:"_flyoutChanged",reflectToAttribute:!0},selected:{type:Boolean,value:!1,reflectToAttribute:!0}}}},{key:"template",get:function(){return Object(v.b)(w())}}]),m()(t,[{key:"ready",value:function(){var e=this;h()(u()(t.prototype),"ready",this).call(this),this.subscribtionKey=k.a.communication.ResultDispatcher.subscribe("navigation",this._navigationChanged,this),this.itemContainer=this.root.querySelector("#itemContainer"),b.addListener(this,"tap",this._taped.bind(this)),this.root.querySelector("#itemCaption").addEventListener("mouseOver",function(t){return e.onHovered(t)})}},{key:"disconnectedCallback",value:function(){h()(u()(t.prototype),"disconnectedCallback",this).call(this),k.a.communication.ResultDispatcher.unsubscribe(["navigation"],this.subscribtionKey)}},{key:"_navigationChanged",value:function(){var e=this;if(this.element&&!this.hasSubelements){var t=this._ffCommunication.navigationResult[this.element.associatedFieldName+"/"+this.element.name];if(t){var n=t.subelements;n&&0<n.length&&(this.setSubElements(t.subelements),Object(y.a)(this,function(){return e.addSubelements()}))}}}},{key:"addSubelements",value:function(){var e=this,t=[];this.elements.forEach(function(n){var i=e._createSubItem(n);i&&t.push(i)});var n=document.createDocumentFragment();t.forEach(function(e){return n.appendChild(e)}),this.appendChild(n)}},{key:"_createSubItem",value:function(e){var t="default";this._itemTemplate["layer"+this.clusterLevel]&&(t="layer"+this.clusterLevel);var n=this._ffCommunication.navigationResult[e.associatedFieldName+"/"+e.name];n&&n.subelements&&0<n.subelements.length&&this._itemTemplate.parent&&(t="parent");var i=this._itemTemplate[t].clone();return i._itemTemplate=this._itemTemplate,i.element=e,i.flyout=this.flyout,i.direction="right",i}},{key:"_dataSearchClicked",value:function(e){this.search(),event.stopPropagation(),event.cancelBubble=!0}},{key:"_initLink",value:function(){var e=this;this.link=this.querySelector("[slot='content'] [data-search]"),this.link&&(this._addEventListenerToNode(this.link,"tap",function(t){return e._dataSearchClicked(t)}),this.hasSubelements||this.link.classList.add("ff-navigation-link"))}},{key:"connectedCallback",value:function(){var e=this;h()(u()(t.prototype),"connectedCallback",this).call(this),this.itemContainer.classList.remove("container-hidden"),this._initLink(),this.hasSubelements&&Object(y.a)(this,function(){return e.addSubelements()})}},{key:"_elementChanged",value:function(e,t){try{this.model=e,this.clusterLevel=e.clusterLevel;var n=this._ffCommunication.navigationResult[e.associatedFieldName+"/"+e.name];n&&this.setSubElements(n.subelements)}catch(e){console.warn(e)}}},{key:"setTemplate",value:function(e){this._itemTemplate=e}},{key:"setSubElements",value:function(e){this.elements=e,this.hasSubelements=this.elements&&0<this.elements.length}},{key:"_clusterLevelChanged",value:function(e,t){this.nextClusterLevel=e+1,this.setAttribute("slot","cluster-level-"+e)}},{key:"_taped",value:function(e){"false"===this.flyout?this.hasSubelements&&!this.alwaysSearchOntap?(this.selected=!this.selected,this.link&&(1==this.selected?this.link.classList.add("ff-navigation-link"):this.link.classList.remove("ff-navigation-link"))):this.hasSubelements&&this.alwaysSearchOntap?(this.selected=!this.selected,this.link&&(1==this.selected?this.link.classList.add("ff-navigation-link"):this.link.classList.remove("ff-navigation-link")),this.search()):(this.search(),this.link&&this.link.classList.add("ff-navigation-link")):this.search(),e.stopPropagation(),e.cancelBubble=!0}},{key:"_flyoutChanged",value:function(e,t){"true"===e&&(this.selected=!1)}},{key:"search",value:function(){var e=this,t=this.element.searchParams,n=k.a.common.parameterStringToDict(t.split("?")[1]);n.type="navigation-search";var i=this.parentElement;i.classList.add("container-hidden"),C.a.run(function(){return e._ffCommunication.addFFEvent(n)}),C.b.run(function(){return i.classList.remove("container-hidden")},1e3)}},{key:"clone",value:function(){var e=document.createElement(t.is);return e.templateString=this.templateString,e}},{key:"onHovered",value:function(){if(0!==this.clusterLevel){var e=window.innerWidth-this.getBoundingClientRect().left;this.setAttribute("direction",e<500?"left":"right")}}}]),t}(Object(S.a)(["LightDOMTemplate","RemoveUnresolvedAttribute"],Object(_.a)(v.a)));function E(){var e=r()(['<style>:host{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}#items{-webkit-box-flex:1;-ms-flex:1;flex:1;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex}:host([layout=vertical])>#items{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}:host([layout=horizontal])>#items{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.navigation-label{display:none}#navigation-menu{display:none;border-bottom:1px solid #000;cursor:pointer;padding:5px;background-color:#b9ecff;-webkit-box-flex:1;-ms-flex:1;flex:1;width:100%}</style>\x3c!-- TODO: adjust selector for FF/shady --\x3e<style id="navigation-mobile-mode">:host([mobile=true])>.navigation-label{display:block}:host([mobile=true])>#navigation-menu:checked+label+#items{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-ms-flex-direction:column!important;flex-direction:column!important}:host([mobile=true])>#items{display:none;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}:host([mobile=true]){-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-ms-flex-direction:column!important;flex-direction:column!important;width:100%}</style><input id="navigation-menu" type="checkbox"> <label for="navigation-menu" class="navigation-label"><slot name="menu"></slot></label><div id="items"><slot name="cluster-level-0"></slot></div>']);return E=function(){return e},e}window.customElements.define(P.is,P),n.d(t,"Navigation",function(){return T});var T=function(e){function t(){var e;return o()(this,t),(e=c()(this,u()(t).call(this)))._ffCommunication=k.a.communication.FFCommunicationEventAggregator,e._navigationItemTemplates={},e.elements={},e.initialized=!1,e.querySelectorAll(P.is).forEach(function(t){var n=t.getAttribute("type");(e._navigationItemTemplates[n||"default"]=t).parentNode.removeChild(t)}),e}return g()(t,e),m()(t,null,[{key:"is",get:function(){return"ff-navigation"}},{key:"properties",get:function(){return{layout:{type:String,value:"horizontal",observer:"_layoutChanged",reflectToAttribute:!0},flyout:{type:"String",value:"true",observer:"_flyoutChanged",reflectToAttribute:!0},mobile:{type:"String",value:"false",observer:"_mobileChanged",reflectToAttribute:!0},fetchInitial:{type:"String",value:!0},firstFetch:{type:"Number",value:2},fetchSize:{type:"Number",value:1},maxFetch:{type:"Number",value:10},fetchTime:{type:"Number",value:100}}}},{key:"template",get:function(){return Object(v.b)(E())}}]),m()(t,[{key:"ready",value:function(){h()(u()(t.prototype),"ready",this).call(this),this.subscribtionKey=k.a.communication.ResultDispatcher.subscribe("navigation",this._navigationChanged,this)}},{key:"connectedCallback",value:function(){h()(u()(t.prototype),"connectedCallback",this).call(this),"false"!==this.fetchInitial&&this.fetch()}},{key:"fetch",value:function(){var e=this;this.querySelectorAll(P.is).forEach(function(t){return e.removeChild(t)});var t={type:"navigation",firstFetch:this.firstFetch,fetchSize:this.fetchSize,maxFetch:this.maxFetch,fetchTime:this.fetchTime};setTimeout(function(){return e._ffCommunication.addFFEvent(t)})}},{key:"disconnectedCallback",value:function(){h()(u()(t.prototype),"disconnectedCallback",this).call(this),this.initialized=!1,k.a.communication.ResultDispatcher.unsubscribe(["navigation"],this.subscribtionKey)}},{key:"_navigationChanged",value:function(e){var t=this;if(!this.initialized)try{if(e&&e[0]){var n=this._createLayerItems(e[0]),i=document.createDocumentFragment();n.forEach(function(e){return i.appendChild(e)}),this.appendChild(i)}else console.warn("navigation has no results");this.initialized=!0,Object(y.a)(this,function(){t.updateLayout(),t.dispatchEvent(new CustomEvent("dom-updated",{bubbles:!0,composed:!0}))})}catch(e){console.warn(e)}}},{key:"_createLayerItems",value:function(e){var t=this,n=[];return e.forEach(function(e){var i=t._createItem(e);i&&n.push(i)}),n}},{key:"_createItem",value:function(e){try{var t=this._navigationItemTemplates.header?"header":"default",n=this._navigationItemTemplates[t].clone();return n.setTemplate(this._navigationItemTemplates),n.element=e,n.flyout=this.flyout,n}catch(t){return console.warn("Can not create item from element",e,t),null}}},{key:"_layoutChanged",value:function(e,t){e&&this.updateLayout()}},{key:"updateLayout",value:function(){var e=this;try{this.querySelectorAll(P.is+"[slot='cluster-level-0']").forEach(function(t){t.setAttribute("direction","horizontal"===e.layout?"down":"right")});for(var t=1;t<=10;t++)this.querySelectorAll("".concat(P.is,"[slot='cluster-level-").concat(t,"}']")).forEach(function(e){return e.setAttribute("direction","right")})}catch(t){console.warn("failed to change layout",t)}}},{key:"_flyoutChanged",value:function(e,t){e!=t&&this.querySelectorAll(P.is).forEach(function(t){return t.setAttribute("flyout",e)})}},{key:"_mobileChanged",value:function(e,t){"true"===e&&(this.flyout="false")}}]),t}(v.a);window.customElements.define(T.is,T)},function(e,t,n){"use strict";n.r(t);var i=n(3),r=n.n(i),a=n(2),o=n.n(a),s=n(5),c=n.n(s),l=n(1),u=n.n(l),d=n(4),h=n.n(d),p=n(6),m=n.n(p),f=n(7),g=n(9),v=n(0),y=function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return m()(t,e),o()(t,null,[{key:"is",get:function(){return"ff-checkout-tracking-item"}},{key:"properties",get:function(){return{count:{type:String,value:"1",reflectToAttribute:!0},recordId:{type:String}}}}]),t}(f.a);window.customElements.define(y.is,y),n.d(t,"CheckoutTracking",function(){return _});var _=function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return m()(t,e),o()(t,[{key:"connectedCallback",value:function(){h()(u()(t.prototype),"connectedCallback",this).call(this),!0!==this.disableAutoTracking&&this.trackCheckoutItems()}},{key:"trackCheckoutItems",value:function(){var e=[];this.querySelectorAll(y.is).forEach(function(t){e.push(t.recordId.trim())}),this._getRecords(e)}},{key:"_recordsChanged",value:function(e){var t=this;e&&e.forEach(function(e){var n=t.querySelector("[record-id='".concat(e.id,"']"));t._trackCheckoutClick(n,e)})}},{key:"_getRecords",value:function(e){if(e){var t=this.getRecordEvent(e);this.dispatchEvent(new CustomEvent("before-get-records",{detail:t,bubbles:!0})),t.success=v.a.common.concatFunctions(t.success,this.recordSearchHandler.bind(this)),v.a.communication.FFCommunicationEventAggregator.addFFEvent(t)}}},{key:"getRecordEvent",value:function(e){var t;try{t=parseFloat(v.a.communication.globalSearchParameter.version)}catch(e){this.error("Could not parse float from Fact-Finder version string, doing nothing.")}return 7.3!==t?null:{type:"getRecords",recordId:e,topics:function(){return["checkout-tracking"]}}}},{key:"recordSearchHandler",value:function(e){0<e.length&&e[0]&&e[0].record&&(this.records=e)}}],[{key:"is",get:function(){return"ff-checkout-tracking"}},{key:"properties",get:function(){return{records:{type:Array,observer:"_recordsChanged"},disableAutoTracking:{type:Boolean}}}}]),t}(Object(g.a)(["ElementLog","Tracking","RemoveUnresolvedAttribute"],f.a));window.customElements.define(_.is,_)},function(e,t,n){"use strict";n.r(t);var i,r,a=n(0);n.d(t,"factfinder",function(){return a.a}),i=a.a,r=setTimeout(function(){i.common.Logger.log("[ff-communication]: The WebComponentsReady event didn't fire within 10 seconds. All deferred dispatches are emitted now. Future dispatches will be emitted immediately."),i.communication.ResultDispatcher.startDispatching()},1e4),document.addEventListener("WebComponentsReady",function(){clearTimeout(r),i.communication.ResultDispatcher.startDispatching()}),a.a.elements={ElementLogBehavior:n(39).ElementLogBehavior,CollapseElementBehavior:n(40).CollapseElementBehavior,TrackingBehavior:n(31).TrackingBehavior},WebComponents.waitFor(function(){n(49),n(89),n(56),n(42),n(57),n(30),n(22),n(87),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(84),n(68),n(86),n(69),n(70),n(71),n(72),n(90),n(73),n(85),n(74),n(91),n(75),n(76),n(77),n(92),n(78),n(79),n(88),n(80),n(81),n(82),n(83)})}]));